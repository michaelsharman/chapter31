
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>Multi-step forms - chapter31 &raquo;</title>
	<meta name="author" content="Michael Sharman">

	
	<meta name="description" content="Rahul Narula has a great post on Multi-step forms. As web developers forms are a part of our everyday lives, sometimes those forms exist over several &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="chapter31 &raquo;" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
</head>

<body>
	<header id="header" class="inner"><h1><a href="/">chapter31 &raquo;</a></h1>
<nav id="main-nav"><ul class="main-navigation">
  <li><a href="/about">about</a></li>
  <li><a href="https://github.com/michaelsharman/">projects</a></li>
  <li><a href="/shell-commands">shell</a></li>
  <li><a href="http://tools.chapter31.com/">tools</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul class="main-navigation">
  <li><a href="/about">about</a></li>
  <li><a href="https://github.com/michaelsharman/">projects</a></li>
  <li><a href="/shell-commands">shell</a></li>
  <li><a href="http://tools.chapter31.com/">tools</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="http://google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:michaelsharman.github.io/chapter31">
			</form>
		</div>
	</div>
</nav>
<nav id="sub-nav" class="alignright">
	<div class="social">
		
		
		
		<a class="twitter" href="http://twitter.com/michaelsharman" title="Twitter">Twitter</a>
		
		
		<a class="github" href="https://github.com/michaelsharman" title="GitHub">GitHub</a>
		
    
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	</div>
	<form class="search" action="http://google.com/search" method="get">
		<input class="alignright" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:michaelsharman.github.io/chapter31">
	</form>
</nav>

</header>
	
		

	
	<div id="content" class="inner"><article class="post">
	<h2 class="title">Multi-step Forms</h2>
	<div class="entry-content"><p><a href="http://rahulnarula.blogspot.com/">Rahul Narula</a> has a great post on <a href="http://rahulnarula.blogspot.com/2006/09/multi-step-forms.html">Multi-step forms</a>. As web developers forms are a part of our everyday lives, sometimes those forms exist over several pages instead of 1 looong page. That being said we need a way to hold the data entered by the user at each step (page) thoughout the process.</p>

<p>We can of course use either of the following:</p>

<ul>
<li>Database</li>
<li>Session scope</li>
<li>Structures</li>
<li>URL</li>
</ul>


<p>There are probably more but that would be all I would consider (at this stage!).</p>

<p>The database is fine but poses problems; namely we need to create a new record after the submission from step 1. Lets say there are 4 steps (pages) to this form. If a user doesn&#8217;t complete all steps (they may give up!) then we need a mechanism for clearing out the now (presumably) invalid data from the database. Of course there are many ways to do this which really aren’t that difficult, but it is still more work for you to do! Also consider the extra load on the database server in a high traffic environment.</p>

<p>Sessions work really well here, no extra database load and no cleaning up the database if a user doesn&#8217;t complete all steps. This is one I use all the time.</p>

<p>The URL (via action=&#8221;get&#8221;) is an option, particularly if you don’t want to (or can&#8217;t) use session. Things get tricky however if users are allowed to jump back to prior pages. i.e. if they are on step 4 and they want to go back to step 2. They can use the back button, but it&#8217;s not very elegant.</p>

<p>Rahul&#8217;s method uses a UDF to generate hidden fields on each subsequent page. A nice and elegant solution including the ability to &#8216;exclude&#8217; a list of fields.</p>

<p>An excerpt from his site:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&lt;</span><span class="nx">cffunction</span> <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;createHiddenFields&quot;</span> <span class="nx">output</span><span class="o">=</span><span class="s2">&quot;no&quot;</span> <span class="nx">returntype</span><span class="o">=</span><span class="s2">&quot;string&quot;</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="nx">cfargument</span> <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;excludeFields&quot;</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;string&quot;</span> <span class="k">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="o">/&gt;</span>
</span><span class='line'>
</span><span class='line'> <span class="o">&lt;</span><span class="nx">cfscript</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">formFieldsList</span> <span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">;</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">formFieldArray</span><span class="o">=</span> <span class="nx">ArrayNew</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">formHTML</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">;</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">element</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">exclude</span> <span class="o">=</span> <span class="nx">listappend</span><span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">excludeFields</span><span class="p">,</span><span class="s2">&quot;formfields&quot;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">if</span><span class="p">(</span><span class="nx">structKeyExists</span><span class="p">(</span><span class="nx">form</span><span class="p">,</span><span class="s2">&quot;fieldnames&quot;</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>   <span class="nx">formFieldsList</span> <span class="o">=</span> <span class="nx">form</span><span class="p">.</span><span class="nx">fieldnames</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="nx">formFieldArray</span> <span class="o">=</span> <span class="nx">listtoArray</span><span class="p">(</span><span class="nx">formFieldsList</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'> <span class="o">&lt;</span><span class="err">/cfscript&gt;</span>
</span><span class='line'>
</span><span class='line'> <span class="o">&lt;</span><span class="nx">cfsavecontent</span> <span class="nx">variable</span><span class="o">=</span><span class="s2">&quot;formHTML&quot;</span><span class="o">&gt;</span>
</span><span class='line'>   <span class="o">&lt;</span><span class="nx">cfoutput</span><span class="o">&gt;</span>
</span><span class='line'> <span class="o">&lt;</span><span class="nx">cfloop</span> <span class="nx">from</span> <span class="o">=</span><span class="s2">&quot;1&quot;</span> <span class="nx">to</span><span class="o">=</span><span class="s2">&quot;#ArrayLen(formFieldArray)#&quot;</span> <span class="nx">index</span><span class="o">=</span><span class="s2">&quot;element&quot;</span><span class="o">&gt;</span>
</span><span class='line'>   <span class="o">&lt;</span><span class="nx">cfif</span> <span class="nx">listfindnocase</span><span class="p">(</span><span class="nx">exclude</span><span class="p">,</span><span class="nx">formFieldArray</span><span class="p">[</span><span class="nx">element</span><span class="p">])</span> <span class="nx">eq</span> <span class="mi">0</span><span class="o">&gt;</span>
</span><span class='line'>     <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;hidden&quot;</span> <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;#lcase(formFieldArray[element])#&quot;</span>  <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;#htmleditformat(form[formFieldArray[element]])#&quot;</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="err">/cfif&gt;</span>
</span><span class='line'>   <span class="o">&lt;</span><span class="err">/cfloop&gt;</span>
</span><span class='line'> <span class="o">&lt;</span><span class="err">/cfoutput&gt;</span>
</span><span class='line'> <span class="o">&lt;</span><span class="err">/cfsavecontent&gt; </span>
</span><span class='line'>
</span><span class='line'>  <span class="o">&lt;</span><span class="nx">cfreturn</span> <span class="nx">formHTML</span> <span class="o">/&gt;</span>
</span><span class='line'><span class="o">&lt;</span><span class="err">/cffunction&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>To use the UDF just call this udf anywhere within the &lt;form&gt;…&lt;/form&gt; in your page</p>
</div>


<div class="meta">
	<div class="date">








  


<time datetime="2006-09-06T09:23:30+10:00" pubdate data-updated="true">Sep 6<span>th</span>, 2006</time></div>
	<div class="tags">


	<a class='category' href='/categories/coldfusion/'>ColdFusion</a>


</div>
	
		<div class="comments"><a href="/2006/09/06/multi-step-forms/#disqus_thread">Comments</a></div>
	
</div></article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
	
	
	
	<a class="addthis_counter addthis_pill_style"></a>
	</div>
  <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid="></script>
</div>



<section id="comment">
    <h2 class="title">Comments</h2>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</section>
</div>
	<footer id="footer" class="inner">Copyright &copy; 2013

    Michael Sharman

</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->


<script type="text/javascript">
      var disqus_shortname = 'chapter31';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://michaelsharman.github.io/chapter31/2006/09/06/multi-step-forms/';
        var disqus_url = 'http://michaelsharman.github.io/chapter31/2006/09/06/multi-step-forms/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-306772-2']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>



</body>
</html>
