<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: PHP | chapter31 &raquo;]]></title>
  <link href="http://chapter31.com/categories/php/atom.xml" rel="self"/>
  <link href="http://chapter31.com/"/>
  <updated>2013-05-06T09:51:56+10:00</updated>
  <id>http://chapter31.com/</id>
  <author>
    <name><![CDATA[Michael Sharman]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Installing PHP 5.4+ from source on Mac OSX Mountain Lion]]></title>
    <link href="http://chapter31.com/2013/05/06/installing-php-5-dot-4-plus-from-source-on-mac-mountain-lion/"/>
    <updated>2013-05-06T09:32:00+10:00</updated>
    <id>http://chapter31.com/2013/05/06/installing-php-5-dot-4-plus-from-source-on-mac-mountain-lion</id>
    <content type="html"><![CDATA[<p>Download and extract the PHP source from <a href="http://php.net/downloads.php">php.net</a>, for me that was  5.4.14. Put it somewhere friendly, the desktop will do.</p>

<p>Open a terminal and install some dependancies via brew:</p>

<p><code>bash
brew install libjpeg
brew install pcre
brew install libxml2
brew install mcrypt
</code></p>

<p>Download and install ICU from <a href="http://site.icu-project.org/download/48#ICU4C-Download">http://site.icu-project.org/download/48#ICU4C-Download</a></p>

<p><code>bash
tar xzvf icu4c-4_8_1-src.tgz
cd icu/source
./runConfigureICU MacOSX
make
sudo make install
</code></p>

<p>Rebuild IMAP, download source from <a href="ftp://ftp.cac.washington.edu/imap/">ftp://ftp.cac.washington.edu/imap/</a></p>

<p><code>bash
make osx EXTRACFLAGS="-arch i386 -arch x86_64 -g -Os -pipe -no-cpp-precomp"
sudo cp c-client/*.h /usr/local/include/
sudo cp c-client/*.c /usr/local/lib/
sudo cp c-client/c-client.a /usr/local/lib/libc-client.a
</code></p>

<p>Then in the PHP source folder you downloaded:</p>

<p><code>bash
cd ~/Desktop/php/ext/imap
phpize
</code></p>

<p>Now run configure:</p>

<p><code>bash
./configure  \
--prefix=/usr  \
--mandir=/usr/share/man  \
--infodir=/usr/share/info  \
--sysconfdir=/private/etc  \
--with-apxs2=/usr/sbin/apxs  \
--enable-cli  \
--with-config-file-path=/etc  \
--with-libxml-dir=/usr  \
--with-openssl=/usr  \
--with-kerberos=/usr  \
--with-zlib=/usr  \
--enable-bcmath  \
--with-bz2=/usr  \
--enable-calendar  \
--with-curl=/usr  \
--enable-dba  \
--enable-exif  \
--enable-ftp  \
--with-gd  \
--enable-gd-native-ttf  \
--with-icu-dir=/usr/local  \
--with-iodbc=/usr  \
--with-ldap=/usr  \
--with-ldap-sasl=/usr  \
--with-libedit=/usr  \
--enable-mbstring  \
--enable-mbregex  \
--with-mysql=mysqlnd  \
--with-mysqli=mysqlnd  \
--without-pear  \
--with-pdo-mysql=mysqlnd  \
--with-mysql-sock=/var/mysql/mysql.sock  \
--with-readline=/usr  \
--enable-shmop  \
--with-snmp=/usr  \
--enable-soap  \
--enable-sockets  \
--enable-sysvmsg  \
--enable-sysvsem  \
--enable-sysvshm  \
--with-tidy  \
--enable-wddx  \
--with-xmlrpc  \
--with-iconv-dir=/usr  \
--with-xsl=/usr  \
--enable-zip  \
--with-imap=/usr/local/imap-2007 \
--with-kerberos \
--with-imap-ssl \
--enable-intl \
--with-pcre-regex  \
--with-pgsql=/usr  \
--with-pdo-pgsql=/usr \
--with-freetype-dir=/usr/X11 \
--with-jpeg-dir=/usr  \
--with-png-dir=/usr/X11
</code></p>

<p>If you want to check for errors in the build step you can run:</p>

<p><code>bash
make test
</code></p>

<p>This might take a while, like 30 mins.</p>

<p>If you're feeling bold, or once the test has completed, run:</p>

<p><code>bash
sudo make install
</code></p>

<p>Done!</p>

<p>PS If you're getting strange errors during <em>configure</em> make sure you have these libraries:</p>

<p><code>bash
brew install libpng
brew install freetype
brew install openssl
</code></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Date timezone error when upgrading to PHP 5.3+]]></title>
    <link href="http://chapter31.com/2013/05/06/date-timezone-error-when-upgrading-to-php-5-dot-3-plus/"/>
    <updated>2013-05-06T09:03:00+10:00</updated>
    <id>http://chapter31.com/2013/05/06/date-timezone-error-when-upgrading-to-php-5-dot-3-plus</id>
    <content type="html"><![CDATA[<p>I upgraded to 5.4.14 last night on Mac OSX 10.8.3. Things went smoothly except I got an error running my apps:</p>

<pre><code>date(): It is not safe to rely on the system's timezone settings. You are *required* to use the date.timezone setting or the date_default_timezone_set() function. In case you used any of those methods and you are still getting this warning, you most likely misspelled the timezone identifier. We selected the timezone 'UTC' for now, but please set date.timezone to select your timezone.
</code></pre>

<p>Basically since PHP 5.3.0 you have to explicitly set your date.timezone setting, this is a good thing. Prior to PHP 5.3.0, the line existed in the php.ini but was generally commented out. There are 2 places you could make this change.</p>

<ol>
<li>php.ini</li>
<li>in your application codebase</li>
</ol>


<p>Ideally you'd do both. Have a default in your php.ini that all applications on the server can use, and you can override if needed in your application.</p>

<h2>php.ini</h2>

<p>Look in your <em>php.ini</em> for the date.timezone setting and uncomment if necessary. For me I set it to "Australia/NSW". You can get a full list of <a href="http://us3.php.net/manual/en/timezones.php">supported timezones here</a></p>

<p><code>php
date.timezone = "Australia/NSW"
</code></p>

<h2>Application codebase</h2>

<p>The method above, of course is a server default, so if you want something specific to your application, try:</p>

<p><code>php
date_default_timezone_set("Australia/NSW");
</code></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Wordpress - detecting the categories of a post]]></title>
    <link href="http://chapter31.com/2011/05/11/wordpress-detecting-the-categories-of-a-post/"/>
    <updated>2011-05-11T23:48:49+10:00</updated>
    <id>http://chapter31.com/2011/05/11/wordpress-detecting-the-categories-of-a-post</id>
    <content type="html"><![CDATA[<p>I was creating a Wordpress child theme (the best way to modify/override your themes) tonight and had the need to have different display options depending on which categories the blog article had. So for example if I had a post categorised with "portfolio", I wanted to hide the comments form which usually sits at the bottom of a post.</p>

<p>The following snippet will loop over all post categories, if it finds that "portfolio" is one of the categories assigned to the current post then a local variable (boolean) is set which you can use to hide Wordpress functions anywhere in the current template.</p>

<p>``` php
&lt;?php</p>

<pre><code>$isPortfolio = false;

$categories = get_the_category();

foreach($categories as $cat)
{
    if ($cat-&gt;cat_name == 'portfolio')
    {
        $isPortfolio = true;
        break;
    }       
}
</code></pre>

<p>?>
```</p>

<p>These changes were at the top of my child theme's <em>single.php</em> template. Not displaying the comments form was as simple as:</p>

<p><code>
&lt;?php if (!$isPortfolio){comments_template('', true);} ?&gt;
</code></p>

<h2>Update 12th May 2011</h2>

<p>Thanks to Martin in the comments below for alerting me to the fact that Wordpress already has something for this, has_category($category, $post);</p>

<p><code>
&lt;?php $isPortfolio = has_category('portfolio'); ?&gt;
</code></p>

<p>Note I didn't need the 2nd argument as it defaults to the current post.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[FancyBox for Wordpress plugin not working]]></title>
    <link href="http://chapter31.com/2011/05/11/fancybox-for-wordpress-plugin-not-working/"/>
    <updated>2011-05-11T23:42:10+10:00</updated>
    <id>http://chapter31.com/2011/05/11/fancybox-for-wordpress-plugin-not-working</id>
    <content type="html"><![CDATA[<p>I just spent some time figuring out why fancybox wasn't working tonight (image thumbnails were just linking to the large image...not loading the overlay as they should). It now seems obvious after the fact but as far as I can see it's NOT in the fancybox docs.</p>

<p>When you insert your gallery from the media section of a page in wp-admin, you HAVE to choose "Image File", not "Attachment Page". That's it!</p>

<p>Annoyingly if you set the option to "Image File", save and exit...the next time you edit the page Wordpress doesn't remember your decision and instead checks the "Attachment Page" radio option.</p>

<p>Hope this helps some people :)</p>

<p><img src="/images/uploads/2011/05/gallery_settings.jpg" alt="wordpress gallery settings" /></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Development configuration tips for Ubuntu]]></title>
    <link href="http://chapter31.com/2008/12/13/development-configuration-tips-for-ubuntu/"/>
    <updated>2008-12-13T13:28:20+11:00</updated>
    <id>http://chapter31.com/2008/12/13/development-configuration-tips-for-ubuntu</id>
    <content type="html"><![CDATA[<p>I just setup my machine at home with Ubuntu 8.10 (desktop) which was so easy think I saved hours off the time it would normally take with Windows. So much is already installed and ready to go and with apt (or the Synaptic package manager) it's super quick to download and install extra things things like MySQL, PHP, Apache, Java etc</p>

<p>Here are some notes which helped me out when configuring some of these development tools.</p>

<p>This assumes you've already installed Apache and MySQL, for notes on installing these I <a href="http://ubuntuexperiment.wordpress.com/2008/11/10/installing-apache-php-mysql/">found this article</a> to be a great resource.</p>

<p>If you get this message when you restart Apache, "<em>Could not reliably determine the serverâ€™s fully qualified domain name, using 127.0.1.1 for ServerName</em>", edit /etc/apache2/conf.d/fqdn and add "ServerName localhost":</p>

<p><code>
sudo nano /etc/apache2/conf.d/fqdn
</code></p>

<p><strong>Load the mod_rewrite module for Apache</strong></p>

<p><code>
sudo a2enmod rewrite
</code></p>

<p><strong>Enable your Apache vhosts</strong></p>

<p>I already had all my vhosts defined in separate <em>.conf</em> files on my windows box, so I copied them all into /etc/apache2/sites-available and setup symbolic links from my /etc/apache2/sites-enabled:</p>

<p><code>
sudo ln -s /etc/apache2/sites-available/mysite.conf /etc/apache2/sites-enabled/mysite.conf
</code></p>

<p><strong>Download and install PHP</strong></p>

<p><code>
sudo apt-get install php5 libapache2-mod-php5
</code></p>

<p><strong>PHP connector to MySQL</strong></p>

<p><code>
sudo apt-get install libapache2-mod-auth-mysql php5-mysql
</code></p>

<p><strong>Install MySQL Administrator</strong></p>

<p><code>
sudo apt-get install mysql-admin
</code></p>

<p><strong>Install subversion</strong></p>

<p><code>
sudo apt-get install subversion
</code></p>

<p>I am also using <a href="http://www.poweredbypulse.com/">Pulse</a> to manage my <a href="http://www.eclipse.org/">eclipse</a> development environment so I needed Java which I got from the Synaptic Package Manager (<em>sun-java6-bin</em>). Pulse is super cool, I used the standard cfeclipse profile with the addition of the PHP PDT (for developing in PHP).</p>
]]></content>
  </entry>
  
</feed>
