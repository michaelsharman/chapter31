
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>chapter31 &raquo;</title>
	<meta name="author" content="Michael Sharman">

	
	<meta name="description" content="I went looking for a quick and easy way to style JSON content for display in the browser and quickly came across this answer at stack overflow with &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="chapter31 &raquo;" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
</head>

<body>
	<header id="header" class="inner"><h1><a href="/">chapter31 &raquo;</a></h1>
<nav id="main-nav"><ul class="main-navigation">
  <li><a href="http://michaelsharman.com/">about</a></li>
  <li><a href="https://github.com/michaelsharman/">projects</a></li>
  <li><a href="/shell-commands">shell</a></li>
  <li><a href="http://tools.chapter31.com/">tools</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul class="main-navigation">
  <li><a href="http://michaelsharman.com/">about</a></li>
  <li><a href="https://github.com/michaelsharman/">projects</a></li>
  <li><a href="/shell-commands">shell</a></li>
  <li><a href="http://tools.chapter31.com/">tools</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="http://google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:chapter31.com">
			</form>
		</div>
	</div>
</nav>
<nav id="sub-nav" class="alignright">
	<div class="social">
		
		
		
		<a class="twitter" href="http://twitter.com/michaelsharman" title="Twitter">Twitter</a>
		
		
		<a class="github" href="https://github.com/michaelsharman" title="GitHub">GitHub</a>
		
    
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	</div>
	<form class="search" action="http://google.com/search" method="get">
		<input class="alignright" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:chapter31.com">
	</form>
</nav>

</header>
	
		

	
	<div id="content" class="inner">


    <article class="post">
	<h2 class="title">
		
		<a href="/2013/12/16/simple-json-prettify/">
		
			Simple JSON Prettify</a>
	</h2>
	<div class="entry-content">
		<p>I went looking for a quick and easy way to style JSON content for display in the browser and quickly came across this <a href="http://stackoverflow.com/questions/4810841/json-pretty-print-using-javascript/7220510#7220510">answer at stack overflow</a> with a <a href="http://jsfiddle.net/unLSJ/">corresponding jsfiddle entry</a>.</p>

<p>However the problem is that this is kinda broken, the output isn&#8217;t valid JSON because the keys aren&#8217;t quoted. It&#8217;s just outputting a JavaScript object intead. A quick fix to the JavaScript gave me what I needed, I couldn&#8217;t post on SO as I don&#8217;t have the reputation (yeah that&#8217;s annoying) so I&#8217;m posting here for reference and I <a href="http://jsfiddle.net/michaelsharman/HLzxw/">forked the original JSFiddle</a>.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">library</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">library</span> <span class="o">=</span> <span class="p">{};</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nx">library</span><span class="p">.</span><span class="nx">json</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>   <span class="nx">replacer</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">match</span><span class="p">,</span> <span class="nx">pIndent</span><span class="p">,</span> <span class="nx">pKey</span><span class="p">,</span> <span class="nx">pVal</span><span class="p">,</span> <span class="nx">pEnd</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="kd">var</span> <span class="nx">key</span> <span class="o">=</span> <span class="s1">&#39;&lt;span class=json-key&gt;&#39;</span><span class="p">;</span>
</span><span class='line'>        <span class="kd">var</span> <span class="nx">val</span> <span class="o">=</span> <span class="s1">&#39;&lt;span class=json-value&gt;&#39;</span><span class="p">;</span>
</span><span class='line'>        <span class="kd">var</span> <span class="nx">str</span> <span class="o">=</span> <span class="s1">&#39;&lt;span class=json-string&gt;&#39;</span><span class="p">;</span>
</span><span class='line'>        <span class="kd">var</span> <span class="nx">r</span> <span class="o">=</span> <span class="nx">pIndent</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
</span><span class='line'>        <span class="k">if</span> <span class="p">(</span><span class="nx">pKey</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>            <span class="nx">r</span> <span class="o">=</span> <span class="nx">r</span> <span class="o">+</span> <span class="nx">key</span> <span class="o">+</span> <span class="nx">pKey</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/[: ]/g</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;&lt;/span&gt;: &#39;</span><span class="p">;</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>        <span class="k">if</span> <span class="p">(</span><span class="nx">pVal</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>            <span class="nx">r</span> <span class="o">=</span> <span class="nx">r</span> <span class="o">+</span> <span class="p">(</span><span class="nx">pVal</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;&quot;&#39;</span> <span class="o">?</span> <span class="nx">str</span> <span class="o">:</span> <span class="nx">val</span><span class="p">)</span> <span class="o">+</span> <span class="nx">pVal</span> <span class="o">+</span> <span class="s1">&#39;&lt;/span&gt;&#39;</span><span class="p">;</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>        <span class="k">return</span> <span class="nx">r</span> <span class="o">+</span> <span class="p">(</span><span class="nx">pEnd</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">);</span>
</span><span class='line'>    <span class="p">},</span>
</span><span class='line'>    <span class="nx">prettyPrint</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="kd">var</span> <span class="nx">jsonLine</span> <span class="o">=</span> <span class="sr">/^( *)(&quot;[\w]+&quot;: )?(&quot;[^&quot;]*&quot;|[\w.+-]*)?([,[{])?$/mg</span><span class="p">;</span>
</span><span class='line'>        <span class="k">return</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</span><span class='line'>            <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&amp;/g</span><span class="p">,</span> <span class="s1">&#39;&amp;amp;&#39;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\\&quot;/g</span><span class="p">,</span> <span class="s1">&#39;&amp;quot;&#39;</span><span class="p">)</span>
</span><span class='line'>            <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&lt;/g</span><span class="p">,</span> <span class="s1">&#39;&amp;lt;&#39;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&gt;/g</span><span class="p">,</span> <span class="s1">&#39;&amp;gt;&#39;</span><span class="p">)</span>
</span><span class='line'>            <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">jsonLine</span><span class="p">,</span> <span class="nx">library</span><span class="p">.</span><span class="nx">json</span><span class="p">.</span><span class="nx">replacer</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">};</span>
</span></code></pre></td></tr></table></div></figure>


<p>And the CSS that goes with it:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nt">pre</span> <span class="p">{</span>
</span><span class='line'>   <span class="k">background-color</span><span class="o">:</span> <span class="nb">ghostwhite</span><span class="p">;</span>
</span><span class='line'>   <span class="k">border</span><span class="o">:</span> <span class="m">1px</span> <span class="k">solid</span> <span class="nb">silver</span><span class="p">;</span>
</span><span class='line'>   <span class="k">padding</span><span class="o">:</span> <span class="m">10px</span> <span class="m">20px</span><span class="p">;</span>
</span><span class='line'>   <span class="k">margin</span><span class="o">:</span> <span class="m">20px</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nc">.json-key</span> <span class="p">{</span>
</span><span class='line'>   <span class="k">color</span><span class="o">:</span> <span class="nb">brown</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nc">.json-value</span> <span class="p">{</span>
</span><span class='line'>   <span class="k">color</span><span class="o">:</span> <span class="nb">navy</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nc">.json-string</span> <span class="p">{</span>
</span><span class='line'>   <span class="k">color</span><span class="o">:</span> <span class="nb">olive</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>The end result</h2>

<p>The original:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="p">[</span>
</span><span class='line'>   <span class="p">{</span>
</span><span class='line'>      <span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;Earth&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">order</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">stats</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>         <span class="nx">life</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span><span class='line'>         <span class="nx">mass</span><span class="o">:</span> <span class="mf">5.973600000000001</span><span class="nx">e</span><span class="o">+</span><span class="mi">24</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>   <span class="p">},</span>
</span><span class='line'>   <span class="p">{</span>
</span><span class='line'>      <span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;Saturn&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">order</span><span class="o">:</span> <span class="mi">6</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">stats</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>         <span class="nx">life</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
</span><span class='line'>         <span class="nx">mass</span><span class="o">:</span> <span class="mf">5.6846</span><span class="nx">e</span><span class="o">+</span><span class="mi">26</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>   <span class="p">}</span>
</span><span class='line'><span class="p">]</span>
</span></code></pre></td></tr></table></div></figure>


<p>The result after a minor change:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="p">[</span>
</span><span class='line'>   <span class="p">{</span>
</span><span class='line'>      <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Earth&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s2">&quot;order&quot;</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span>
</span><span class='line'>      <span class="s2">&quot;stats&quot;</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>         <span class="s2">&quot;life&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span><span class='line'>         <span class="s2">&quot;mass&quot;</span><span class="o">:</span> <span class="mf">5.973600000000001</span><span class="nx">e</span><span class="o">+</span><span class="mi">24</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>   <span class="p">},</span>
</span><span class='line'>   <span class="p">{</span>
</span><span class='line'>      <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Saturn&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s2">&quot;order&quot;</span><span class="o">:</span> <span class="mi">6</span><span class="p">,</span>
</span><span class='line'>      <span class="s2">&quot;stats&quot;</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>         <span class="s2">&quot;life&quot;</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
</span><span class='line'>         <span class="s2">&quot;mass&quot;</span><span class="o">:</span> <span class="mf">5.6846</span><span class="nx">e</span><span class="o">+</span><span class="mi">26</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>   <span class="p">}</span>
</span><span class='line'><span class="p">]</span>
</span></code></pre></td></tr></table></div></figure>


		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-12-16T14:24:00+11:00" pubdate data-updated="true">Dec 16<span>th</span>, 2013</time></div>
	<div class="tags">


	<a class='category' href='/categories/javascript/'>javascript</a>


</div>
	
		<div class="comments"><a href="/2013/12/16/simple-json-prettify//index.html#disqus_thread">Comments</a></div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/2013/06/22/careful-using-php-array-merge/">
		
			Careful Using PHP Array_merge</a>
	</h2>
	<div class="entry-content">
		<p>Using <code>array_merge</code> bit me today when I merged an array (which happened to be empty) with a numerically indexed array.</p>

<p>Because the array I was merging was empty, I expected my other (numerically indexed) array to remain untouched. However that wasn&#8217;t the case, <a href="http://php.net/manual/en/function.array-merge.php">from the docs</a>:</p>

<pre><code>Values in the input array with numeric keys will be renumbered with incrementing
keys starting from zero in the result array.
</code></pre>

<p>This meant that the following array keys went from being their <em>constant</em> numeric values, to 0, 1, 2, 3:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="x">$pdoOptions = [</span>
</span><span class='line'><span class="x">    PDO::ATTR_PERSISTENT         =&gt; false,</span>
</span><span class='line'><span class="x">    PDO::ATTR_ERRMODE            =&gt; PDO::ERRMODE_WARNING,</span>
</span><span class='line'><span class="x">    PDO::MYSQL_ATTR_INIT_COMMAND =&gt; &#39;SET NAMES utf8&#39;,</span>
</span><span class='line'><span class="x">    PDO::ATTR_EMULATE_PREPARES   =&gt; false</span>
</span><span class='line'><span class="x">];</span>
</span></code></pre></td></tr></table></div></figure>


<p>I really dislike this behaviour, but it is what it is so be warned. Instead I just looped over my merging array and set the keys manually:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="x">if (count($myArr)) {</span>
</span><span class='line'><span class="x">    foreach ($myArr as $key =&gt; $value) {</span>
</span><span class='line'><span class="x">        $otherArr[$key] = $value;</span>
</span><span class='line'><span class="x">    }</span>
</span><span class='line'><span class="x">}</span>
</span></code></pre></td></tr></table></div></figure>


		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-06-22T23:11:00+10:00" pubdate data-updated="true">Jun 22<span>nd</span>, 2013</time></div>
	<div class="tags">


	<a class='category' href='/categories/php/'>php</a>


</div>
	
		<div class="comments"><a href="/2013/06/22/careful-using-php-array-merge//index.html#disqus_thread">Comments</a></div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/2013/06/21/php-script-name-returning-empty-string/">
		
			PHP [&#8216;SCRIPT_NAME&#8217;] Returning Empty String</a>
	</h2>
	<div class="entry-content">
		<p>I was working with <a href="http://slimframework.com/">Slim</a> (v2.2.x) the other day and saw that a PHP warning was being thrown in one of the interal Slim files:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>Warning: strpos<span class="o">()</span>: Empty needle in /vendor/slim/slim/Slim/Environment.php on line 143
</span></code></pre></td></tr></table></div></figure>


<p>The code throwing the warning was the following <em>if</em> statement:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="x">if (strpos($_SERVER[&#39;REQUEST_URI&#39;], $_SERVER[&#39;SCRIPT_NAME&#39;]) === 0) {</span>
</span></code></pre></td></tr></table></div></figure>


<p>The actual issue was that <code>$_SERVER['SCRIPT_NAME']</code> was an empty string, so <em>strpos</em> was complaining as that is invalid syntax. Strangely, this was all working fine when we had the apache rewrite rules in an .htaccess file:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>RewriteCond %<span class="o">{</span>DOCUMENT_ROOT<span class="o">}</span>%<span class="o">{</span>REQUEST_URI<span class="o">}</span> !-f
</span><span class='line'>RewriteRule ^<span class="o">(</span>.*<span class="o">)</span><span class="nv">$ </span>/index.php/<span class="nv">$1</span> <span class="o">[</span>QSA,L<span class="o">]</span>
</span></code></pre></td></tr></table></div></figure>


<p>However once we moved the rules to the <em>VirtualHost</em> we got the warning. Some <a href="https://issues.apache.org/bugzilla/show_bug.cgi?id=40102">googling</a> <a href="https://bugs.php.net/bug.php?id=38141">told me</a> that this is a 6 year old problem with either apache, php, mod_php or the boogey man&#8230;depending on who you believe. It seems that various rewrite settings working differently if you have them in .htaccess vs the VirtualHost block.</p>

<p>I considered sending a pull request to Slim to handle the scenario where SCRIPT_NAME is empty:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="x">if (strlen($_SERVER[&#39;SCRIPT_NAME&#39;]) &amp;&amp; strpos($_SERVER[&#39;REQUEST_URI&#39;], $_SERVER[&#39;SCRIPT_NAME&#39;]) === 0) {</span>
</span></code></pre></td></tr></table></div></figure>


<p>But instead we added the PT (passthrough) rewrite flag. This works fine for what we&#8217;re doing and <code>$_SERVER['SCRIPT_NAME']</code> now returns <em>/index.php</em> as it should.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>RewriteCond %<span class="o">{</span>DOCUMENT_ROOT<span class="o">}</span>%<span class="o">{</span>REQUEST_URI<span class="o">}</span> !-f
</span><span class='line'>RewriteRule ^<span class="o">(</span>.*<span class="o">)</span><span class="nv">$ </span>/index.php/<span class="nv">$1</span> <span class="o">[</span>QSA,PT,L<span class="o">]</span>
</span></code></pre></td></tr></table></div></figure>


		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-06-21T11:58:00+10:00" pubdate data-updated="true">Jun 21<span>st</span>, 2013</time></div>
	<div class="tags">


	<a class='category' href='/categories/apache/'>apache</a>, <a class='category' href='/categories/php/'>php</a>


</div>
	
		<div class="comments"><a href="/2013/06/21/php-script-name-returning-empty-string//index.html#disqus_thread">Comments</a></div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/2013/06/19/problem-dumping-mysql-database-unknown-system-variable-gtid-mode/">
		
			Problem Dumping MySQL Database - Unknown System Variable &#8216;GTID_MODE&#8217;</a>
	</h2>
	<div class="entry-content">
		<p>I was trying to dump and restore a MySQL database today, but received the following error when I tried to dump:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>mysqldump: Couldn<span class="s1">&#39;t execute &#39;</span>SELECT @@GTID_MODE<span class="s1">&#39;: Unknown system variable &#39;</span>GTID_MODE<span class="err">&#39;</span> <span class="o">(</span>1193<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>The MySQL version of the database I was trying to dump was 5.5.28 and the server I was trying to restore into was 5.6.10.</p>

<p>A quick google told me that the error was likely due to this mismatch in versions. From the <a href="http://blog.teamextension.com/mysqldump-couldnt-execute-select-gtid_mode-unknown-system-variable-gtid_mode-1193-1246">teamextension blog</a>:</p>

<pre><code>This error is in part due to the introduction of Global Transaction Identifiers (GTIDs) in MySQL 5.6.
GTIDs make it simple to track and compare replication across a master-slave topology.
</code></pre>

<p>The solution is adding the following option to your dump statement:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>--set-gtid-purged<span class="o">=</span>OFF
</span></code></pre></td></tr></table></div></figure>


<p>In all, my statement was:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>mysqldump -h<span class="o">[</span>host<span class="o">]</span> -u<span class="o">[</span>user<span class="o">]</span> --single-transaction --routines --triggers --set-gtid-purged<span class="o">=</span>OFF --compatible<span class="o">=</span>ansi <span class="o">[</span>database<span class="o">]</span> | mysql --h<span class="o">[</span>host<span class="o">]</span> -u<span class="o">[</span>user<span class="o">]</span>
</span></code></pre></td></tr></table></div></figure>


		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-06-19T12:01:00+10:00" pubdate data-updated="true">Jun 19<span>th</span>, 2013</time></div>
	<div class="tags">


	<a class='category' href='/categories/mysql/'>mysql</a>


</div>
	
		<div class="comments"><a href="/2013/06/19/problem-dumping-mysql-database-unknown-system-variable-gtid-mode//index.html#disqus_thread">Comments</a></div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/2013/06/13/ini-syntax-highlighting-in-sublime-text/">
		
			INI Syntax Highlighting in Sublime Text</a>
	</h2>
	<div class="entry-content">
		<p>I went searching for a package to provide syntax highlighting for INI files in Sublime Text. The reason? INI files are ugly ;(</p>

<p> <img src="/images/ini-before.png" alt="INI no syntax highlighting" /></p>

<p>I found one that works well called <a href="https://github.com/clintberry/sublime-text-2-ini">sublime-text-2-ini</a>.</p>

<p>Installation isn&#8217;t done via the package manager, but it&#8217;s still simple. Open a terminal and navigate to your Sublime <em>Packages</em> folder, then clone in the package from github.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nb">cd</span> ~/Library/Application<span class="se">\ </span>Support/Sublime<span class="se">\ </span>Text<span class="se">\ </span>2/Packages/
</span><span class='line'>git clone git@github.com:clintberry/sublime-text-2-ini.git ./INI
</span></code></pre></td></tr></table></div></figure>


<p>That&#8217;s it! Here&#8217;s what it looks like after installation:</p>

<p><img src="/images/ini-after.png" alt="INI with syntax highlighting" /></p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-06-13T16:37:00+10:00" pubdate data-updated="true">Jun 13<span>th</span>, 2013</time></div>
	<div class="tags">


	<a class='category' href='/categories/sublime/'>sublime</a>


</div>
	
		<div class="comments"><a href="/2013/06/13/ini-syntax-highlighting-in-sublime-text//index.html#disqus_thread">Comments</a></div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/2013/06/08/error-writing-git-commit-messages-with-vi/">
		
			Error Writing Git Commit Messages With Vi</a>
	</h2>
	<div class="entry-content">
		<p>I typically write my git commit messages in the terminal, but today I wanted to write a multi-line comment so I left out the <em>-m</em> argument to <em>git commit</em> so it would open up my default editor, which is <em>vi</em>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>git commit
</span></code></pre></td></tr></table></div></figure>


<p>I wrote my comment, saved and exit but got an error:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>git commit
</span><span class='line'>error: There was a problem with the editor <span class="s1">&#39;vi&#39;</span>.
</span><span class='line'>Please supply the message using either -m or -F option.
</span></code></pre></td></tr></table></div></figure>


<p>A quick google and I <a href="http://tooky.co.uk/2010/04/08/there-was-a-problem-with-the-editor-vi-git-on-mac-os-x.html">found the solution</a>, I thought I&#8217;d repost it here for myself as well as others.</p>

<p>There are a couple of solutions offered in that article, for me I just set the full path to <em>vi</em> with a <em>-f</em> flag in my .gitconfig:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="o">[</span>core<span class="o">]</span>
</span><span class='line'>  <span class="nv">editor</span> <span class="o">=</span> /usr/bin/vi -f
</span></code></pre></td></tr></table></div></figure>


<p>As an FYI&#8230;if you want to see the values in git config, you can run this command in your project and it will list your global and project configuration:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>git config -l
</span></code></pre></td></tr></table></div></figure>


		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-06-08T23:24:00+10:00" pubdate data-updated="true">Jun 8<span>th</span>, 2013</time></div>
	<div class="tags">


	<a class='category' href='/categories/git/'>git</a>


</div>
	
		<div class="comments"><a href="/2013/06/08/error-writing-git-commit-messages-with-vi//index.html#disqus_thread">Comments</a></div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/2013/06/03/php-composer-error-cannot-redeclare-class/">
		
			PHP Composer Error - Cannot Redeclare Class</a>
	</h2>
	<div class="entry-content">
		<p>I rebuilt PHP last night to include APC and all of a sudden composer stopped working in my project. Whenever I ran a simple update, install or dump-autoload I&#8217;d get:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>composer update
</span><span class='line'>PHP Fatal error:  include<span class="o">()</span>: Cannot redeclare class symfony<span class="se">\c</span>omponent<span class="se">\p</span>rocess<span class="se">\p</span>rocess in phar:///usr/local/bin/composer/vendor/composer/ClassLoader.php on line 183
</span><span class='line'>
</span><span class='line'>Fatal error: include<span class="o">()</span>: Cannot redeclare class symfony<span class="se">\c</span>omponent<span class="se">\p</span>rocess<span class="se">\p</span>rocess in phar:///usr/local/bin/composer/vendor/composer/ClassLoader.php on line 183
</span></code></pre></td></tr></table></div></figure>


<p>A quick google told me <a href="https://github.com/composer/composer/issues/1432">others</a> also had the <a href="https://github.com/composer/composer/issues/264">same</a> issue.</p>

<p>It seems that there&#8217;s a bug between composer.phar and APC. From one of the composer issues:</p>

<pre><code>Quite weird, but then again the php docs seem to acknowledge that APC should not really be
enabled on the CLI. It seems to be a phar+apc bug, see https://bugs.php.net/bug.php?id=59398
https://bugs.php.net/bug.php?id=59829 https://bugs.php.net/bug.php?id=59907 as well.
</code></pre>

<p>There are a couple of things you can do to fix this, but they all involve turning off APC for php-cli. First, run <em>composer diag</em> to see whether any more information can be gleaned:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>composer diag
</span><span class='line'>Checking platform settings: FAIL
</span><span class='line'>
</span><span class='line'>The apc.enable_cli setting is incorrect.
</span><span class='line'>Add the following to the end of your <span class="sb">`</span>php.ini<span class="sb">`</span>:
</span><span class='line'>    apc.enable_cli <span class="o">=</span> Off
</span><span class='line'>
</span><span class='line'>The php.ini used by your <span class="nb">command</span>-line PHP is: /opt/php-5.4.15/lib/php.ini
</span><span class='line'>If you can not modify the ini file, you can also run <span class="sb">`</span>php -d <span class="nv">option</span><span class="o">=</span>value<span class="sb">`</span> to modify ini values on the fly. You can use -d multiple times.
</span></code></pre></td></tr></table></div></figure>


<p>If you get that message, you know you have the same problem as I did :) You can also check the <a href="http://getcomposer.org/doc/articles/troubleshooting.md">troubleshooting</a> page on getcomposer.org</p>

<p>You can try running the <em>self-update</em> (for me I don&#8217;t reference the .phar file because I use the unix install convention).</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>php /usr/local/bin/composer self-update
</span></code></pre></td></tr></table></div></figure>


<p>Those are really just everyday things to try if you have composer issues, to really fix this you need to disable APC for php-cli. You should set this option to <em>0</em> in your php.ini</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>apc.enable_cli<span class="o">=</span>0
</span></code></pre></td></tr></table></div></figure>


<p>If you don&#8217;t have access to php.ini, you can disable APC on the CLI per command:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>php -d apc.enable_cli<span class="o">=</span>0 /usr/local/bin/composer install
</span></code></pre></td></tr></table></div></figure>


<p>Note: if you have composer.phar in your project you could just do:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>php -d apc.enable_cli<span class="o">=</span>0 composer.phar install
</span></code></pre></td></tr></table></div></figure>


		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-06-03T09:16:00+10:00" pubdate data-updated="true">Jun 3<span>rd</span>, 2013</time></div>
	<div class="tags">


	<a class='category' href='/categories/php/'>php</a>


</div>
	
		<div class="comments"><a href="/2013/06/03/php-composer-error-cannot-redeclare-class//index.html#disqus_thread">Comments</a></div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/2013/06/02/installing-apc-in-php-5-dot-4-x-on-mac-osx/">
		
			Installing APC in PHP 5.4.x on Mac OSX</a>
	</h2>
	<div class="entry-content">
		<p>I recently <a href="/2013/05/06/installing-php-5-dot-4-plus-from-source-on-mac-mountain-lion/">installed PHP 5.4 from source</a> but needed to add <abbr title="Alternative PHP Cache">APC</abbr>.</p>

<p>Most people can install this using <abbr title="PHP Extension Community Library">PECL</abbr>, but I got an error doing this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>pecl install apc
</span><span class='line'>
</span><span class='line'>Warning: lstat<span class="o">()</span>: Lstat failed <span class="k">for</span> /private/tmp/pear/cache/497e483d585c1e3f341260e73a8c6e85rest.cacheid in PEAR/REST.php on line 276
</span><span class='line'>
</span><span class='line'>Warning: lstat<span class="o">()</span>: Lstat failed <span class="k">for</span> /private/tmp/pear/cache/497e483d585c1e3f341260e73a8c6e85rest.cacheid in /opt/php-5.4.15/lib/php/PEAR/REST.php on line 276
</span><span class='line'>No releases available <span class="k">for </span>package <span class="s2">&quot;pecl.php.net/apc&quot;</span>
</span><span class='line'>install failed
</span></code></pre></td></tr></table></div></figure>


<p>So instead I downloaded the APC source <a href="http://pecl.php.net/package/APC">from the PECL website</a> and ran the following:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nb">cd </span>APC-3.1.13/
</span><span class='line'>phpize
</span><span class='line'>./configure --with-php-config<span class="o">=</span>/opt/php/bin/php-config --enable-apc
</span><span class='line'>make
</span><span class='line'><span class="nb">export </span><span class="nv">TEST_PHP_ARGS</span><span class="o">=</span><span class="s1">&#39;-n&#39;</span>
</span><span class='line'>sudo make install
</span></code></pre></td></tr></table></div></figure>


<p>Note that my <em>php-config</em> setting is a little different because I installed my PHP into <em>/opt</em> instead of the default <em>/usr/bin</em></p>

<p>The output of <em>make install</em> is:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo make install
</span><span class='line'>Installing shared extensions:     /opt/php-5.4.15/lib/php/extensions/no-debug-non-zts-20100525/
</span><span class='line'>Installing header files:          /opt/php-5.4.15/include/php/
</span></code></pre></td></tr></table></div></figure>


<p>Copy the <em>Installing shared extensions</em> path into your php.ini file.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="o">[</span>apc<span class="o">]</span>
</span><span class='line'><span class="nv">extension</span><span class="o">=</span>/opt/php-5.4.15/lib/php/extensions/no-debug-non-zts-20100525/apc.so
</span><span class='line'>apc.enabled<span class="o">=</span>1
</span><span class='line'>apc.shm_size<span class="o">=</span>128M
</span><span class='line'>apc.ttl<span class="o">=</span>7200
</span><span class='line'>apc.user_ttl<span class="o">=</span>7200
</span><span class='line'>apc.enable_cli<span class="o">=</span>1
</span></code></pre></td></tr></table></div></figure>


<p>You can double check the installation process by either reviewing phpinfo(); in a browser or using CLI:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>php -i | grep apc
</span></code></pre></td></tr></table></div></figure>


<p>If you see something like the following (from php -i)&#8230;all good:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>apc.cache_by_default <span class="o">=</span>&gt; <span class="nv">On</span> <span class="o">=</span>&gt; On
</span><span class='line'>apc.canonicalize <span class="o">=</span>&gt; <span class="nv">On</span> <span class="o">=</span>&gt; On
</span><span class='line'>apc.coredump_unmap <span class="o">=</span>&gt; <span class="nv">Off</span> <span class="o">=</span>&gt; Off
</span><span class='line'>apc.enable_cli <span class="o">=</span>&gt; <span class="nv">On</span> <span class="o">=</span>&gt; On
</span><span class='line'>apc.enabled <span class="o">=</span>&gt; <span class="nv">On</span> <span class="o">=</span>&gt; On
</span><span class='line'>apc.file_md5 <span class="o">=</span>&gt; <span class="nv">Off</span> <span class="o">=</span>&gt; Off
</span><span class='line'>apc.file_update_protection <span class="o">=</span>&gt; <span class="nv">2</span> <span class="o">=</span>&gt; 2
</span><span class='line'>apc.filters <span class="o">=</span>&gt; no <span class="nv">value</span> <span class="o">=</span>&gt; no value
</span><span class='line'>apc.gc_ttl <span class="o">=</span>&gt; <span class="nv">3600</span> <span class="o">=</span>&gt; 3600
</span><span class='line'>apc.include_once_override <span class="o">=</span>&gt; <span class="nv">Off</span> <span class="o">=</span>&gt; Off
</span><span class='line'>apc.lazy_classes <span class="o">=</span>&gt; <span class="nv">Off</span> <span class="o">=</span>&gt; Off
</span><span class='line'>apc.lazy_functions <span class="o">=</span>&gt; <span class="nv">Off</span> <span class="o">=</span>&gt; Off
</span><span class='line'>apc.max_file_size <span class="o">=</span>&gt; <span class="nv">1M</span> <span class="o">=</span>&gt; 1M
</span><span class='line'>apc.mmap_file_mask <span class="o">=</span>&gt; no <span class="nv">value</span> <span class="o">=</span>&gt; no value
</span><span class='line'>apc.num_files_hint <span class="o">=</span>&gt; <span class="nv">1000</span> <span class="o">=</span>&gt; 1000
</span><span class='line'>apc.preload_path <span class="o">=</span>&gt; no <span class="nv">value</span> <span class="o">=</span>&gt; no value
</span><span class='line'>apc.report_autofilter <span class="o">=</span>&gt; <span class="nv">Off</span> <span class="o">=</span>&gt; Off
</span><span class='line'>apc.rfc1867 <span class="o">=</span>&gt; <span class="nv">Off</span> <span class="o">=</span>&gt; Off
</span><span class='line'>apc.rfc1867_freq <span class="o">=</span>&gt; <span class="nv">0</span> <span class="o">=</span>&gt; 0
</span><span class='line'>apc.rfc1867_name <span class="o">=</span>&gt; <span class="nv">APC_UPLOAD_PROGRESS</span> <span class="o">=</span>&gt; APC_UPLOAD_PROGRESS
</span><span class='line'>apc.rfc1867_prefix <span class="o">=</span>&gt; <span class="nv">upload_</span> <span class="o">=</span>&gt; upload_
</span><span class='line'>apc.rfc1867_ttl <span class="o">=</span>&gt; <span class="nv">3600</span> <span class="o">=</span>&gt; 3600
</span><span class='line'>apc.serializer <span class="o">=</span>&gt; <span class="nv">default</span> <span class="o">=</span>&gt; default
</span><span class='line'>apc.shm_segments <span class="o">=</span>&gt; <span class="nv">1</span> <span class="o">=</span>&gt; 1
</span><span class='line'>apc.shm_size <span class="o">=</span>&gt; <span class="nv">128M</span> <span class="o">=</span>&gt; 128M
</span><span class='line'>apc.shm_strings_buffer <span class="o">=</span>&gt; <span class="nv">4M</span> <span class="o">=</span>&gt; 4M
</span><span class='line'>apc.slam_defense <span class="o">=</span>&gt; <span class="nv">On</span> <span class="o">=</span>&gt; On
</span><span class='line'>apc.stat <span class="o">=</span>&gt; <span class="nv">On</span> <span class="o">=</span>&gt; On
</span><span class='line'>apc.stat_ctime <span class="o">=</span>&gt; <span class="nv">Off</span> <span class="o">=</span>&gt; Off
</span><span class='line'>apc.ttl <span class="o">=</span>&gt; <span class="nv">7200</span> <span class="o">=</span>&gt; 7200
</span><span class='line'>apc.use_request_time <span class="o">=</span>&gt; <span class="nv">On</span> <span class="o">=</span>&gt; On
</span><span class='line'>apc.user_entries_hint <span class="o">=</span>&gt; <span class="nv">4096</span> <span class="o">=</span>&gt; 4096
</span><span class='line'>apc.user_ttl <span class="o">=</span>&gt; <span class="nv">7200</span> <span class="o">=</span>&gt; 7200
</span><span class='line'>apc.write_lock <span class="o">=</span>&gt; <span class="nv">On</span> <span class="o">=</span>&gt; On
</span></code></pre></td></tr></table></div></figure>


		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-06-02T16:33:00+10:00" pubdate data-updated="true">Jun 2<span>nd</span>, 2013</time></div>
	<div class="tags">


	<a class='category' href='/categories/php/'>php</a>


</div>
	
		<div class="comments"><a href="/2013/06/02/installing-apc-in-php-5-dot-4-x-on-mac-osx//index.html#disqus_thread">Comments</a></div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/2013/06/01/base16-colour-scheme-for-hackers/">
		
			Base16 - Colour Scheme for Hackers</a>
	</h2>
	<div class="entry-content">
		<p>I came across a great set of colour schemes called <a href="http://chriskempson.github.io/base16/">base16</a>. From the website:</p>

<pre><code>Base16 provides carefully chosen syntax highlighting and a default set of 
sixteen colors suitable for a wide range of applications.

Base16 is both a color scheme and a template.
</code></pre>

<p>There are repos for the following tools:</p>

<ul>
<li>Base 16 Builder</li>
<li>Vim</li>
<li>Shell</li>
<li>iTerm2</li>
<li>TextMate</li>
<li>OSX Color Palette</li>
<li>Xresources</li>
<li>Mou</li>
<li>XFCE4 Terminal</li>
<li>Gimp Palette</li>
<li>Gnome Terminal</li>
<li>Emacs</li>
<li>Geany</li>
</ul>


<p> There&#8217;s even <a href="https://github.com/chriskempson/base16-builder">a builder</a> so you can roll your own theme!</p>

<p> I&#8217;m currently using Monaki Dark 256 for iTerm2. The best bet is to git clone the <a href="https://github.com/chriskempson/base16-iterm2">iTerms 2 colour schemes</a> to somewhere on your machine that is persistent. Perhaps <em>~/Documents/iterm2_schemes/base16</em>.</p>

<p> Then you can experiment with the colours you like by going to preferences->profiles->colors then import your schemes using the <em>load presets</em> dropdown (pointing to wherever you cloned the base16 repo).</p>

<p> <img src="/images/monaki-dark.png" alt="Monaki Dark 256" /></p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-06-01T17:40:00+10:00" pubdate data-updated="true">Jun 1<span>st</span>, 2013</time></div>
	<div class="tags">


	<a class='category' href='/categories/shell/'>shell</a>


</div>
	
		<div class="comments"><a href="/2013/06/01/base16-colour-scheme-for-hackers//index.html#disqus_thread">Comments</a></div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/2013/05/29/installing-xdebug-on-mac-mountain-lion-10-dot-8-3/">
		
			Installing Xdebug on Mac Mountain Lion (10.8.3)</a>
	</h2>
	<div class="entry-content">
		<p>Even though I&#8217;m running Mountain Lion (10.8.3) which comes with Xdebug I couldn&#8217;t get the PHP (5.4.14) local web server to register that Xdebug was actually installed and enabled.</p>

<p>My php.ini had the already installed Xdebug extension enabled:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">zend_extension</span><span class="o">=</span><span class="s2">&quot;/usr/lib/php/extensions/no-debug-non-zts-20090626/xdebug.so&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>But whenever I inspected <code>phpinfo()</code> there wasn&#8217;t any mention of Xdebug.</p>

<p>Luckily the <a href="http://xdebug.org/wizard.php">website has a wizard</a> where you can paste the output of phpinfo(). From there you get detailed instructions on how to download, configure and make the latest version of Xdebug. It&#8217;s pretty simple.</p>

<p>Essentially the steps are as follows:</p>

<ol>
<li>Download <a href="http://xdebug.org/files/xdebug-2.2.3.tgz">xdebug-2.2.3.tgz</a></li>
<li>Unpack the downloaded file with <code>tar -xvzf xdebug-2.2.3.tgz</code></li>
<li>Run: <code>cd xdebug-2.2.3</code></li>
<li>Run: <code>phpize</code> (Any problems<a href="http://xdebug.org/docs/faq#phpize">see the FAQ</a>)</li>
<li>Run: <code>./configure</code></li>
<li>Run: <code>make</code></li>
<li>Run: <code>sudo mkdir -p /usr/lib/php/extensions/no-debug-non-zts-20100525</code></li>
<li>Run: <code>sudo cp modules/xdebug.so /usr/lib/php/extensions/no-debug-non-zts-20100525</code></li>
<li>Update your /etc/php.ini and uncomment/add the line
<code>zend_extension = /usr/lib/php/extensions/no-debug-non-zts-20100525/xdebug.so</code></li>
<li>Restart the webserver</li>
</ol>


<p>Now if you check the output of phpinfo() you should see Xdebug.</p>

<p>To make sure your debug output is being styled properly, make sure you have <code>html_errors = On</code> in php.ini (it defaults to <em>Off</em>).</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-05-29T06:31:00+10:00" pubdate data-updated="true">May 29<span>th</span>, 2013</time></div>
	<div class="tags">


	<a class='category' href='/categories/php/'>php</a>


</div>
	
		<div class="comments"><a href="/2013/05/29/installing-xdebug-on-mac-mountain-lion-10-dot-8-3//index.html#disqus_thread">Comments</a></div>
	
</div></article>

<nav id="pagenavi">
    
    
        <a href="/page/2/" class="next">Next</a>
    
    <div class="center"><a href="/blog/archives">Blog Archives</a></div>
</nav></div>
	<footer id="footer" class="inner">Copyright &copy; 2013

    Michael Sharman

</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->


<script type="text/javascript">
      var disqus_shortname = 'chapter31';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-306772-2']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>



</body>
</html>
