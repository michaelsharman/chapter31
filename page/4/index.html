
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>chapter31 &raquo;</title>
	<meta name="author" content="Michael Sharman">

	
	<meta name="description" content="We&#8217;re starting to compile a list of internal tools used when developing a FarCry application. I thought it might be simpler to create a small &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="chapter31 &raquo;" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
</head>

<body>
	<header id="header" class="inner"><h1><a href="/">chapter31 &raquo;</a></h1>
<nav id="main-nav"><ul class="main-navigation">
  <li><a href="/about">about</a></li>
  <li><a href="https://github.com/michaelsharman/">projects</a></li>
  <li><a href="/shell-commands">shell</a></li>
  <li><a href="http://tools.chapter31.com/">tools</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul class="main-navigation">
  <li><a href="/about">about</a></li>
  <li><a href="https://github.com/michaelsharman/">projects</a></li>
  <li><a href="/shell-commands">shell</a></li>
  <li><a href="http://tools.chapter31.com/">tools</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="http://google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:chapter31.com">
			</form>
		</div>
	</div>
</nav>
<nav id="sub-nav" class="alignright">
	<div class="social">
		
		
		
		<a class="twitter" href="http://twitter.com/michaelsharman" title="Twitter">Twitter</a>
		
		
		<a class="github" href="https://github.com/michaelsharman" title="GitHub">GitHub</a>
		
    
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	</div>
	<form class="search" action="http://google.com/search" method="get">
		<input class="alignright" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:chapter31.com">
	</form>
</nav>

</header>
	
		

	
	<div id="content" class="inner">


    <article class="post">
	<h2 class="title">
		
		<a href="/2011/08/17/farcry-plugin-webtop-tools/">
		
			FarCry Plugin - Webtop Tools</a>
	</h2>
	<div class="entry-content">
		<p>We&#8217;re starting to compile a list of internal tools used when developing a FarCry application. I thought it might be simpler to create a small FarCry plugin to keep them all in the same place, makes it easier to use across multiple projects.</p>

<p><a href="https://github.com/michaelsharman/lcwebtoptools">The plugin</a> currently contains 2 scripts:</p>

<ul>
<li>FarCry database diff (MySQL only at this stage)</li>
<li>Content Object Meta</li>
</ul>


<p>The database diff looks for case-sensitivity differences between your ColdFusion components and the actual MySQL table names (MySQL only). Historically we&#8217;ve had issues because we are on Linux, this tool has helped quickly iron out any differences in &#8220;case&#8221;.</p>

<p>The Content Object Meta assists in finding information about content of any &#8220;type&#8221; in FarCry, based on the title, objectId or friendly URL. What does this mean? Well any &#8220;content object&#8221; you want information on can be found using this tool. Whether you have an objectId and you don&#8217;t know if it belongs to dmNavigation, dmHTML, dmNews or a custom type. Or you might have part of a friendly URL or content label/title. This tool can help tell you what the content type is, whether it&#8217;s approved, where it sits in the site tree (if relevant) etc.</p>

<p>For example; if I wanted to know everything in FarCry that had a label LIKE &#8216;credential&#8217; (wildcards are automatically added to your search term) I might get results like the following:</p>

<p><img src="/images/uploads/2011/08/contenttitle.png" alt="" /></p>

<p>From that initial resultset, if I clicked on an objectid for dmNavigation:</p>

<p><img src="/images/uploads/2011/08/objectid.png" alt="" /></p>

<p>Or if I clicked on an objectid for dmHTML:</p>

<p><img src="/images/uploads/2011/08/objectid_dmhtml.png" alt="" /></p>

<p>Note that there is a collapsed cfdump that you can expand for further info.</p>

<h2>Requirements</h2>

<p>Railo 3.2+ or ColdFusion 7+
FarCry 6+
MySQL 5+</p>

<h2>Installation</h2>

<p>&#8220;Official&#8221; notes on installing FarCry plugins can be found here: <a href="https://farcry.jira.com/wiki/pages/viewpage.action?pageId=12943398">https://farcry.jira.com/wiki/pages/viewpage.action?pageId=12943398</a></p>

<p>It&#8217;s pretty simple though:</p>

<ul>
<li>add the &#8220;lcwebtoptools&#8221; directory from git into /farcry/plugins/</li>
<li>add &#8220;lcwebtoptools&#8221; to THIS.plugins in farcryConstructor.cfm (in your project webroot)</li>
</ul>


<p>e.g.</p>

<pre><code>&lt;cfset THIS.plugins = "farcrycms,lcwebtoptools"&gt;
</code></pre>

<p>Restart your app, that&#8217;s it. No coapi changes need to be made. To access the current tools, go to the &#8220;Admin&#8221; tab and choose &#8220;Webtop Tools&#8221; from the drop down.</p>

<p>The plugin is <a href="https://github.com/michaelsharman/lcwebtoptools">hosted on github</a>, for a direct download to the zip <a href="https://github.com/michaelsharman/lcwebtoptools/zipball/master">click here</a>.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2011-08-17T10:38:33+10:00" pubdate data-updated="true">Aug 17<span>th</span>, 2011</time></div>
	<div class="tags">


	<a class='category' href='/categories/farcry/'>Farcry</a>


</div>
	
		<div class="comments"><a href="/2011/08/17/farcry-plugin-webtop-tools//page/4/index.html#disqus_thread">Comments</a></div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/2011/08/01/label-vs-title-in-farcry/">
		
			Label vs Title in FarCry</a>
	</h2>
	<div class="entry-content">
		<p>All system content objects (and those custom types which extend &#8220;types&#8221; or &#8220;versions&#8221; etc) in FarCry have the &#8220;label&#8221; and &#8220;title&#8221; properties. Most of the time the value of these are identical, I find myself typically using the &#8220;title&#8221; property in formtools as well as any display methods. The question of course is why have both these if they&#8217;re always exactly the same?</p>

<p>A note on the FarCry forums suggested that this was a handy way split what you might want to use in a display method vs an admin screen or any other scenario etc. Well today I had need to do exactly this, and combined with some of the custom metadata for your <em>type components</em> I&#8217;ve found that this is yet another simple but powerful feature of FarCry core.</p>

<h2>Scenario</h2>

<p>I have a custom type, a &#8220;topic&#8221;. Now these topics have titles but also &#8220;codes&#8221; associated with them. Sometimes I&#8217;ll want to output just the title, but sometimes I&#8217;ll want to output the code + title together. Sure <em>stObj</em> gives me the simple ability to access these singularly, but having the ability to store this composite value in the label field (as well as the single title in the &#8220;title&#8221; field) gives me freedom to display this in places like the object admin screen, generic nav, breadcrumbs etc. Very very nice.</p>

<h2>How</h2>

<p>Ok first you need to enable auto labels for your type:</p>

<pre><code>&lt;cfcomponent extends="farcry.core.packages.types.versions" displayname="ACE Topic" bUseInTree="0" bFriendly="1" fuAlias="acetopic" bObjectBroker="0" bAutoSetLabel="true"&gt;
</code></pre>

<p>Then for each property you&#8217;d like combined for your label, set a <em>bLabel</em> attribute to true.</p>

<pre><code>&lt;cfproperty name="Code" type="string" required="no" default="" ftSeq="1" ftwizardStep="Content" ftValidation="required" ftFieldset="General Details" bLabel="true"&gt;

&lt;cfproperty name="Title" type="string" hint="Title of content item." required="no" default="" ftSeq="2" ftwizardStep="Content" ftFieldset="General Details" ftValidation="required"Â bLabel="true"&gt;
</code></pre>

<p>What this now does (after you edit a content object) is save the &#8220;code + title&#8221; in the label field. Cool :)</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2011-08-01T09:16:01+10:00" pubdate data-updated="true">Aug 1<span>st</span>, 2011</time></div>
	<div class="tags">


	<a class='category' href='/categories/farcry/'>Farcry</a>


</div>
	
		<div class="comments"><a href="/2011/08/01/label-vs-title-in-farcry//page/4/index.html#disqus_thread">Comments</a></div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/2011/07/01/farcry-tip-enable-cfcs-in-your-railo-proxypassmatch/">
		
			FarCry Tip - Enable Cfc&#8217;s in Your Railo ProxyPassMatch</a>
	</h2>
	<div class="entry-content">
		<p>I ran into an issue today while working on a FarCry project, basically when I opened up the &#8220;Related Content&#8221; popup from the WYSIWYG editor it was blank. Nothing. Not the usual tabs for Images, File, Flash etc.</p>

<p><img src="/images/uploads/2011/07/relatedcontent.png" alt="" /></p>

<p>The Railo logs were empty but Apache was throwing a strange error which I hadn&#8217;t seen before: <em>&#8220;Couldn&#8217;t initialize from remote server, JRun server(s) probably down.&#8221;</em>. Funny as I&#8217;m not even using JRun!</p>

<p>Looking at the Chrome console I could see that opening the popup made a request directly to a cfc (/webtop/facade/tinyMCE.cfc?method=ajaxGetTemplateDropdowns) and returned the following error: &#8221;<em>Failed to load resource: the server responded with a status of 500 (Internal Server Error)</em>&#8221;</p>

<p>Eventually <a href="http://www.learnosity.com/techblog/">Mark</a> pointed me in the right direction which was kind of obvious if I&#8217;d actually read the error properly! Our config for Apache -> Railo is for cfm&#8217;s only&#8230;not cfc&#8217;s. I don&#8217;t really like the approach of calling cfc&#8217;s directly at all, which is why it&#8217;s not in our Apache -> Railo proxy. But it wasn&#8217;t a big deal to add it for FarCry projects.</p>

<p>Here is the config we now use, note we now pass requests for cfm and cfc to Railo:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'>    <span class="o">&lt;</span><span class="nx">IfModule</span> <span class="nx">mod_proxy_ajp</span><span class="p">.</span><span class="nx">c</span><span class="o">&gt;</span>
</span><span class='line'>            <span class="o">&lt;</span><span class="nx">Proxy</span> <span class="o">*&gt;</span>
</span><span class='line'>                    <span class="nx">Order</span> <span class="nx">deny</span><span class="p">,</span><span class="nx">allow</span>
</span><span class='line'>                    <span class="nx">Allow</span> <span class="nx">from</span> <span class="nx">all</span>
</span><span class='line'>            <span class="o">&lt;</span><span class="err">/Proxy&gt;</span>
</span><span class='line'>            <span class="nx">ProxyPassMatch</span> <span class="o">^</span><span class="sr">/(.*\.cf[cm])$ ajp:/</span><span class="o">/</span><span class="mf">127.0</span><span class="p">.</span><span class="mf">0.1</span><span class="o">:</span><span class="mi">8009</span><span class="o">/</span><span class="nx">$1</span>
</span><span class='line'>            <span class="nx">ProxyPassReverse</span>  <span class="o">/</span>  <span class="nx">ajp</span><span class="o">:</span><span class="c1">//127.0.0.1:8009/</span>
</span><span class='line'>    <span class="o">&lt;</span><span class="err">/IfModule&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>And of course now the related content popup works :)</p>

<p><img src="/images/uploads/2011/07/relatedcontent2.png" alt="" /></p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2011-07-01T14:04:20+10:00" pubdate data-updated="true">Jul 1<span>st</span>, 2011</time></div>
	<div class="tags">


	<a class='category' href='/categories/farcry/'>Farcry</a>, <a class='category' href='/categories/railo/'>Railo</a>


</div>
	
		<div class="comments"><a href="/2011/07/01/farcry-tip-enable-cfcs-in-your-railo-proxypassmatch//page/4/index.html#disqus_thread">Comments</a></div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/2011/07/01/farcry-grouping-formtool-category-items/">
		
			FarCry - Grouping Formtool Category Items</a>
	</h2>
	<div class="entry-content">
		<p>A new project we&#8217;re working has the need to categorise each new content object, for this we use the built in FarCry category/keyword formtool.</p>

<p>By default the render type is a multi-select tree, I wanted a single select dropdown. Luckily formtools makes this oh so simple.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&lt;</span><span class="nx">cfproperty</span> <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;catHTML&quot;</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;nstring&quot;</span> <span class="nx">required</span><span class="o">=</span><span class="s2">&quot;true&quot;</span> <span class="k">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span> <span class="nx">ftSeq</span><span class="o">=</span><span class="s2">&quot;2&quot;</span> <span class="nx">ftwizardStep</span><span class="o">=</span><span class="s2">&quot;Content&quot;</span>  <span class="nx">ftValidation</span><span class="o">=</span><span class="s2">&quot;required&quot;</span> <span class="nx">ftFieldset</span><span class="o">=</span><span class="s2">&quot;General Details&quot;</span> <span class="nx">ftLabel</span><span class="o">=</span><span class="s2">&quot;Categories&quot;</span> <span class="nx">ftType</span><span class="o">=</span><span class="s2">&quot;Category&quot;</span> <span class="nx">ftAlias</span><span class="o">=</span><span class="s2">&quot;sections&quot;</span> <span class="nx">ftRenderType</span><span class="o">=</span><span class="s2">&quot;dropdown&quot;</span> <span class="nx">ftSelectSize</span><span class="o">=</span><span class="s2">&quot;1&quot;</span> <span class="nx">ftSelectMultiple</span><span class="o">=</span><span class="s2">&quot;false&quot;</span> <span class="nx">ftAliasAsOptGroup</span><span class="o">=</span><span class="s2">&quot;true&quot;</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Note that I&#8217;ve set the dropdown size to 1 and multiple select to false. Basically I have a group of &#8220;sections&#8221; that each content object needs to belong to, section 1 through 11. I&#8217;ve setup the categories already under a parent category called &#8220;sections&#8221; (note the ftAlias in the formtool definition). Unfortunately the default rendering was showing &#8220;sections&#8221; as a selectable category, however I didn&#8217;t want this. I only wanted the users to be able to choose the <em>children</em> of this category, not the category itself.</p>

<p>Luckily FarCry makes this kind of thing simple to override. I added my own category.cfc inside my projects <em>packages/formtools</em> directory and made sure to extend category.cfc from <em>farcry.core.packages.formtools.category</em>. In this I only used the edit() function to render an optgroup from a new custom property called ftAliasAsOptGroup (see above snippet). This gave me the following:</p>

<p><img src="/images/uploads/2011/07/optgroup.png" alt="FarCry optgroup" /></p>

<p>The full category.cfc is below if you&#8217;re interested.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
<span class='line-number'>128</span>
<span class='line-number'>129</span>
<span class='line-number'>130</span>
<span class='line-number'>131</span>
<span class='line-number'>132</span>
<span class='line-number'>133</span>
<span class='line-number'>134</span>
<span class='line-number'>135</span>
<span class='line-number'>136</span>
<span class='line-number'>137</span>
<span class='line-number'>138</span>
<span class='line-number'>139</span>
<span class='line-number'>140</span>
<span class='line-number'>141</span>
<span class='line-number'>142</span>
<span class='line-number'>143</span>
<span class='line-number'>144</span>
<span class='line-number'>145</span>
<span class='line-number'>146</span>
<span class='line-number'>147</span>
<span class='line-number'>148</span>
<span class='line-number'>149</span>
<span class='line-number'>150</span>
<span class='line-number'>151</span>
<span class='line-number'>152</span>
<span class='line-number'>153</span>
<span class='line-number'>154</span>
<span class='line-number'>155</span>
<span class='line-number'>156</span>
<span class='line-number'>157</span>
<span class='line-number'>158</span>
<span class='line-number'>159</span>
<span class='line-number'>160</span>
<span class='line-number'>161</span>
<span class='line-number'>162</span>
<span class='line-number'>163</span>
<span class='line-number'>164</span>
<span class='line-number'>165</span>
<span class='line-number'>166</span>
<span class='line-number'>167</span>
<span class='line-number'>168</span>
<span class='line-number'>169</span>
<span class='line-number'>170</span>
<span class='line-number'>171</span>
<span class='line-number'>172</span>
<span class='line-number'>173</span>
<span class='line-number'>174</span>
<span class='line-number'>175</span>
<span class='line-number'>176</span>
<span class='line-number'>177</span>
<span class='line-number'>178</span>
<span class='line-number'>179</span>
<span class='line-number'>180</span>
<span class='line-number'>181</span>
<span class='line-number'>182</span>
<span class='line-number'>183</span>
<span class='line-number'>184</span>
<span class='line-number'>185</span>
<span class='line-number'>186</span>
<span class='line-number'>187</span>
<span class='line-number'>188</span>
<span class='line-number'>189</span>
<span class='line-number'>190</span>
<span class='line-number'>191</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&lt;</span><span class="nx">cfcomponent</span> <span class="kr">extends</span><span class="o">=</span><span class="s2">&quot;farcry.core.packages.formtools.category&quot;</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>  <span class="o">&lt;</span><span class="nx">cfproperty</span> <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;ftAliasAsOptGroup&quot;</span> <span class="k">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span> <span class="nx">hint</span><span class="o">=</span><span class="s2">&quot;If true, renders ftAlias as an optgroup&quot;</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>  <span class="o">&lt;</span><span class="nx">cffunction</span> <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;edit&quot;</span> <span class="nx">access</span><span class="o">=</span><span class="s2">&quot;public&quot;</span> <span class="nx">output</span><span class="o">=</span><span class="s2">&quot;false&quot;</span> <span class="nx">returntype</span><span class="o">=</span><span class="s2">&quot;string&quot;</span> <span class="nx">hint</span><span class="o">=</span><span class="s2">&quot;his will return a string of formatted HTML text to enable the user to edit the data&quot;</span><span class="o">&gt;</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="nx">cfargument</span> <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;typename&quot;</span> <span class="nx">required</span><span class="o">=</span><span class="s2">&quot;true&quot;</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;string&quot;</span> <span class="nx">hint</span><span class="o">=</span><span class="s2">&quot;The name of the type that this field is part of.&quot;</span><span class="o">&gt;</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="nx">cfargument</span> <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;stObject&quot;</span> <span class="nx">required</span><span class="o">=</span><span class="s2">&quot;true&quot;</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;struct&quot;</span> <span class="nx">hint</span><span class="o">=</span><span class="s2">&quot;The object of the record that this field is part of.&quot;</span><span class="o">&gt;</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="nx">cfargument</span> <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;stMetadata&quot;</span> <span class="nx">required</span><span class="o">=</span><span class="s2">&quot;true&quot;</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;struct&quot;</span> <span class="nx">hint</span><span class="o">=</span><span class="s2">&quot;This is the metadata that is either setup as part of the type.cfc or overridden when calling ft:object by using the stMetadata argument.&quot;</span><span class="o">&gt;</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="nx">cfargument</span> <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;fieldname&quot;</span> <span class="nx">required</span><span class="o">=</span><span class="s2">&quot;true&quot;</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;string&quot;</span> <span class="nx">hint</span><span class="o">=</span><span class="s2">&quot;This is the name that will be used for the form field. It includes the prefix that will be used by ft:processform.&quot;</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'>      <span class="o">&lt;</span><span class="nx">cfset</span> <span class="kd">var</span> <span class="nx">html</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span> <span class="o">/&gt;</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="nx">cfset</span> <span class="kd">var</span> <span class="nx">navid</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span> <span class="o">/&gt;</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="nx">cfset</span> <span class="kd">var</span> <span class="nx">oCategory</span> <span class="o">=</span> <span class="nx">createObject</span><span class="p">(</span><span class="s2">&quot;component&quot;</span><span class="p">,</span><span class="s1">&#39;farcry.core.packages.farcry.category&#39;</span><span class="p">)</span><span class="o">&gt;</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="nx">cfset</span> <span class="kd">var</span> <span class="nx">lSelectedCategoryID</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span> <span class="o">&gt;</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="nx">cfset</span> <span class="kd">var</span> <span class="nx">lCategoryBranch</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span> <span class="o">/&gt;</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="nx">cfset</span> <span class="kd">var</span> <span class="nx">CategoryName</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span> <span class="o">/&gt;</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="nx">cfset</span> <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span> <span class="o">/&gt;</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="nx">cfset</span> <span class="kd">var</span> <span class="nx">rootNodeText</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span> <span class="o">/&gt;</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="nx">cfset</span> <span class="kd">var</span> <span class="nx">rootID</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span> <span class="o">/&gt;</span>
</span><span class='line'>
</span><span class='line'>      <span class="o">&lt;</span><span class="nx">cfif</span> <span class="nx">structKeyExists</span><span class="p">(</span><span class="nx">application</span><span class="p">.</span><span class="nx">catid</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">stMetadata</span><span class="p">.</span><span class="nx">ftAlias</span><span class="p">)</span><span class="o">&gt;</span>
</span><span class='line'>          <span class="o">&lt;</span><span class="nx">cfset</span> <span class="nx">rootID</span> <span class="o">=</span> <span class="nx">application</span><span class="p">.</span><span class="nx">catid</span><span class="p">[</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">stMetadata</span><span class="p">.</span><span class="nx">ftAlias</span><span class="p">]</span> <span class="o">&gt;</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="nx">cfelse</span><span class="o">&gt;</span>
</span><span class='line'>          <span class="o">&lt;</span><span class="nx">cfset</span> <span class="nx">rootID</span> <span class="o">=</span> <span class="nx">application</span><span class="p">.</span><span class="nx">catid</span><span class="p">[</span><span class="s1">&#39;root&#39;</span><span class="p">]</span> <span class="o">&gt;</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="err">/cfif&gt;</span>
</span><span class='line'>
</span><span class='line'>      <span class="o">&lt;</span><span class="nx">cfset</span> <span class="nx">lSelectedCategoryID</span> <span class="o">=</span> <span class="nx">oCategory</span><span class="p">.</span><span class="nx">getCategories</span><span class="p">(</span><span class="nx">objectid</span><span class="o">=</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">stObject</span><span class="p">.</span><span class="nx">ObjectID</span><span class="p">,</span><span class="nx">bReturnCategoryIDs</span><span class="o">=</span><span class="kc">true</span><span class="p">,</span><span class="nx">alias</span><span class="o">=</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">stMetadata</span><span class="p">.</span><span class="nx">ftAlias</span><span class="p">)</span> <span class="o">/&gt;</span>
</span><span class='line'>
</span><span class='line'>      <span class="o">&lt;</span><span class="nx">cfset</span> <span class="nx">rootNodeText</span> <span class="o">=</span> <span class="nx">oCategory</span><span class="p">.</span><span class="nx">getCategoryNamebyID</span><span class="p">(</span><span class="nx">categoryid</span><span class="o">=</span><span class="nx">rootID</span><span class="p">)</span> <span class="o">/&gt;</span>
</span><span class='line'>
</span><span class='line'>      <span class="o">&lt;</span><span class="nx">cfswitch</span> <span class="nx">expression</span><span class="o">=</span><span class="s2">&quot;#arguments.stMetadata.ftRenderType#&quot;</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'>          <span class="o">&lt;</span><span class="nx">cfcase</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;dropdown&quot;</span><span class="o">&gt;</span>
</span><span class='line'>              <span class="o">&lt;</span><span class="nx">cfset</span> <span class="nx">lCategoryBranch</span> <span class="o">=</span> <span class="nx">oCategory</span><span class="p">.</span><span class="nx">getCategoryBranchAsList</span><span class="p">(</span><span class="nx">lCategoryIDs</span><span class="o">=</span><span class="nx">rootID</span><span class="p">)</span> <span class="o">/&gt;</span>
</span><span class='line'>
</span><span class='line'>              <span class="o">&lt;</span><span class="nx">cfsavecontent</span> <span class="nx">variable</span><span class="o">=</span><span class="s2">&quot;html&quot;</span><span class="o">&gt;</span>
</span><span class='line'>                  <span class="o">&lt;</span><span class="nx">cfoutput</span><span class="o">&gt;&lt;</span><span class="nx">select</span> <span class="nx">id</span><span class="o">=</span><span class="s2">&quot;#arguments.fieldname#&quot;</span> <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;#arguments.fieldname#&quot;</span>  <span class="o">&lt;</span><span class="nx">cfif</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">stMetadata</span><span class="p">.</span><span class="nx">ftSelectMultiple</span><span class="o">&gt;</span><span class="nx">size</span><span class="o">=</span><span class="s2">&quot;#arguments.stMetadata.ftSelectSize#&quot;</span> <span class="nx">multiple</span><span class="o">=</span><span class="s2">&quot;true&quot;</span><span class="o">&lt;</span><span class="err">/cfif&gt; class=&quot;selectInput #arguments.stMetadata.ftSelectSize# #arguments.stMetadata.ftClass#&quot;&gt;&lt;/cfoutput&gt;</span>
</span><span class='line'>                  <span class="o">&lt;</span><span class="nx">cfloop</span> <span class="nx">list</span><span class="o">=</span><span class="s2">&quot;#lCategoryBranch#&quot;</span> <span class="nx">index</span><span class="o">=</span><span class="s2">&quot;i&quot;</span><span class="o">&gt;</span>
</span><span class='line'>                      <span class="c">&lt;!--</span><span class="o">-</span> <span class="nx">If</span> <span class="nx">the</span> <span class="nx">item</span> <span class="nx">is</span> <span class="nx">the</span> <span class="nx">actual</span> <span class="nx">alias</span> <span class="nx">requested</span> <span class="nx">then</span> <span class="nx">it</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">selectable</span><span class="p">.</span> <span class="o">---&gt;</span>
</span><span class='line'>                      <span class="o">&lt;</span><span class="nx">cfif</span> <span class="nx">i</span> <span class="nx">EQ</span> <span class="nx">rootID</span><span class="o">&gt;</span>
</span><span class='line'>                          <span class="o">&lt;</span><span class="nx">cfif</span> <span class="nx">len</span><span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">stMetadata</span><span class="p">.</span><span class="nx">ftDropdownFirstItem</span><span class="p">)</span><span class="o">&gt;</span>
</span><span class='line'>                              <span class="o">&lt;</span><span class="nx">cfoutput</span><span class="o">&gt;&lt;</span><span class="nx">option</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="o">&gt;</span><span class="err">#</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">stMetadata</span><span class="p">.</span><span class="nx">ftDropdownFirstItem</span><span class="err">#</span><span class="o">&lt;</span><span class="err">/option&gt;&lt;/cfoutput&gt;</span>
</span><span class='line'>                          <span class="o">&lt;</span><span class="nx">cfelse</span><span class="o">&gt;</span>
</span><span class='line'>                              <span class="o">&lt;</span><span class="nx">cfset</span> <span class="nx">CategoryName</span> <span class="o">=</span> <span class="nx">oCategory</span><span class="p">.</span><span class="nx">getCategoryNamebyID</span><span class="p">(</span><span class="nx">categoryid</span><span class="o">=</span><span class="nx">i</span><span class="p">,</span><span class="nx">typename</span><span class="o">=</span><span class="s1">&#39;dmCategory&#39;</span><span class="p">)</span> <span class="o">/&gt;</span>
</span><span class='line'>                              <span class="o">&lt;</span><span class="nx">cfif</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">stMetadata</span><span class="p">.</span><span class="nx">ftAliasAsOptGroup</span> <span class="nx">EQ</span> <span class="kc">true</span><span class="o">&gt;</span>
</span><span class='line'>                                  <span class="o">&lt;</span><span class="nx">cfoutput</span><span class="o">&gt;&lt;</span><span class="nx">optgroup</span> <span class="nx">label</span><span class="o">=</span><span class="s2">&quot;#CategoryName#&quot;</span><span class="o">&gt;&lt;</span><span class="err">/cfoutput&gt;</span>
</span><span class='line'>                              <span class="o">&lt;</span><span class="nx">cfelse</span><span class="o">&gt;</span>
</span><span class='line'>                                  <span class="o">&lt;</span><span class="nx">cfoutput</span><span class="o">&gt;&lt;</span><span class="nx">option</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="o">&gt;</span><span class="err">#</span><span class="nx">CategoryName</span><span class="err">#</span><span class="o">&lt;</span><span class="err">/option&gt;&lt;/cfoutput&gt;</span>
</span><span class='line'>                              <span class="o">&lt;</span><span class="err">/cfif&gt;</span>
</span><span class='line'>                          <span class="o">&lt;</span><span class="err">/cfif&gt;</span>
</span><span class='line'>                      <span class="o">&lt;</span><span class="nx">cfelse</span><span class="o">&gt;</span>
</span><span class='line'>                          <span class="o">&lt;</span><span class="nx">cfset</span> <span class="nx">CategoryName</span> <span class="o">=</span> <span class="nx">oCategory</span><span class="p">.</span><span class="nx">getCategoryNamebyID</span><span class="p">(</span><span class="nx">categoryid</span><span class="o">=</span><span class="nx">i</span><span class="p">,</span><span class="nx">typename</span><span class="o">=</span><span class="s1">&#39;dmCategory&#39;</span><span class="p">)</span> <span class="o">/&gt;</span>
</span><span class='line'>                          <span class="o">&lt;</span><span class="nx">cfoutput</span><span class="o">&gt;&lt;</span><span class="nx">option</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;#i#&quot;</span><span class="o">&lt;</span><span class="nx">cfif</span> <span class="nx">listContainsNoCase</span><span class="p">(</span><span class="nx">lSelectedCategoryID</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span><span class="o">&gt;</span> <span class="nx">selected</span><span class="o">=</span><span class="s2">&quot;selected&quot;</span><span class="o">&lt;</span><span class="err">/cfif&gt;&gt;#CategoryName#&lt;/option&gt;&lt;/cfoutput&gt;</span>
</span><span class='line'>                      <span class="o">&lt;</span><span class="err">/cfif&gt;</span>
</span><span class='line'>                  <span class="o">&lt;</span><span class="err">/cfloop&gt;</span>
</span><span class='line'>                  <span class="o">&lt;</span><span class="nx">cfif</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">stMetadata</span><span class="p">.</span><span class="nx">ftAliasAsOptGroup</span> <span class="nx">EQ</span> <span class="kc">true</span><span class="o">&gt;</span>
</span><span class='line'>                      <span class="o">&lt;</span><span class="nx">cfoutput</span><span class="o">&gt;&lt;</span><span class="err">/optgroup&gt;&lt;/cfoutput&gt;</span>
</span><span class='line'>                  <span class="o">&lt;</span><span class="err">/cfif&gt;</span>
</span><span class='line'>                  <span class="o">&lt;</span><span class="nx">cfoutput</span><span class="o">&gt;&lt;</span><span class="err">/select&gt;&lt;/cfoutput&gt;</span>
</span><span class='line'>              <span class="o">&lt;</span><span class="err">/cfsavecontent&gt;</span>
</span><span class='line'>          <span class="o">&lt;</span><span class="err">/cfcase&gt;</span>
</span><span class='line'>
</span><span class='line'>          <span class="o">&lt;</span><span class="nx">cfcase</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;prototype&quot;</span><span class="o">&gt;</span>
</span><span class='line'>              <span class="o">&lt;</span><span class="nx">cfsavecontent</span> <span class="nx">variable</span><span class="o">=</span><span class="s2">&quot;html&quot;</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'>                  <span class="o">&lt;</span><span class="nx">cfoutput</span><span class="o">&gt;&lt;</span><span class="nx">fieldset</span> <span class="nx">style</span><span class="o">=</span><span class="s2">&quot;width: 300px;&quot;</span><span class="o">&gt;</span>
</span><span class='line'>                      <span class="o">&lt;</span><span class="nx">cfif</span> <span class="nx">len</span><span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">stMetadata</span><span class="p">.</span><span class="nx">ftLegend</span><span class="p">)</span><span class="o">&gt;&lt;</span><span class="nx">legend</span><span class="o">&gt;</span><span class="err">#</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">stMetadata</span><span class="p">.</span><span class="nx">ftLegend</span><span class="err">#</span><span class="o">&lt;</span><span class="err">/legend&gt;&lt;/cfif&gt;</span>
</span><span class='line'>
</span><span class='line'>                      <span class="o">&lt;</span><span class="nx">div</span> <span class="kr">class</span><span class="o">=</span><span class="s2">&quot;fieldsection optional full&quot;</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'>                          <span class="o">&lt;</span><span class="nx">div</span> <span class="kr">class</span><span class="o">=</span><span class="s2">&quot;fieldwrap&quot;</span><span class="o">&gt;</span>
</span><span class='line'>                          <span class="o">&lt;</span><span class="err">/cfoutput&gt;</span>
</span><span class='line'>
</span><span class='line'>                              <span class="o">&lt;</span><span class="nx">ft</span><span class="o">:</span><span class="nx">NTMPrototypeTree</span> <span class="nx">id</span><span class="o">=</span><span class="s2">&quot;#arguments.fieldname#&quot;</span> <span class="nx">navid</span><span class="o">=</span><span class="s2">&quot;#rootID#&quot;</span> <span class="nx">depth</span><span class="o">=</span><span class="s2">&quot;99&quot;</span> <span class="nx">bIncludeHome</span><span class="o">=</span><span class="mi">1</span> <span class="nx">lSelectedItems</span><span class="o">=</span><span class="s2">&quot;#lSelectedCategoryID#&quot;</span> <span class="nx">bSelectMultiple</span><span class="o">=</span><span class="s2">&quot;#arguments.stMetadata.ftSelectMultiple#&quot;</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'>                          <span class="o">&lt;</span><span class="nx">cfoutput</span><span class="o">&gt;</span>
</span><span class='line'>                          <span class="o">&lt;</span><span class="err">/div&gt;</span>
</span><span class='line'>
</span><span class='line'>                          <span class="o">&lt;</span><span class="nx">br</span> <span class="kr">class</span><span class="o">=</span><span class="s2">&quot;fieldsectionbreak&quot;</span> <span class="o">/&gt;</span>
</span><span class='line'>                      <span class="o">&lt;</span><span class="err">/div&gt;</span>
</span><span class='line'>                      <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;hidden&quot;</span> <span class="nx">id</span><span class="o">=</span><span class="s2">&quot;#arguments.fieldname#&quot;</span> <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;#arguments.fieldname#&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;&quot;</span> <span class="o">/&gt;</span>
</span><span class='line'>                  <span class="o">&lt;</span><span class="err">/fieldset&gt;&lt;/cfoutput&gt;</span>
</span><span class='line'>
</span><span class='line'>              <span class="o">&lt;</span><span class="err">/cfsavecontent&gt;</span>
</span><span class='line'>          <span class="o">&lt;</span><span class="err">/cfcase&gt;</span>
</span><span class='line'>          <span class="o">&lt;</span><span class="nx">cfcase</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;extjs&quot;</span><span class="o">&gt;</span>
</span><span class='line'>              <span class="c">&lt;!--</span><span class="o">-</span> <span class="o">&lt;</span><span class="nx">skin</span><span class="o">:</span><span class="nx">htmlHead</span> <span class="nx">library</span><span class="o">=</span><span class="s2">&quot;extjs&quot;</span> <span class="o">/&gt;</span>
</span><span class='line'>              <span class="o">&lt;</span><span class="nx">skin</span><span class="o">:</span><span class="nx">htmlHead</span> <span class="nx">library</span><span class="o">=</span><span class="s2">&quot;farcryForm&quot;</span> <span class="o">/&gt;</span> <span class="o">---&gt;</span>
</span><span class='line'>
</span><span class='line'>              <span class="o">&lt;</span><span class="nx">cfsavecontent</span> <span class="nx">variable</span><span class="o">=</span><span class="s2">&quot;html&quot;</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'>                  <span class="o">&lt;</span><span class="nx">cfoutput</span><span class="o">&gt;&lt;</span><span class="nx">fieldset</span> <span class="nx">style</span><span class="o">=</span><span class="s2">&quot;width: 300px;&quot;</span><span class="o">&gt;</span>
</span><span class='line'>                      <span class="o">&lt;</span><span class="nx">cfif</span> <span class="nx">len</span><span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">stMetadata</span><span class="p">.</span><span class="nx">ftLegend</span><span class="p">)</span><span class="o">&gt;&lt;</span><span class="nx">legend</span><span class="o">&gt;</span><span class="err">#</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">stMetadata</span><span class="p">.</span><span class="nx">ftLegend</span><span class="err">#</span><span class="o">&lt;</span><span class="err">/legend&gt;&lt;/cfif&gt;</span>
</span><span class='line'>
</span><span class='line'>                      <span class="c">&lt;!--</span><span class="o">-</span> <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s2">&quot;tree-div&quot;</span> <span class="nx">style</span><span class="o">=</span><span class="s2">&quot;border:1px solid #c3daf9;&quot;</span><span class="o">&gt;&lt;</span><span class="err">/div&gt; ---&gt;</span>
</span><span class='line'>                      <span class="o">&lt;</span><span class="nx">div</span> <span class="kr">class</span><span class="o">=</span><span class="s2">&quot;fieldsection optional full&quot;</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'>                          <span class="o">&lt;</span><span class="nx">div</span> <span class="kr">class</span><span class="o">=</span><span class="s2">&quot;fieldwrap&quot;</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'>                              <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s2">&quot;#arguments.fieldname#-tree-div&quot;</span><span class="o">&gt;&lt;</span><span class="err">/div&gt;</span>
</span><span class='line'>
</span><span class='line'>                          <span class="o">&lt;</span><span class="err">/div&gt;</span>
</span><span class='line'>
</span><span class='line'>                          <span class="o">&lt;</span><span class="nx">br</span> <span class="kr">class</span><span class="o">=</span><span class="s2">&quot;fieldsectionbreak&quot;</span> <span class="o">/&gt;</span>
</span><span class='line'>                      <span class="o">&lt;</span><span class="err">/div&gt;</span>
</span><span class='line'>                      <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;hidden&quot;</span> <span class="nx">id</span><span class="o">=</span><span class="s2">&quot;#arguments.fieldname#&quot;</span> <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;#arguments.fieldname#&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;#lSelectedCategoryID#&quot;</span> <span class="o">/&gt;</span>
</span><span class='line'>                      <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;hidden&quot;</span> <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;#arguments.fieldname#&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;&quot;</span> <span class="o">/&gt;</span>
</span><span class='line'>                  <span class="o">&lt;</span><span class="err">/fieldset&gt;</span>
</span><span class='line'>                  <span class="o">&lt;</span><span class="err">/cfoutput&gt;</span>
</span><span class='line'>
</span><span class='line'>              <span class="o">&lt;</span><span class="err">/cfsavecontent&gt;</span>
</span><span class='line'>
</span><span class='line'>              <span class="o">&lt;</span><span class="nx">skin</span><span class="o">:</span><span class="nx">onReady</span><span class="o">&gt;</span>
</span><span class='line'>              <span class="o">&lt;</span><span class="nx">cfoutput</span><span class="o">&gt;</span>
</span><span class='line'>                  <span class="nx">createFormtoolTree</span><span class="p">(</span><span class="s1">&#39;#arguments.fieldname#&#39;</span><span class="p">,</span><span class="s1">&#39;#rootID#&#39;</span><span class="p">,</span> <span class="s1">&#39;#application.url.webtop#/facade/getCategoryNodes.cfm&#39;</span><span class="p">,</span> <span class="s1">&#39;#rootNodeText#&#39;</span><span class="p">,</span><span class="s1">&#39;#lSelectedCategoryID#&#39;</span><span class="p">,</span> <span class="s1">&#39;categoryIconCls&#39;</span><span class="p">);</span>
</span><span class='line'>              <span class="o">&lt;</span><span class="err">/cfoutput&gt;</span>
</span><span class='line'>              <span class="o">&lt;</span><span class="err">/skin:onReady&gt;</span>
</span><span class='line'>          <span class="o">&lt;</span><span class="err">/cfcase&gt;</span>
</span><span class='line'>          <span class="o">&lt;</span><span class="nx">cfcase</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;jquery&quot;</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'>              <span class="o">&lt;</span><span class="nx">skin</span><span class="o">:</span><span class="nx">onReady</span><span class="o">&gt;</span>
</span><span class='line'>              <span class="o">&lt;</span><span class="nx">cfoutput</span><span class="o">&gt;</span>
</span><span class='line'>                  <span class="nx">$j</span><span class="p">(</span><span class="s2">&quot;###arguments.fieldname#_list&quot;</span><span class="p">).</span><span class="nx">treeview</span><span class="p">({</span>
</span><span class='line'>                      <span class="nx">url</span><span class="o">:</span> <span class="s2">&quot;#application.url.webtop#/facade/getCategoryNodes.cfm?node=#rootID#&amp;fieldname=#arguments.fieldname#&amp;multiple=#arguments.stMetadata.ftSelectMultiple#&amp;lSelectedItems=#lSelectedCategoryID#&quot;</span>
</span><span class='line'>                  <span class="p">})</span>
</span><span class='line'>              <span class="o">&lt;</span><span class="err">/cfoutput&gt;</span>
</span><span class='line'>              <span class="o">&lt;</span><span class="err">/skin:onReady&gt;</span>
</span><span class='line'>
</span><span class='line'>              <span class="o">&lt;</span><span class="nx">cfsavecontent</span> <span class="nx">variable</span><span class="o">=</span><span class="s2">&quot;html&quot;</span><span class="o">&gt;</span>
</span><span class='line'>                  <span class="o">&lt;</span><span class="nx">cfoutput</span><span class="o">&gt;</span>
</span><span class='line'>                  <span class="o">&lt;</span><span class="nx">div</span> <span class="kr">class</span><span class="o">=</span><span class="s2">&quot;multiField&quot;</span><span class="o">&gt;</span>
</span><span class='line'>                      <span class="o">&lt;</span><span class="nx">ul</span> <span class="nx">id</span><span class="o">=</span><span class="s2">&quot;#arguments.fieldname#_list&quot;</span> <span class="kr">class</span><span class="o">=</span><span class="s2">&quot;treeview&quot;</span><span class="o">&gt;&lt;</span><span class="err">/ul&gt;</span>
</span><span class='line'>                  <span class="o">&lt;</span><span class="err">/div&gt;</span>
</span><span class='line'>                  <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;hidden&quot;</span> <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;#arguments.fieldname#&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;&quot;</span> <span class="o">/&gt;</span>
</span><span class='line'>                  <span class="o">&lt;</span><span class="err">/cfoutput&gt;</span>
</span><span class='line'>              <span class="o">&lt;</span><span class="err">/cfsavecontent&gt;</span>
</span><span class='line'>          <span class="o">&lt;</span><span class="err">/cfcase&gt;</span>
</span><span class='line'>          <span class="o">&lt;</span><span class="nx">cfdefaultcase</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'>              <span class="o">&lt;</span><span class="nx">skin</span><span class="o">:</span><span class="nx">loadJS</span> <span class="nx">id</span><span class="o">=</span><span class="s2">&quot;jquery&quot;</span> <span class="o">/&gt;</span>
</span><span class='line'>              <span class="o">&lt;</span><span class="nx">skin</span><span class="o">:</span><span class="nx">loadJS</span> <span class="nx">id</span><span class="o">=</span><span class="s2">&quot;jquery-checkboxtree&quot;</span> <span class="nx">basehref</span><span class="o">=</span><span class="s2">&quot;#application.url.webtop#/thirdparty/checkboxtree/js&quot;</span> <span class="nx">lFiles</span><span class="o">=</span><span class="s2">&quot;jquery.checkboxtree.js&quot;</span> <span class="o">/&gt;</span>
</span><span class='line'>              <span class="o">&lt;</span><span class="nx">skin</span><span class="o">:</span><span class="nx">loadCSS</span> <span class="nx">id</span><span class="o">=</span><span class="s2">&quot;jquery-checkboxtree&quot;</span> <span class="nx">basehref</span><span class="o">=</span><span class="s2">&quot;#application.url.webtop#/thirdparty/checkboxtree/css&quot;</span> <span class="nx">lFiles</span><span class="o">=</span><span class="s2">&quot;checkboxtree.css&quot;</span> <span class="o">/&gt;</span>
</span><span class='line'>
</span><span class='line'>              <span class="o">&lt;</span><span class="nx">skin</span><span class="o">:</span><span class="nx">onReady</span><span class="o">&gt;</span>
</span><span class='line'>              <span class="o">&lt;</span><span class="nx">cfoutput</span><span class="o">&gt;</span>
</span><span class='line'>                  <span class="nx">$j</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
</span><span class='line'>                     <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;POST&quot;</span><span class="p">,</span>
</span><span class='line'>                     <span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;#application.fapi.getLink(type=&quot;dmCategory&quot;, objectid=&quot;#rootID#&quot;, view=&quot;displayCheckboxTree&quot;, urlParameters=&quot;ajaxmode=1&quot;)#&#39;</span><span class="p">,</span>
</span><span class='line'>                     <span class="nx">data</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>                      <span class="nx">fieldname</span><span class="o">:</span> <span class="s1">&#39;#arguments.fieldname#&#39;</span><span class="p">,</span>
</span><span class='line'>                      <span class="nx">rootNodeID</span><span class="o">:</span><span class="s1">&#39;#rootID#&#39;</span><span class="p">,</span>
</span><span class='line'>                      <span class="nx">selectedObjectIDs</span><span class="o">:</span> <span class="s1">&#39;#lSelectedCategoryID#&#39;</span>
</span><span class='line'>                      <span class="p">},</span>
</span><span class='line'>                     <span class="nx">cache</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
</span><span class='line'>                     <span class="nx">success</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">msg</span><span class="p">){</span>
</span><span class='line'>                          <span class="nx">$j</span><span class="p">(</span><span class="s2">&quot;###arguments.fieldname#-checkboxDiv&quot;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">msg</span><span class="p">);</span>
</span><span class='line'>                          <span class="nx">$j</span><span class="p">(</span><span class="s2">&quot;###arguments.fieldname#-checkboxTree&quot;</span><span class="p">).</span><span class="nx">checkboxTree</span><span class="p">({</span>
</span><span class='line'>                                  <span class="nx">collapsedarrow</span><span class="o">:</span> <span class="s2">&quot;#application.url.webtop#/thirdparty/checkboxtree/images/checkboxtree/img-arrow-collapsed.gif&quot;</span><span class="p">,</span>
</span><span class='line'>                                  <span class="nx">expandedarrow</span><span class="o">:</span> <span class="s2">&quot;#application.url.webtop#/thirdparty/checkboxtree/images/checkboxtree/img-arrow-expanded.gif&quot;</span><span class="p">,</span>
</span><span class='line'>                                  <span class="nx">blankarrow</span><span class="o">:</span> <span class="s2">&quot;#application.url.webtop#/thirdparty/checkboxtree/images/checkboxtree/img-arrow-blank.gif&quot;</span><span class="p">,</span>
</span><span class='line'>                                  <span class="nx">checkchildren</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
</span><span class='line'>                                  <span class="nx">checkparents</span><span class="o">:</span> <span class="kc">false</span>
</span><span class='line'>                          <span class="p">});</span>
</span><span class='line'>                          <span class="nx">$j</span><span class="p">(</span><span class="s2">&quot;###arguments.fieldname#-checkboxDiv input:checked&quot;</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="s1">&#39;mjb&#39;</span><span class="p">);</span>
</span><span class='line'>                          <span class="nx">$j</span><span class="p">(</span><span class="s2">&quot;###arguments.fieldname#-checkboxDiv input:checked&quot;</span><span class="p">).</span><span class="nx">parent</span><span class="p">().</span><span class="nx">addClass</span><span class="p">(</span><span class="s1">&#39;mjb&#39;</span><span class="p">);</span>
</span><span class='line'>                     <span class="p">}</span>
</span><span class='line'>                   <span class="p">});</span>
</span><span class='line'>
</span><span class='line'>              <span class="o">&lt;</span><span class="err">/cfoutput&gt;</span>
</span><span class='line'>              <span class="o">&lt;</span><span class="err">/skin:onReady&gt;</span>
</span><span class='line'>
</span><span class='line'>              <span class="o">&lt;</span><span class="nx">cfsavecontent</span> <span class="nx">variable</span><span class="o">=</span><span class="s2">&quot;html&quot;</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'>                  <span class="o">&lt;</span><span class="nx">cfoutput</span><span class="o">&gt;</span>
</span><span class='line'>                  <span class="o">&lt;</span><span class="nx">div</span> <span class="kr">class</span><span class="o">=</span><span class="s2">&quot;multiField&quot;</span><span class="o">&gt;</span>
</span><span class='line'>                      <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s2">&quot;#arguments.fieldname#-checkboxDiv&quot;</span><span class="o">&gt;</span><span class="nx">loading</span><span class="p">...</span><span class="o">&lt;</span><span class="err">/div&gt;</span>
</span><span class='line'>                      <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;hidden&quot;</span> <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;#arguments.fieldname#&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;&quot;</span> <span class="o">/&gt;</span>
</span><span class='line'>                  <span class="o">&lt;</span><span class="err">/div&gt;</span>
</span><span class='line'>                  <span class="o">&lt;</span><span class="err">/cfoutput&gt;</span>
</span><span class='line'>
</span><span class='line'>              <span class="o">&lt;</span><span class="err">/cfsavecontent&gt;</span>
</span><span class='line'>          <span class="o">&lt;</span><span class="err">/cfdefaultcase&gt;</span>
</span><span class='line'>
</span><span class='line'>      <span class="o">&lt;</span><span class="err">/cfswitch&gt;</span>
</span><span class='line'>
</span><span class='line'>      <span class="o">&lt;</span><span class="nx">cfreturn</span> <span class="nx">html</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="err">/cffunction&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="err">/cfcomponent&gt;</span>
</span></code></pre></td></tr></table></div></figure>


		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2011-07-01T10:51:52+10:00" pubdate data-updated="true">Jul 1<span>st</span>, 2011</time></div>
	<div class="tags">


	<a class='category' href='/categories/coldfusion/'>ColdFusion</a>, <a class='category' href='/categories/farcry/'>Farcry</a>


</div>
	
		<div class="comments"><a href="/2011/07/01/farcry-grouping-formtool-category-items//page/4/index.html#disqus_thread">Comments</a></div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/2011/06/30/farcry-tip-remove-install-directory/">
		
			FarCry Tip - Remove Install Directory</a>
	</h2>
	<div class="entry-content">
		<p>After you install FarCry you must make sure to delete the &#8220;install&#8221; folder(s) that FarCry leaves behind. Otherwise it&#8217;s possible for anyone to access the installer wizard again from your production website, and as it&#8217;s the installer they don&#8217;t even need to be logged in to cause real havoc. Not good.</p>

<p>By default, as of FarCry 6.1.x, there are 2 install folders to delete:</p>

<ul>
<li>farcry.core.webtop.install</li>
<li>farcry.plugins.farcrycms.install</li>
</ul>


		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2011-06-30T10:39:14+10:00" pubdate data-updated="true">Jun 30<span>th</span>, 2011</time></div>
	<div class="tags">


	<a class='category' href='/categories/coldfusion/'>ColdFusion</a>, <a class='category' href='/categories/farcry/'>Farcry</a>


</div>
	
		<div class="comments"><a href="/2011/06/30/farcry-tip-remove-install-directory//page/4/index.html#disqus_thread">Comments</a></div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/2011/05/31/mura-overriding-dspcrumblistlinks/">
		
			Mura - Overriding dspCrumblistLinks</a>
	</h2>
	<div class="entry-content">
		<p>Like most CMS solutions out there, Mura CMS gives you some cool hooks to override core functionality. <a href="http://docs.getmura.com/index.cfm/developer-guides/">See the developer guides</a> for more information.</p>

<p>I&#8217;ve created a <a href="https://github.com/michaelsharman/muracustomisations/">repository on github</a> to store any customisations or extensions that could be cherry picked for use in any Mura app.</p>

<p>First up was a super simple one for breadcrumbs. By default, Mura will put an &#8220;a href&#8221; around the last item in the crumb list. The site I was working on specified that the last item should be plain text (no hyperlink).</p>

<p>Mura makes this nice and easy by extending the contentRenderer.cfc inside your /[siteid]/includes folder. Here is the function which includes my custom argument <em>linkLastItem [bool]</em> to determine whether or not to link the last item:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&lt;</span><span class="nx">cffunction</span> <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;dspCrumblistLinks&quot;</span>  <span class="nx">output</span><span class="o">=</span><span class="s2">&quot;false&quot;</span> <span class="nx">returntype</span><span class="o">=</span><span class="s2">&quot;string&quot;</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="nx">cfargument</span> <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;id&quot;</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;string&quot;</span> <span class="k">default</span><span class="o">=</span><span class="s2">&quot;crumblist&quot;</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="nx">cfargument</span> <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;separator&quot;</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;string&quot;</span> <span class="k">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="nx">cfargument</span> <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;linkLastItem&quot;</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;boolean&quot;</span> <span class="nx">required</span><span class="o">=</span><span class="s2">&quot;false&quot;</span> <span class="k">default</span><span class="o">=</span><span class="s2">&quot;true&quot;</span> <span class="nx">hint</span><span class="o">=</span><span class="s2">&quot;Whether to generate an &#39;a href&#39; for the last crumb item&quot;</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'>  <span class="o">&lt;</span><span class="nx">cfset</span> <span class="kd">var</span> <span class="nx">thenav</span><span class="o">=</span><span class="s2">&quot;&quot;</span> <span class="o">/&gt;</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="nx">cfset</span> <span class="kd">var</span> <span class="nx">theOffset</span><span class="o">=</span><span class="nx">arrayLen</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">crumbdata</span><span class="p">)</span><span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">navOffSet</span> <span class="o">/&gt;</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="nx">cfset</span> <span class="kd">var</span> <span class="nx">I</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">/&gt;</span>
</span><span class='line'>
</span><span class='line'>  <span class="o">&lt;</span><span class="nx">cfif</span> <span class="nx">arrayLen</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">crumbdata</span><span class="p">)</span> <span class="nx">gt</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">navOffSet</span><span class="p">)</span><span class="o">&gt;</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="nx">cfsavecontent</span> <span class="nx">variable</span><span class="o">=</span><span class="s2">&quot;theNav&quot;</span><span class="o">&gt;</span>
</span><span class='line'>          <span class="o">&lt;</span><span class="nx">cfoutput</span><span class="o">&gt;&lt;</span><span class="nx">ul</span> <span class="nx">id</span><span class="o">=</span><span class="s2">&quot;#arguments.id#&quot;</span><span class="o">&gt;</span>
</span><span class='line'>              <span class="o">&lt;</span><span class="nx">cfloop</span> <span class="nx">from</span><span class="o">=</span><span class="s2">&quot;#theOffset#&quot;</span> <span class="nx">to</span><span class="o">=</span><span class="s2">&quot;1&quot;</span> <span class="nx">index</span><span class="o">=</span><span class="s2">&quot;I&quot;</span> <span class="nx">step</span><span class="o">=</span><span class="s2">&quot;-1&quot;</span><span class="o">&gt;</span>
</span><span class='line'>                  <span class="o">&lt;</span><span class="nx">cfif</span> <span class="nx">I</span> <span class="nx">neq</span> <span class="mi">1</span><span class="o">&gt;</span>
</span><span class='line'>                      <span class="o">&lt;</span><span class="nx">li</span> <span class="kr">class</span><span class="o">=</span><span class="s2">&quot;#iif(I eq theOffset,de(&#39;first&#39;),de(&#39;&#39;))#&quot;</span><span class="o">&gt;</span>
</span><span class='line'>                      <span class="o">&lt;</span><span class="nx">cfif</span> <span class="nx">i</span> <span class="nx">neq</span> <span class="nx">theOffset</span><span class="o">&gt;</span><span class="err">#</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">separator</span><span class="err">#</span><span class="o">&lt;</span><span class="err">/cfif&gt;</span>
</span><span class='line'>                      <span class="err">#</span><span class="nx">addlink</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">crumbdata</span><span class="p">[</span><span class="nx">I</span><span class="p">].</span><span class="nx">type</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">crumbdata</span><span class="p">[</span><span class="nx">I</span><span class="p">].</span><span class="nx">filename</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">crumbdata</span><span class="p">[</span><span class="nx">I</span><span class="p">].</span><span class="nx">menutitle</span><span class="p">,</span> <span class="s1">&#39;_self&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">crumbdata</span><span class="p">[</span><span class="nx">I</span><span class="p">].</span><span class="nx">contentid</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">crumbdata</span><span class="p">[</span><span class="nx">I</span><span class="p">].</span><span class="nx">siteid</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nx">application</span><span class="p">.</span><span class="nx">configBean</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(),</span> <span class="nx">application</span><span class="p">.</span><span class="nx">configBean</span><span class="p">.</span><span class="nx">getStub</span><span class="p">(),</span> <span class="nx">application</span><span class="p">.</span><span class="nx">configBean</span><span class="p">.</span><span class="nx">getIndexFile</span><span class="p">(),</span> <span class="nx">event</span><span class="p">.</span><span class="nx">getValue</span><span class="p">(</span><span class="s1">&#39;showMeta&#39;</span><span class="p">),</span><span class="mi">0</span><span class="p">)</span><span class="err">#</span><span class="o">&lt;</span><span class="err">/li&gt;</span>
</span><span class='line'>                  <span class="o">&lt;</span><span class="nx">cfelse</span><span class="o">&gt;</span>
</span><span class='line'>                      <span class="o">&lt;</span><span class="nx">li</span> <span class="kr">class</span><span class="o">=</span><span class="s2">&quot;#iif(arraylen(this.crumbdata),de(&#39;last&#39;),de(&#39;first&#39;))#&quot;</span><span class="o">&gt;</span>
</span><span class='line'>                          <span class="o">&lt;</span><span class="nx">cfif</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">linkLastItem</span><span class="o">&gt;</span>
</span><span class='line'>                              <span class="err">#</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">separator</span><span class="err">##</span><span class="nx">addlink</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">crumbdata</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">type</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">crumbdata</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">filename</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">crumbdata</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">menutitle</span><span class="p">,</span> <span class="s1">&#39;_self&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">crumbdata</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">contentid</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">crumbdata</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">siteid</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nx">application</span><span class="p">.</span><span class="nx">configBean</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(),</span> <span class="nx">application</span><span class="p">.</span><span class="nx">configBean</span><span class="p">.</span><span class="nx">getStub</span><span class="p">(),</span> <span class="nx">application</span><span class="p">.</span><span class="nx">configBean</span><span class="p">.</span><span class="nx">getIndexFile</span><span class="p">(),</span><span class="nx">event</span><span class="p">.</span><span class="nx">getValue</span><span class="p">(</span><span class="s1">&#39;showMeta&#39;</span><span class="p">),</span><span class="mi">0</span><span class="p">)</span><span class="err">#</span>
</span><span class='line'>                          <span class="o">&lt;</span><span class="nx">cfelse</span><span class="o">&gt;</span>
</span><span class='line'>                              <span class="err">#</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">separator</span><span class="err">##</span><span class="k">this</span><span class="p">.</span><span class="nx">crumbdata</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">menutitle</span><span class="err">#</span>
</span><span class='line'>                          <span class="o">&lt;</span><span class="err">/cfif&gt;</span>
</span><span class='line'>                      <span class="o">&lt;</span><span class="err">/li&gt;</span>
</span><span class='line'>                  <span class="o">&lt;</span><span class="err">/cfif&gt;</span>
</span><span class='line'>              <span class="o">&lt;</span><span class="err">/cfloop&gt;</span>
</span><span class='line'>          <span class="o">&lt;</span><span class="err">/ul&gt;&lt;/cfoutput&gt;</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="err">/cfsavecontent&gt;</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="err">/cfif&gt;</span>
</span><span class='line'>
</span><span class='line'>  <span class="o">&lt;</span><span class="nx">cfreturn</span> <span class="nx">trim</span><span class="p">(</span><span class="nx">theNav</span><span class="p">)</span><span class="o">&gt;</span>
</span><span class='line'><span class="o">&lt;</span><span class="err">/cffunction&gt;</span>
</span></code></pre></td></tr></table></div></figure>




		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2011-05-31T22:31:00+10:00" pubdate data-updated="true">May 31<span>st</span>, 2011</time></div>
	<div class="tags">


	<a class='category' href='/categories/coldfusion/'>ColdFusion</a>, <a class='category' href='/categories/mura/'>Mura</a>, <a class='category' href='/categories/railo/'>Railo</a>


</div>
	
		<div class="comments"><a href="/2011/05/31/mura-overriding-dspcrumblistlinks//page/4/index.html#disqus_thread">Comments</a></div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/2011/05/29/farcry-to-mura-migrating-data-from-farcry-to-mura-cms/">
		
			FarCry to Mura - Migrating Data From FarCry to Mura CMS</a>
	</h2>
	<div class="entry-content">
		<p>For years <a href="http://www.learnosity.com/">here at Learnosity</a> we&#8217;ve been using <a href="http://www.farcrycore.org/">FarCry</a> for most of our CMS requirements (yes, I know that FarCry, or rather farcrycms, is a lot more than just a CMS).</p>

<p>For one reason or another we decided it was time to look at some of the other options for content management in the ColdFusion sphere, <a href="http://www.getmura.com/">Mura CMS</a> was a likely candidate for evalutation.</p>

<p>We had a small-ish site that was already running in FarCry 6+ which we wanted to port to Mura so we could really get a feel for how things worked in Mura-land. If things go well we may decide to move more sites across, so I wanted a way to migrate existing content from a FarCry database to a Mura one. A quick search for something to do this came up blank so I spent half a day coming up with a little tool to do this. Here it is in case anyone else might find it useful.</p>

<p>You can <a href="https://github.com/michaelsharman/farcrytomura">find the project on github</a> (https://github.com/michaelsharman/farcrytomura), below is the &#8220;help&#8221; page I added:</p>

<h2>Introduction</h2>

<p>This script imports basic navigation and HTML data from an existing FarCry database into a Mura one.</p>

<h2>Requirements</h2>

<p>This was built on</p>

<ul>
<li>Railo 3.2+</li>
<li>ColdFusion 7+</li>
<li>FarCry 6+</li>
<li>Mura 5.4+</li>
<li>MySQL 5+</li>
</ul>


<p>Not sure about FarCry 5, you should be ok as I don&#8217;t think the v6 schema changes will effect this script</p>

<p>To make things easier, session management must enabled</p>

<h2>Installation</h2>

<p>Probably easiest to put this folder (farcrytomura) in the webroot of an existing project/vhost, then call it from http://www.yourproject.com/farcrytomura/</p>

<p>If you want, you can setup a project/vhost specifically for this, but it&#8217;s not necessary.</p>

<p>This script has its own Application.cfc to avoid scope conflict</p>

<p>Caveat - the ColdFusion/Railo server (instance/context) that you run this from needs to have BOTH dsn&#8217;s (the FarCry and Mura ones) in the cf admin</p>

<h2>FarCry content types</h2>

<p>Currently we examine the FarCry navigation tree and bring across the entire structure underneath &#8216;Root&#8217; (i.e. any nLevel 2+ nodes)</p>

<p>If people want it, we can extend the functionality to import from a specific node, e.g. from &#8216;Home&#8217;.This would be handy if your FarCry site has secondary/utility navigation etc that you want imported separately.</p>

<p>Although all navigation nodes will be created in Mura, the only actual content that is imported is dmHTML, we ignore:</p>

<ul>
<li>dmInclude</li>
<li>dmLink</li>
<li>Anything but the first content object under a navigation node</li>
<li>dmNews, dmEvent or any other &#8220;dynamic&#8221; content type</li>
<li>Custom tree content types</li>
</ul>


<p>Basically we import all navigation nodes under the site tab, from &#8220;Root&#8221; down, including the HTML content.</p>

<h2>FarCry homepage content</h2>

<p>Currently we ignore the farcry homepage content because we assume there is at least a &#8220;home&#8221; page in Mura. This is a TODO</p>

<h2>SES URLs</h2>

<p>Mura ses url&#8217;s are created on import based off the title of the page from FarCry. This should be the default behaviour as if you were created a page from within Mura admin.</p>

<p>Currently we&#8217;re NOT importing the FarCry friendly URL into Mura.</p>

<h2>Rolling back</h2>

<p>If you want to rollback the import, you&#8217;ll need to:</p>

<pre><code>DELETE FROM tcontent WHERE siteID = '[yoursite]' AND lastUpdateBy = 'farcrytomura'
</code></pre>

<h2>TODOs</h2>

<ul>
<li>Ability to select the page template from Mura</li>
<li>When previewing the Mura navigation tree, indent properly</li>
<li>Import the FarCry &#8220;home&#8221; page content</li>
<li>Handle farcry secondary/utility nav&#8217;s (anything else at the same level as &#8220;home&#8221;)</li>
<li>Fix sortorder on sub items, they work fine but not as neat as they could be</li>
</ul>


<p><img src="/images/uploads/2011/05/farcrytomura_setdns.png" alt="" />
<img src="/images/uploads/2011/05/farcrytomura_setmurasiteid.png" alt="" />
<img src="/images/uploads/2011/05/farcrytomura_checkfarcry.png" alt="" />
<img src="/images/uploads/2011/05/farcrytomura_checkmura.png" alt="" />
<img src="/images/uploads/2011/05/farcrytomura_domigration.png" alt="" />
<img src="/images/uploads/2011/05/farcrytomura_help.png" alt="" /></p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2011-05-29T23:00:00+10:00" pubdate data-updated="true">May 29<span>th</span>, 2011</time></div>
	<div class="tags">


	<a class='category' href='/categories/coldfusion/'>ColdFusion</a>, <a class='category' href='/categories/farcry/'>Farcry</a>, <a class='category' href='/categories/mura/'>Mura</a>, <a class='category' href='/categories/railo/'>Railo</a>


</div>
	
		<div class="comments"><a href="/2011/05/29/farcry-to-mura-migrating-data-from-farcry-to-mura-cms//page/4/index.html#disqus_thread">Comments</a></div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/2011/05/11/wordpress-detecting-the-categories-of-a-post/">
		
			Wordpress - Detecting the Categories of a Post</a>
	</h2>
	<div class="entry-content">
		<p>I was creating a Wordpress child theme (the best way to modify/override your themes) tonight and had the need to have different display options depending on which categories the blog article had. So for example if I had a post categorised with &#8220;portfolio&#8221;, I wanted to hide the comments form which usually sits at the bottom of a post.</p>

<p>The following snippet will loop over all post categories, if it finds that &#8220;portfolio&#8221; is one of the categories assigned to the current post then a local variable (boolean) is set which you can use to hide Wordpress functions anywhere in the current template.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="cp">&lt;?php</span>
</span><span class='line'>  <span class="nv">$isPortfolio</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
</span><span class='line'>  
</span><span class='line'>  <span class="nv">$categories</span> <span class="o">=</span> <span class="nx">get_the_category</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">foreach</span><span class="p">(</span><span class="nv">$categories</span> <span class="k">as</span> <span class="nv">$cat</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nv">$cat</span><span class="o">-&gt;</span><span class="na">cat_name</span> <span class="o">==</span> <span class="s1">&#39;portfolio&#39;</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="nv">$isPortfolio</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
</span><span class='line'>          <span class="k">break</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>        
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="cp">?&gt;</span><span class="x"></span>
</span></code></pre></td></tr></table></div></figure>


<p>These changes were at the top of my child theme&#8217;s <em>single.php</em> template. Not displaying the comments form was as simple as:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="cp">&lt;?php</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$isPortfolio</span><span class="p">){</span><span class="nx">comments_template</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="k">true</span><span class="p">);}</span> <span class="cp">?&gt;</span><span class="x"></span>
</span></code></pre></td></tr></table></div></figure>


<h2>Update 12th May 2011</h2>

<p>Thanks to Martin in the comments below for alerting me to the fact that Wordpress already has something for this, has_category($category, $post);</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="cp">&lt;?php</span> <span class="nv">$isPortfolio</span> <span class="o">=</span> <span class="nx">has_category</span><span class="p">(</span><span class="s1">&#39;portfolio&#39;</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="x"></span>
</span></code></pre></td></tr></table></div></figure>


<p>Note I didn&#8217;t need the 2nd argument as it defaults to the current post.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2011-05-11T23:48:49+10:00" pubdate data-updated="true">May 11<span>th</span>, 2011</time></div>
	<div class="tags">


	<a class='category' href='/categories/php/'>PHP</a>, <a class='category' href='/categories/wordpress/'>Wordpress</a>


</div>
	
		<div class="comments"><a href="/2011/05/11/wordpress-detecting-the-categories-of-a-post//page/4/index.html#disqus_thread">Comments</a></div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/2011/05/11/fancybox-for-wordpress-plugin-not-working/">
		
			FancyBox for Wordpress Plugin Not Working</a>
	</h2>
	<div class="entry-content">
		<p>I just spent some time figuring out why fancybox wasn&#8217;t working tonight (image thumbnails were just linking to the large image&#8230;not loading the overlay as they should). It now seems obvious after the fact but as far as I can see it&#8217;s NOT in the fancybox docs.</p>

<p>When you insert your gallery from the media section of a page in wp-admin, you HAVE to choose &#8220;Image File&#8221;, not &#8220;Attachment Page&#8221;. That&#8217;s it!</p>

<p>Annoyingly if you set the option to &#8220;Image File&#8221;, save and exit&#8230;the next time you edit the page Wordpress doesn&#8217;t remember your decision and instead checks the &#8220;Attachment Page&#8221; radio option.</p>

<p>Hope this helps some people :)</p>

<p><img src="/images/uploads/2011/05/gallery_settings.jpg" alt="wordpress gallery settings" /></p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2011-05-11T23:42:10+10:00" pubdate data-updated="true">May 11<span>th</span>, 2011</time></div>
	<div class="tags">


	<a class='category' href='/categories/php/'>PHP</a>, <a class='category' href='/categories/wordpress/'>Wordpress</a>


</div>
	
		<div class="comments"><a href="/2011/05/11/fancybox-for-wordpress-plugin-not-working//page/4/index.html#disqus_thread">Comments</a></div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/2011/04/17/farcry-twitter-plugin/">
		
			FarCry Twitter Plugin</a>
	</h2>
	<div class="entry-content">
		<p>I spent a couple of hours on a FarCry plugin for twitter yesterday based off their official API.</p>

<h2>What?</h2>

<p>This plugin basically wraps up the options that the offical twitter API gives you including:</p>

<ul>
<li>Twitter username</li>
<li>Showing avatars, timestamps, hashtags etc</li>
<li>Theme appearance (colours for background and text etc</li>
<li>Dimensions of widget</li>
</ul>


<p>For more, visit the <a href="https://github.com/michaelsharman/farcrytwitter">project page,</a> download it and have a play.</p>

<h2>Why?</h2>

<p>Although the twitter API is super simple to implement, it&#8217;s always handy to have things wrapped up as a plugin so we can easily create as many widgets as we need and handle caching etc. Caching is important as the API is rate limited to 150 requests per hour, using FarCry&#8217;s object broker will get around this.</p>

<p>Plus it makes it simple for non techy people to get going with the goodness of twitter.</p>

<h2>Where?</h2>

<p>The project is currently hosted at GitHub&#8230;where else?
<a href="https://github.com/michaelsharman/farcrytwitter">farcrytwitter project page</a></p>

<h2>Requirements?</h2>

<p>FarCry 6+ (although I think it&#8217;ll work on 5+ I haven&#8217;t tested)
Railo 3.x / ColdFusion 8+
MySQL / MSSQL (or whatever database your version of FarCry supports)</p>

<p><img src="/images/uploads/2011/04/publishingrule.png" alt="" />
<img src="/images/uploads/2011/04/widgetsample-150x150.png" alt="" /></p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2011-04-17T22:04:49+10:00" pubdate data-updated="true">Apr 17<span>th</span>, 2011</time></div>
	<div class="tags">


	<a class='category' href='/categories/coldfusion/'>ColdFusion</a>, <a class='category' href='/categories/farcry/'>Farcry</a>


</div>
	
		<div class="comments"><a href="/2011/04/17/farcry-twitter-plugin//page/4/index.html#disqus_thread">Comments</a></div>
	
</div></article>

<nav id="pagenavi">
    
        <a href="/page/3/" class="prev">Prev</a>
    
    
        <a href="/page/5/" class="next">Next</a>
    
    <div class="center"><a href="/blog/archives">Blog Archives</a></div>
</nav></div>
	<footer id="footer" class="inner">Copyright &copy; 2013

    Michael Sharman

</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->


<script type="text/javascript">
      var disqus_shortname = 'chapter31';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-306772-2']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>



</body>
</html>
