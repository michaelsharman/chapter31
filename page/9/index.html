
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>chapter31 &raquo;</title>
	<meta name="author" content="Michael Sharman">

	
	<meta name="description" content="I&#8217;m sure most ColdFusion developers know that the application scope has a built-in variable called application.applicationName which stores &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="chapter31 &raquo;" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
</head>

<body>
	<header id="header" class="inner"><h1><a href="/">chapter31 &raquo;</a></h1>
<nav id="main-nav"><ul class="main-navigation">
  <li><a href="http://michaelsharman.com/">about</a></li>
  <li><a href="https://github.com/michaelsharman/">projects</a></li>
  <li><a href="/shell-commands">shell</a></li>
  <li><a href="http://tools.chapter31.com/">tools</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul class="main-navigation">
  <li><a href="http://michaelsharman.com/">about</a></li>
  <li><a href="https://github.com/michaelsharman/">projects</a></li>
  <li><a href="/shell-commands">shell</a></li>
  <li><a href="http://tools.chapter31.com/">tools</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="http://www.google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:chapter31.com">
			</form>
		</div>
	</div>
</nav>
<nav id="sub-nav" class="alignright">
	<div class="social">
		
		
		
		<a class="twitter" href="http://twitter.com/michaelsharman" title="Twitter">Twitter</a>
		
		
		<a class="github" href="https://github.com/michaelsharman" title="GitHub">GitHub</a>
		
    
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	</div>
	<form class="search" action="http://www.google.com/search" method="get">
		<input class="alignright" type="text" name="query" results="0">
        <input type="hidden" name="q" value="site:chapter31.com"
        onkeydown="if (event.keyCode === 13 || event.which === 13) { location.href='http://www.google.com/search?q=' + site:chapter31.com + ' ' + encodeURIComponent(document.getElementById('query').value);}">
	</form>
</nav>

</header>
	
		

	
	<div id="content" class="inner">


    <article class="post">
	<h2 class="title">
		
		<a href="/2008/11/24/use-applicationapplicationname-careful-when-re-initing-your-app/">
		
			Use application.applicationName? Careful When Re-initing Your App</a>
	</h2>
	<div class="entry-content">
		<p>I&#8217;m sure most ColdFusion developers know that the application scope has a built-in variable called <em>application.applicationName</em> which stores the name of the application that you specify in the cfapplication tag or the <em>this.name</em> value if your using <a href="http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=AppEvents_01.html">Application.cfc</a>. This doesn&#8217;t appear when you dump the application scope&#8230;but it&#8217;s there.</p>

<p>Today I wanted to use this variable, everything was working fine until I ran into an error when I re-initialised my application via a URL variable. The error I received was:</p>

<blockquote><p>Element APPLICATIONNAME is undefined in APPLICATION.</p></blockquote>

<p><a href="http://www.lynchconsulting.com.au/blog/">Marko</a> helped me out with the obvious&#8230;as I had cleared my application scope the &#8220;applicationName&#8221; variable didn&#8217;t exist for the page request. Let me show you how I was re-initialising the application scope; the following 2 methods are declared in my Application.cfc, checkReInit() is called from onRequestStart():</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&lt;</span><span class="nx">cffunction</span> <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;checkReInit&quot;</span> <span class="nx">access</span><span class="o">=</span><span class="s2">&quot;private&quot;</span> <span class="nx">output</span><span class="o">=</span><span class="s2">&quot;false&quot;</span> <span class="nx">returntype</span><span class="o">=</span><span class="s2">&quot;void&quot;</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="nx">cfscript</span><span class="o">&gt;</span>      
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">structKeyExists</span><span class="p">(</span><span class="nx">URL</span><span class="p">,</span> <span class="s2">&quot;reinit&quot;</span><span class="p">)</span> <span class="nx">AND</span> <span class="nx">URL</span><span class="p">.</span><span class="nx">reinit</span> <span class="nx">EQ</span> <span class="mi">101</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="nx">clearAppScope</span><span class="p">();</span>
</span><span class='line'>      <span class="p">}</span>        
</span><span class='line'>  <span class="o">&lt;</span><span class="err">/cfscript&gt;</span>
</span><span class='line'><span class="o">&lt;</span><span class="err">/cffunction&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">cffunction</span> <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;clearAppScope&quot;</span> <span class="nx">access</span><span class="o">=</span><span class="s2">&quot;private&quot;</span> <span class="nx">output</span><span class="o">=</span><span class="s2">&quot;false&quot;</span> <span class="nx">returnType</span><span class="o">=</span><span class="s2">&quot;void&quot;</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="nx">cfscript</span><span class="o">&gt;</span>      
</span><span class='line'>      <span class="nx">structClear</span><span class="p">(</span><span class="nx">application</span><span class="p">);</span>
</span><span class='line'>      <span class="nx">onApplicationStart</span><span class="p">();</span>        
</span><span class='line'>  <span class="o">&lt;</span><span class="err">/cfscript&gt;</span>
</span><span class='line'><span class="o">&lt;</span><span class="err">/cffunction&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>As you can see in the sample code above, if a URL parameter called <em>reinit</em> exists with the value of 101 the application scope is cleared then re-inited via onApplicationStart().</p>

<p><em><strong>**Note:</strong></em> I <em>really</em> don&#8217;t recommend this type of code for a production environment, in fact this is a cut down version of what the actual code is&#8230;we don&#8217;t run applications with the ability to re-initialise the application scope via the public URL from a production site.</p>

<p>Anyway&#8230;clearAppScope() essentially clears whatever is in the application scope then calls onApplicationStart() to re-initialise the application. This is all good and well except <em>this.name</em> is not defined inside onApplicationStart(), it&#8217;s defined in the constructor area at the top of the file so any code in your .cfm template referencing <em>application.applicationName</em> will fail because this value won&#8217;t exist.</p>

<p>I would have thought a simple page refresh would rectify any issues (as this.name would be called the next time a template was executed) but I was still getting errors.</p>

<p>A simple fix is to explicitly set the application name value if and when you clear the app scope. That way it will be available to your application as expected.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="o">&lt;</span><span class="n">cffunction</span> <span class="nb">name</span><span class="o">=</span><span class="s2">&quot;clearAppScope&quot;</span> <span class="n">access</span><span class="o">=</span><span class="s2">&quot;private&quot;</span> <span class="n">output</span><span class="o">=</span><span class="s2">&quot;false&quot;</span> <span class="n">returnType</span><span class="o">=</span><span class="s2">&quot;void&quot;</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="n">cfscript</span><span class="o">&gt;</span>       
</span><span class='line'>      <span class="n">structClear</span><span class="p">(</span><span class="n">application</span><span class="p">);</span>
</span><span class='line'>      <span class="n">application</span><span class="o">.</span><span class="n">applicationName</span> <span class="o">=</span> <span class="n">this</span><span class="o">.</span><span class="n">name</span><span class="p">;</span>
</span><span class='line'>      <span class="n">onApplicationStart</span><span class="p">();</span>     
</span><span class='line'>  <span class="o">&lt;</span><span class="sr">/cfscript&gt;</span>
</span><span class='line'><span class="sr">&lt;/</span><span class="n">cffunction</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure>


		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2008-11-24T21:54:14+11:00" pubdate data-updated="true">Nov 24<span>th</span>, 2008</time></div>
	<div class="tags">


	<a class='category' href='/categories/coldfusion/'>ColdFusion</a>


</div>
	
		<div class="comments"><a href="/2008/11/24/use-applicationapplicationname-careful-when-re-initing-your-app//page/9/index.html#disqus_thread">Comments</a></div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/2008/11/22/cfqueryparam-does-not-work-in-order-by-what-are-my-options/">
		
			Cfqueryparam Does Not Work in ORDER by, What Are My Options?</a>
	</h2>
	<div class="entry-content">
		<p>For those that don&#8217;t know, ColdFusion&#8217;s <a href="http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=Tags_p-q_18.html">cfqueryparam</a> won&#8217;t work on a SQL ORDER BY clause, so the following <strong>will not work</strong>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&lt;</span><span class="nx">cfquery</span> <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;qGetUsers&quot;</span> <span class="nx">datasource</span><span class="o">=</span><span class="s2">&quot;mydsn&quot;</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="nx">SELECT</span>  <span class="nx">FirstName</span><span class="p">,</span> <span class="nx">LastName</span>
</span><span class='line'>  <span class="nx">FROM</span>        <span class="nx">Users</span>
</span><span class='line'>  <span class="nx">ORDER</span> <span class="nx">BY</span> <span class="o">&lt;</span><span class="nx">cfqueryparam</span> <span class="nx">cfsqltype</span><span class="o">=</span><span class="s2">&quot;cf_sql_varchar&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;#arguments.order#&quot;</span> <span class="o">/&gt;</span>
</span><span class='line'><span class="o">&lt;</span><span class="err">/cfquery&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>This is really nothing new, people have been talking about this for years but with the spate of recent SQL injection attacks (<em>note that I meant to publish this around sept 08 but got sidetracked!</em>) it&#8217;s worth mentioning again because there certainly are times where you want dynamic ordering based on a URL or form value.</p>

<p>So what does this mean to you? How are you to manage dynamic ORDER BY values? The most common scenario I&#8217;ve come across is to use a list of allowed <em>order by</em> column values as defined by the developer. Something like:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&lt;</span><span class="nx">cfset</span> <span class="nx">lValidOrderBy</span> <span class="o">=</span> <span class="s2">&quot;firstName, lastName, dateTimeCreated&quot;</span> <span class="o">/&gt;</span>
</span><span class='line'><span class="o">&lt;</span><span class="nx">cfif</span> <span class="nx">listFindNoCase</span><span class="p">(</span><span class="nx">lValidOrderBy</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">order</span><span class="p">)</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="nx">cfset</span> <span class="nx">orderBy</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">order</span> <span class="o">/&gt;</span>
</span><span class='line'><span class="o">&lt;</span><span class="nx">cfelse</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="c">&lt;!--</span><span class="o">-</span> <span class="nx">Default</span> <span class="nx">order</span> <span class="nx">by</span> <span class="nx">column</span> <span class="o">---&gt;</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="nx">cfset</span> <span class="nx">orderBy</span> <span class="o">=</span> <span class="s2">&quot;lastName&quot;</span> <span class="o">/&gt;</span>
</span><span class='line'><span class="o">&lt;</span><span class="err">/cfif&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nx">cfquery</span> <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;qGetUsers&quot;</span> <span class="nx">dsn</span><span class="o">=</span><span class="s2">&quot;mydsn&quot;</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="nx">SELECT</span>  <span class="nx">FirstName</span><span class="p">,</span> <span class="nx">LastName</span>
</span><span class='line'>  <span class="nx">FROM</span>    <span class="nx">Users</span>
</span><span class='line'>  <span class="nx">ORDER</span> <span class="nx">BY</span> <span class="err">#</span><span class="nx">orderBy</span><span class="err">#</span>
</span><span class='line'><span class="o">&lt;</span><span class="err">/cfquery&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Another approach might be to use a switch with either a <strong>literal </strong>value or a <strong>keyword </strong>which might map to a list of options like:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">SELECT</span> <span class="nx">FirstName</span><span class="p">,</span> <span class="nx">LastName</span>
</span><span class='line'><span class="nx">FROM</span>   <span class="nx">Users</span>
</span><span class='line'><span class="nx">ORDER</span> <span class="nx">BY</span>
</span><span class='line'><span class="o">&lt;</span><span class="nx">cfswitch</span> <span class="nx">expression</span><span class="o">=</span><span class="s2">&quot;#arguments.order#&quot;</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="c">&lt;!--</span><span class="o">-</span> <span class="nx">A</span> <span class="nx">literal</span> <span class="nx">value</span> <span class="o">---&gt;</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="nx">cfcase</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;lastName&quot;</span><span class="o">&gt;</span>
</span><span class='line'>      <span class="nx">lastName</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="err">/cfcase&gt;</span>
</span><span class='line'>  <span class="c">&lt;!--</span><span class="o">-</span> <span class="nx">A</span> <span class="nx">keyword</span> <span class="nx">defined</span> <span class="nx">by</span> <span class="nx">the</span> <span class="nx">application</span> <span class="o">---&gt;</span>  
</span><span class='line'>  <span class="o">&lt;</span><span class="nx">cfcase</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;user-reverse&quot;</span><span class="o">&gt;</span>
</span><span class='line'>      <span class="nx">lastName</span> <span class="nx">DESC</span><span class="p">,</span> <span class="nx">firstName</span> <span class="nx">ASC</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="err">/cfcase&gt;</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="nx">cfdefaultcase</span><span class="o">&gt;</span>
</span><span class='line'>      <span class="nx">lastName</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="err">/cfdefaultcase&gt;</span>
</span><span class='line'><span class="o">&lt;</span><span class="err">/cfswitch&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>I like this approach as the &#8220;mapped&#8221; keyword allows you to use <em>order by</em> values which aren&#8217;t so simple as a basic literal.</p>

<p>This means when you want to order by multiple columns, use ASC/DESC or a combination of both (which are of course perfectly valid and real-world options) you can define these keywords in your application and still benefit from the safety of possible SQL injection by utilising the <a href="http://www.cfquickdocs.com/#cfswitch">cfswitch</a> statement.</p>

<p>Don&#8217;t forget to always sanitise ANY USER INPUT!!!</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2008-11-22T13:15:50+11:00" pubdate data-updated="true">Nov 22<span>nd</span>, 2008</time></div>
	<div class="tags">


	<a class='category' href='/categories/coldfusion/'>ColdFusion</a>, <a class='category' href='/categories/databases/'>Databases</a>


</div>
	
		<div class="comments"><a href="/2008/11/22/cfqueryparam-does-not-work-in-order-by-what-are-my-options//page/9/index.html#disqus_thread">Comments</a></div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/2008/11/19/logging-all-mysql-queries-on-mac-osx/">
		
			Logging All MySQL Queries on Mac OSX</a>
	</h2>
	<div class="entry-content">
		<p><a href="http://www.lynchconsulting.com.au/go/blog">We&#8217;ve</a> been doing some debugging of a 3rd party application recently where we had some possible performance concerns under a certain load and/or size of data in the database. What we wanted to know was exactly which queries (and how many) where hitting the database on a specific page request.</p>

<p>The simplest method was to turn on logging of all queries on the local MySQL database, this is turned off by default as like most debugging techniques it adds overhead. To do this I needed to make a small change in the config file and restart MySQL. However it seems that a Mac installation of MySQL doesn&#8217;t create this config file by default which is a little confusing.</p>

<p>Here are the steps taken to turn on logging of all queries:</p>

<p><strong>Create a &#8220;my.cnf&#8221; file (if it doesn&#8217;t already exist)</strong></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo touch /etc/my.cnf</span></code></pre></td></tr></table></div></figure>


<p><strong>Add an entry to my.cnf telling MySQL where to write the log entries</strong></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[mysqld]
</span><span class='line'>log=/var/log/mysqld.log</span></code></pre></td></tr></table></div></figure>


<p><strong>Create the log file</strong></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo touch /var/log/mysqld.log</span></code></pre></td></tr></table></div></figure>


<p><strong>Restart MySQL</strong></p>

<p>To view the logs simply open mysqld.log in your favourite editor, or you can tail it in the terminal:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>tail -f /var/log/mysqld.log</span></code></pre></td></tr></table></div></figure>


<p>This is a really handy way to see all the database traffic from your application. We also use MySQL Adminstrator to <a href="http://www.chapter31.com/2008/02/21/using-mysql-administrator-to-view-real-time-stats/">view some real-time stats</a> in terms of the total number of queries being executed.</p>

<p>Remember once you&#8217;ve finished your debugging to turn logging off in my.cnf, I just comment it out (with a #) and restart MySQL:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="err">#</span><span class="p">[</span><span class="nx">mysqld</span><span class="p">]</span>
</span><span class='line'><span class="err">#</span><span class="nx">log</span><span class="o">=</span><span class="err">/var/log/mysqld.log</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>Note:</strong> An easy way to check if you do have a my.cnf file is to open up <a href="http://dev.mysql.com/downloads/gui-tools/5.0.html">MySQL Administrator</a> and click the &#8220;Options&#8221; tab. If you get an alert saying &#8220;Configuration File not Found&#8221; then you know you need to go and create one!</p>

<p><a href="/images/uploads/2008/11/picture-11.png"><img src="/images/uploads/2008/11/picture-11-300x132.png" alt="" /></a></p>

<p>Once you have a my.cnf file you have access to the wide array of config options all from MySQL Administrator:</p>

<p><a href="/images/uploads/2008/11/picture-3.png"><img src="/images/uploads/2008/11/picture-3-300x204.png" alt="" /></a></p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2008-11-19T23:19:00+11:00" pubdate data-updated="true">Nov 19<span>th</span>, 2008</time></div>
	<div class="tags">


	<a class='category' href='/categories/databases/'>Databases</a>


</div>
	
		<div class="comments"><a href="/2008/11/19/logging-all-mysql-queries-on-mac-osx//page/9/index.html#disqus_thread">Comments</a></div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/2008/11/15/forgot-to-import-your-coldfusion-tag-libraries/">
		
			Forgot to Import Your ColdFusion Tag Libraries?</a>
	</h2>
	<div class="entry-content">
		<p>I&#8217;ve been bitten by the &#8220;forgetting to add <cfimport>&#8221; when importing ColdFusion custom tags before. If you also have then you know what I mean and have shared the frustration&#8230;basically your custom tag does nothing but you get no error from ColdFusion, nada, zip! Depending on the scenario this can lead to some wasted hair pulling time!</p>

<p>The reason is of course that the syntax to import custom tags is perfectly valid XML which is ignored by ColdFusion server because you forgot to add <cfimport> tag. As such the output goes straight to the browser which treats it as markup&#8230;markup which it knows nothing about therefore it ignores it and you have no idea why your server side script isn&#8217;t doing anything :(</p>

<p>Well today I saw a brilliantly simple solution by the newest <a href="http://www.daemon.com.au/">Daemonite</a> <a href="http://robrohan.com/">Rob Rohan</a>.</p>

<p>From <a href="http://groups.google.com/group/farcry-dev/browse_thread/thread/e6ada060cd04c91b?hl=en">Rob&#8217;s post</a> on the farcry-dev mailing list:</p>

<blockquote><p>however, since the &lt;skin:build> type tags will make it all the way to the browser, we can style the tag in the browser to alert the problem.</p>

<p>I threw together a quick CSS file that you can include into your  project style sheet that will draw attention to the error. Just add this to your site style sheet:</p>

<p>@import url(&#8216;http://robrohan.com/farcrystuff/missingTag.css&#8217;);</p>

<p>Or download the css file and put it where you want. That will style any FarCry taglib with block, red so you can spot the mistake right off.</p></blockquote>

<p>While this tip is fantastic and easily flexible for use in any ColdFusion project, keep in mind that in its current state it will only be of use for FarCry developers.</p>

<p><strong>Also note</strong> that the custom tag syntax (e.g. &lt;skin:buildlink>) will only make its way to the browser (as part of the html source to be parsed by the css) if it&#8217;s inside <cfoutput> tags. If not then you&#8217;ll have the same problem as before where you&#8217;re tags are doing nothing, you&#8217;re not getting an error from ColdFusion AND the css won&#8217;t style anything because the xml tags aren&#8217;t in the source code :(</p>

<p>Here is a screen shot of the css in action, as you can see it&#8217;s hard to miss your mistake!</p>

<p><a href="/images/uploads/2008/11/cfimport_css.jpg"><img src="/images/uploads/2008/11/cfimport_css-300x92.jpg" alt="" /></a></p>

<p>Many thanks to Rob for the tip, here is the <a href="http://robrohan.com/farcrystuff/missingTag.css">link to his css</a>.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2008-11-15T20:55:58+11:00" pubdate data-updated="true">Nov 15<span>th</span>, 2008</time></div>
	<div class="tags">


	<a class='category' href='/categories/coldfusion/'>ColdFusion</a>, <a class='category' href='/categories/farcry/'>Farcry</a>


</div>
	
		<div class="comments"><a href="/2008/11/15/forgot-to-import-your-coldfusion-tag-libraries//page/9/index.html#disqus_thread">Comments</a></div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/2008/11/12/google-releases-video-chat/">
		
			Google Releases Video Chat</a>
	</h2>
	<div class="entry-content">
		<p>For those that use gtalk/gmail, google have finally caught up and released <a href="http://mail.google.com/videochat">voice and video chat</a>.</p>

<p>They even help you <a href="http://www.google.com/mail/help/videochat/learnmore.html">buy a webcam</a>!</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2008-11-12T14:04:21+11:00" pubdate data-updated="true">Nov 12<span>th</span>, 2008</time></div>
	<div class="tags">


	<a class='category' href='/categories/misc/'>Misc</a>, <a class='category' href='/categories/tools/'>Tools</a>


</div>
	
		<div class="comments"><a href="/2008/11/12/google-releases-video-chat//page/9/index.html#disqus_thread">Comments</a></div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/2008/11/12/var-scoping-how-and-where-do-you-set-your-function-variables/">
		
			Var Scoping - How and Where Do You Set Your Function Variables?</a>
	</h2>
	<div class="entry-content">
		<p>As everybody knows you should var scope ALL local function variables inside ColdFusion components, and these variables must be declared at the top of your function before any other code. If you place other code above a &#8220;var&#8221; scoped variable in your method signature an exception will be thrown.</p>

<p>Depending on how you define you methods this will probably be fine, but I got to thinking recently on how this works with exception handling within your function, specifically for try/catch blocks.</p>

<p>As you can&#8217;t add code above your var scoped variables there is no way to wrap your var scope block in a try/catch block. With this being the case you <em>may</em> have problems if an exception is thrown when you var scope a local variable.</p>

<p>An example of what I&#8217;m talking about:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&lt;</span><span class="nx">cffunction</span> <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;getWorkSchedule&quot;</span> <span class="nx">access</span><span class="o">=</span><span class="s2">&quot;public&quot;</span> <span class="nx">returntype</span><span class="o">=</span><span class="s2">&quot;query&quot;</span><span class="o">&gt;</span>  
</span><span class='line'>  <span class="o">&lt;</span><span class="nx">cfset</span> <span class="kd">var</span> <span class="nx">oUser</span> <span class="o">=</span> <span class="nx">getUserService</span><span class="p">().</span><span class="nx">getUser</span><span class="p">()</span> <span class="o">/&gt;</span>
</span><span class='line'>
</span><span class='line'>  <span class="o">&lt;</span><span class="nx">cftry</span><span class="o">&gt;</span>
</span><span class='line'>      <span class="p">...</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="nx">cfcatch</span><span class="o">&gt;</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="err">/cfcatch&gt;</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="err">/cftry&gt;</span>
</span><span class='line'><span class="o">&lt;</span><span class="err">/cffunction&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>In the fictional example shown above we have a method which returns a users work schedule, the first thing done is retrieving an instance of <em>User</em> from the <em>UserService</em>. As this has been set at the same time we var scope our variable (oUser), what happens if the call to <em>getUserService().getUser()</em> throws an exception? The exception would bubble up to the calling template (the template that called getWorkSchedule()) which might be fine but might also be unexpected.</p>

<p>This is just food for thought, it may be that instead you want to define your method like:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&lt;</span><span class="nx">cffunction</span> <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;getWorkSchedule&quot;</span> <span class="nx">access</span><span class="o">=</span><span class="s2">&quot;public&quot;</span> <span class="nx">returntype</span><span class="o">=</span><span class="s2">&quot;query&quot;</span><span class="o">&gt;</span>  
</span><span class='line'>  <span class="o">&lt;</span><span class="nx">cfset</span> <span class="kd">var</span> <span class="nx">oUser</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span> <span class="o">/&gt;</span>
</span><span class='line'>
</span><span class='line'>  <span class="o">&lt;</span><span class="nx">cftry</span><span class="o">&gt;</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="nx">cfset</span> <span class="nx">oUser</span> <span class="o">=</span> <span class="nx">getUserService</span><span class="p">().</span><span class="nx">getUser</span><span class="p">()</span> <span class="o">/&gt;</span>
</span><span class='line'>      <span class="p">...</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="nx">cfcatch</span><span class="o">&gt;</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="err">/cfcatch&gt;</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="err">/cftry&gt;</span>
</span><span class='line'><span class="o">&lt;</span><span class="err">/cffunction&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Here we take the approach of always declaring our local variables as empty strings or integers etc (simple values) <strong>before</strong> setting explicit values into them. This means all your variables are cleanly defined and you can catch any possible exceptions if you need to inside the try/catch.</p>

<p>The only is that is feels like a bit of double handling because I need to <cfset> my variables twice&#8230;</p>

<p>How do other people handle this? Lend me your thoughts :)</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2008-11-12T11:40:34+11:00" pubdate data-updated="true">Nov 12<span>th</span>, 2008</time></div>
	<div class="tags">


	<a class='category' href='/categories/coldfusion/'>ColdFusion</a>


</div>
	
		<div class="comments"><a href="/2008/11/12/var-scoping-how-and-where-do-you-set-your-function-variables//page/9/index.html#disqus_thread">Comments</a></div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/2008/11/10/invalid-serial-number-when-upgrading-to-flex-builder-3-pro/">
		
			&#8220;Invalid Serial Number&#8221; When Upgrading to Flex Builder 3 Pro</a>
	</h2>
	<div class="entry-content">
		<p>Ok this was annoying&#8230;I had an older trial version of the standalone Flex Builder 3 on my system (Mac 10.5) and wanted to activate it with a new serial for FB3 Professional.</p>

<p>Whenever I entered the serial in &#8220;Help -> Manage Flex Licenses&#8221; I kept getting a message saying &#8220;Invalid serial number&#8221; even though it was a brand new serial. Damn.</p>

<p><a href="http://www.lynchconsulting.com.au/go/blog">Mark</a> gave me the original hint to remove the <em>license.properties</em> file under <em>/Library/Application Support/Adobe/Flex</em> but FB wasn&#8217;t re-creating it when I entered my serial on startup. I needed to create the file manually and enter my serial number. These steps got me going:</p>

<ul>
<li>cd /Library/Application Support/Adobe/Flex</li>
<li>sudo touch license.properties (create the file)</li>
<li>sudo nano license.properties (edit the file)</li>
<li>enter the following &#8220;flexbuilder3=xxxx-xxxx-xxxx-xxxx-xxxx-xxxx&#8221; (where xxx etc is your actual serial)</li>
<li>restart Flex Builder</li>
</ul>


<p>Also thanks to <a href="http://62five.com/blog/?p=26">62five.com</a> for the post.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2008-11-10T14:16:54+11:00" pubdate data-updated="true">Nov 10<span>th</span>, 2008</time></div>
	<div class="tags">


	<a class='category' href='/categories/flex/'>Flex</a>


</div>
	
		<div class="comments"><a href="/2008/11/10/invalid-serial-number-when-upgrading-to-flex-builder-3-pro//page/9/index.html#disqus_thread">Comments</a></div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/2008/11/03/caveat-using-datediff-to-compare-difference-in-days/">
		
			Caveat Using dateDiff() to Compare Difference in Days</a>
	</h2>
	<div class="entry-content">
		<p>I had <a href="http://www.chapter31.com/2007/10/05/createodbcdate-returns-time-as-well/">some problems a little while ago</a> using dateCompare() and the same thing bit me recently with dateDiff(). Well really I had a problem with createODBCDate(), but let me explain.</p>

<p>I wanted to compare the &#8220;day&#8221; value between 2 dates like;</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&lt;</span><span class="nx">cfscript</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="nx">date1</span> <span class="o">=</span> <span class="nx">now</span><span class="p">();</span>
</span><span class='line'>  <span class="nx">date2</span> <span class="o">=</span> <span class="nx">myQuery</span><span class="p">.</span><span class="nx">dateCreated</span><span class="p">;</span>
</span><span class='line'>  
</span><span class='line'>  <span class="nx">dateDifference</span> <span class="o">=</span> <span class="nx">dateDiff</span><span class="p">(</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="nx">date1</span><span class="p">,</span> <span class="nx">date2</span><span class="p">);</span>  
</span><span class='line'><span class="o">&lt;</span><span class="err">/cfscript&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>The initial problem was that &#8220;myQuery.dateCreated&#8221; has a time value associated with it, as does the value of now(). This meant that where I should have had (or expected to have) a value of &#8220;1&#8221; if date2 was the next day, I wasn&#8217;t because the times were being calculated and both dates where within a 24-hour range. Makes sense.</p>

<p>My first simple fix (which was <a href="http://www.chapter31.com/2007/10/05/createodbcdate-returns-time-as-well/">what I tried before</a>) was to add a <em>createODBCDate()</em> around my dates.</p>

<p>This doesn&#8217;t work though, indeed when you ouput the results of createODBCDate() it looks as though you have a date object with no time but you really DO have a time&#8230;you just can&#8217;t see it :(</p>

<p>2 ways around this both involve stripping out the time part&#8230;using createDate() which is a bit unwieldy:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&lt;</span><span class="nx">cfscript</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="nx">date1</span> <span class="o">=</span> <span class="nx">createDate</span><span class="p">(</span><span class="nx">year</span><span class="p">(</span><span class="nx">now</span><span class="p">()),</span> <span class="nx">month</span><span class="p">(</span><span class="nx">now</span><span class="p">()),</span> <span class="nx">day</span><span class="p">(</span><span class="nx">now</span><span class="p">()));</span>
</span><span class='line'><span class="o">&lt;</span><span class="err">/cfscript&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Or using dateFormat():</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&lt;</span><span class="nx">cfscript</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="nx">date1</span> <span class="o">=</span> <span class="nx">dateFormat</span><span class="p">(</span><span class="nx">now</span><span class="p">(),</span> <span class="s2">&quot;yyyy/mmm/dd&quot;</span><span class="p">);</span>
</span><span class='line'><span class="o">&lt;</span><span class="err">/cfscript&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>So another note to self&#8230;whenever you want to do any sort of date comparisons watch out for the &#8220;time&#8221; values unless of course you want the times as part of your comparison!</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2008-11-03T17:34:48+11:00" pubdate data-updated="true">Nov 3<span>rd</span>, 2008</time></div>
	<div class="tags">


	<a class='category' href='/categories/coldfusion/'>ColdFusion</a>


</div>
	
		<div class="comments"><a href="/2008/11/03/caveat-using-datediff-to-compare-difference-in-days//page/9/index.html#disqus_thread">Comments</a></div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/2008/10/27/fun-with-reserved-words-in-mysql-5/">
		
			Fun With Reserved Words in MySQL 5</a>
	</h2>
	<div class="entry-content">
		<p>Most tools or languages you work with have words which are &#8220;reserved&#8221;, meaning you cannot use them in a variable declaration or schema definition etc as they have special treatment in the underlying system. If you try to do this you&#8217;ll usually get an immediate error.</p>

<p>Today I needed to change an existing SQL query from a &#8220;SELECT *&#8221; to explicitly defining each column because I wanted to add some date formating at the SQL level.</p>

<p>The query (after modifications) was as follows:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">SELECT</span>
</span><span class='line'>  <span class="nx">id</span>
</span><span class='line'>  <span class="p">,</span> <span class="nx">date_format</span><span class="p">(</span><span class="nx">dt_start</span><span class="p">,</span> <span class="s2">&quot;%d/%m/%Y&quot;</span><span class="p">)</span> <span class="nx">as</span> <span class="nx">dt_start</span>
</span><span class='line'>  <span class="p">,</span> <span class="nx">date_format</span><span class="p">(</span><span class="nx">dt_end</span><span class="p">,</span> <span class="s2">&quot;%d/%m/%Y&quot;</span><span class="p">)</span> <span class="nx">as</span> <span class="nx">dt_end</span>
</span><span class='line'>  <span class="p">,</span> <span class="nx">repeat</span>
</span><span class='line'><span class="nx">FROM</span>
</span><span class='line'>  <span class="nx">smsschedule</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now remember that the code <em>used</em> to be SELECT * and was working fine. But when I changed it as above it failed and threw an error:</p>

<blockquote><p>You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near&#8230;</p></blockquote>

<p>The reason is that &#8220;repeat&#8221; is a <a href="http://dev.mysql.com/doc/mysqld-version-reference/en/mysqld-version-reference-reservedwords-5-0.html">MySQL reserved word</a>. The interesting part (and real reason for this post) is that it didn&#8217;t fail when the query was sent as &#8220;*&#8221;, only when I explicitly set the invalid column in the SELECT list.</p>

<p>This was sent from ColdFusion but I also checked directly against the database (MySQL query browser) and had the same result.</p>

<p>Might be best to <a href="http://dev.mysql.com/doc/mysqld-version-reference/en/mysqld-version-reference-reservedwords-5-0.html">check the reserved list</a>, most are obvious but a few could catch you out if you&#8217;re not aware of them.</p>

<p>Also interesting to note is that the table in question contained 2 column names which I thought would have failed. Those being &#8220;hour&#8221; and &#8220;minute&#8221;.</p>

<p>Not only did they not fail, but they aren&#8217;t in the reserved words list for MySQL. It would appear that function names (at least some of them) are ok to be used as column names. Still&#8230;I wouldn&#8217;t really recommend using these column names in your tables :)</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2008-10-27T23:21:00+11:00" pubdate data-updated="true">Oct 27<span>th</span>, 2008</time></div>
	<div class="tags">


	<a class='category' href='/categories/databases/'>Databases</a>


</div>
	
		<div class="comments"><a href="/2008/10/27/fun-with-reserved-words-in-mysql-5//page/9/index.html#disqus_thread">Comments</a></div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/2008/10/22/aqua-data-studio-7-includes-an-er-modeler/">
		
			Aqua Data Studio 7 Includes an ER Modeler</a>
	</h2>
	<div class="entry-content">
		<p>Those of you who miss diagramming support when using MySQL tools will be pleased to know that the <a href="http://www.aquafold.com/d7/docs/index.html">latest version</a> of <a href="http://www.aquafold.com/">Aqua Data Studio</a> has support for ER Modeling :)</p>

<blockquote><p>The Entity-Relationship (ER) Modeler we’ve built into Aqua Data Studio 7 is as powerful as even the best standalone database diagramming tools. Use it to design a new database from scratch, understand and clean up a database nightmare in your office, or visually understand entity relationships in existing databases to write more effective SQL queries. Then share your diagram with the team through Aqua Data Studio’s integrated Subversion (SVN) and CVS source control clients.</p></blockquote>

<p>I&#8217;ve really missed creating Entity Relationship diagrams when using MySQL as they are fantastic during planning and of course offer great documentation for all developers, particularly as your project (and database) grows.</p>

<p>This will start filling a huge hole and help to close the gap in comparison to other vendors database tools.</p>

<p>ADS is a comercial product so hopefully diagramming will be added to the free MySQL Administrator soon.</p>

<p><a href="/images/uploads/2008/10/adsmodeler.jpg"><img src="/images/uploads/2008/10/adsmodeler-300x225.jpg" alt="" /></a></p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2008-10-22T14:23:49+11:00" pubdate data-updated="true">Oct 22<span>nd</span>, 2008</time></div>
	<div class="tags">


	<a class='category' href='/categories/databases/'>Databases</a>, <a class='category' href='/categories/tools/'>Tools</a>


</div>
	
		<div class="comments"><a href="/2008/10/22/aqua-data-studio-7-includes-an-er-modeler//page/9/index.html#disqus_thread">Comments</a></div>
	
</div></article>

<nav id="pagenavi">
    
        <a href="/page/8/" class="prev">Prev</a>
    
    
        <a href="/page/10/" class="next">Next</a>
    
    <div class="center"><a href="/blog/archives">Blog Archives</a></div>
</nav></div>
	<footer id="footer" class="inner">Copyright &copy; 2015

    Michael Sharman

</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->


<script type="text/javascript">
      var disqus_shortname = 'chapter31';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-306772-2']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>



</body>
</html>
